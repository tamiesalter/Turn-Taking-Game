/* Permission is hereby granted to registered users of FeatureKicker.com & ListenLoop.com to use this Software, without rights to modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so.  By loading this file, you agree to the Customer Terms of Service at get.listenloop.com/customer-terms-of-service.  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. Updated: 04/24/2015.  (c) 2015 SR Solutions, Inc. */

(function(e){"use strict";var t=function(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,o){if(null!==e)if(t&&e.forEach===t)e.forEach(n,o);else if(e.length===+e.length){for(var i=0,a=e.length;a>i;i++)if(n.call(o,e[i],i,e)==={})return}else for(var r in e)if(e.hasOwnProperty(r)&&n.call(o,e[r],r,e)==={})return},this.map=function(e,t,o){var i=[];return null==e?i:n&&e.map===n?e.map(t,o):(this.each(e,function(e,n,a){i[i.length]=t.call(o,e,n,a)}),i)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};t.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution){var t=this.getScreenResolution();t!==void 0&&e.push(this.getScreenResolution().join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),e.push(typeof document.body.addBehavior),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var n,o,i,a,r,s,l,c;for(n=3&e.length,o=e.length-n,i=t,r=3432918353,s=461845907,c=0;o>c;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,l=4294967295&(65535&l)*r+((65535&(l>>>16)*r)<<16),l=l<<15|l>>>17,l=4294967295&(65535&l)*s+((65535&(l>>>16)*s)<<16),i^=l,i=i<<13|i>>>19,a=4294967295&5*(65535&i)+((65535&5*(i>>>16))<<16),i=(65535&a)+27492+((65535&(a>>>16)+58964)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:l^=255&e.charCodeAt(c),l=4294967295&(65535&l)*r+((65535&(l>>>16)*r)<<16),l=l<<15|l>>>17,l=4294967295&(65535&l)*s+((65535&(l>>>16)*s)<<16),i^=l}return i^=e.length,i^=i>>>16,i=4294967295&2246822507*(65535&i)+((65535&2246822507*(i>>>16))<<16),i^=i>>>13,i=4294967295&3266489909*(65535&i)+((65535&3266489909*(i>>>16))<<16),i^=i>>>16,i>>>0},hasLocalStorage:function(){try{return!!e.localStorage}catch(t){return!0}},hasSessionStorage:function(){try{return!!e.sessionStorage}catch(t){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},getPluginsString:function(){return this.isIE()?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){var t=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.ie_activex&&e.ActiveXObject?this.map(t,function(e){try{return new ActiveXObject(e),e}catch(t){return null}}).join(";"):""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},"object"==typeof module&&"object"==typeof exports&&(module.exports=t),e.FkFingerprint=t})(window),function(e,t){function n(e){var t=e.length,n=dt.type(e);return dt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e){var t=Ct[e]={};return dt.each(e.match(ft)||[],function(e,n){t[n]=!0}),t}function i(e,n,o,i){if(dt.acceptData(e)){var a,r,s=dt.expando,l=e.nodeType,c=l?dt.cache:e,d=l?e[s]:e[s]&&s;if(d&&c[d]&&(i||c[d].data)||o!==t||"string"!=typeof n)return d||(d=l?e[s]=tt.pop()||dt.guid++:s),c[d]||(c[d]=l?{}:{toJSON:dt.noop}),("object"==typeof n||"function"==typeof n)&&(i?c[d]=dt.extend(c[d],n):c[d].data=dt.extend(c[d].data,n)),r=c[d],i||(r.data||(r.data={}),r=r.data),o!==t&&(r[dt.camelCase(n)]=o),"string"==typeof n?(a=r[n],null==a&&(a=r[dt.camelCase(n)])):a=r,a}}function a(e,t,n){if(dt.acceptData(e)){var o,i,a=e.nodeType,r=a?dt.cache:e,l=a?e[dt.expando]:dt.expando;if(r[l]){if(t&&(o=n?r[l]:r[l].data)){dt.isArray(t)?t=t.concat(dt.map(t,dt.camelCase)):t in o?t=[t]:(t=dt.camelCase(t),t=t in o?[t]:t.split(" ")),i=t.length;for(;i--;)delete o[t[i]];if(n?!s(o):!dt.isEmptyObject(o))return}(n||(delete r[l].data,s(r[l])))&&(a?dt.cleanData([e],!0):dt.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function r(e,n,o){if(o===t&&1===e.nodeType){var i="data-"+n.replace(Et,"-$1").toLowerCase();if(o=e.getAttribute(i),"string"==typeof o){try{o="true"===o?!0:"false"===o?!1:"null"===o?null:+o+""===o?+o:St.test(o)?dt.parseJSON(o):o}catch(a){}dt.data(e,n,o)}else o=t}return o}function s(e){var t;for(t in e)if(("data"!==t||!dt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function d(){try{return Y.activeElement}catch(e){}}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function f(e,t,n){if(dt.isFunction(t))return dt.grep(e,function(e,o){return!!t.call(e,o,e)!==n});if(t.nodeType)return dt.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ut.test(t))return dt.filter(t,e,n);t=dt.filter(t,e)}return dt.grep(e,function(e){return dt.inArray(e,t)>=0!==n})}function p(e){var t=Vt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function h(e,t){return dt.nodeName(e,"table")&&dt.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function g(e){return e.type=(null!==dt.find.attr(e,"type"))+"/"+e.type,e}function m(e){var t=an.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var n,o=0;null!=(n=e[o]);o++)dt._data(n,"globalEval",!t||dt._data(t[o],"globalEval"))}function y(e,t){if(1===t.nodeType&&dt.hasData(e)){var n,o,i,a=dt._data(e),r=dt._data(t,a),s=a.events;if(s){delete r.handle,r.events={};for(n in s)for(o=0,i=s[n].length;i>o;o++)dt.event.add(t,n,s[n][o])}r.data&&(r.data=dt.extend({},r.data))}}function b(e,t){var n,o,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!dt.support.noCloneEvent&&t[dt.expando]){i=dt._data(t);for(o in i.events)dt.removeEvent(t,o,i.handle);t.removeAttribute(dt.expando)}"script"===n&&t.text!==e.text?(g(t).text=e.text,m(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),dt.support.html5Clone&&e.innerHTML&&!dt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function k(e,n){var o,i,a=0,r=typeof e.getElementsByTagName!==G?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==G?e.querySelectorAll(n||"*"):t;if(!r)for(r=[],o=e.childNodes||e;null!=(i=o[a]);a++)!n||dt.nodeName(i,n)?r.push(i):dt.merge(r,k(i,n));return n===t||n&&dt.nodeName(e,n)?dt.merge([e],r):r}function w(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function x(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),o=t,i=Cn.length;i--;)if(t=Cn[i]+n,t in e)return t;return o}function _(e,t){return e=t||e,"none"===dt.css(e,"display")||!dt.contains(e.ownerDocument,e)}function T(e,t){for(var n,o,i,a=[],r=0,s=e.length;s>r;r++)o=e[r],o.style&&(a[r]=dt._data(o,"olddisplay"),n=o.style.display,t?(a[r]||"none"!==n||(o.style.display=""),""===o.style.display&&_(o)&&(a[r]=dt._data(o,"olddisplay",N(o.nodeName)))):a[r]||(i=_(o),(n&&"none"!==n||!i)&&dt._data(o,"olddisplay",i?n:dt.css(o,"display"))));for(r=0;s>r;r++)o=e[r],o.style&&(t&&"none"!==o.style.display&&""!==o.style.display||(o.style.display=t?a[r]||"":"none"));return e}function C(e,t,n){var o=yn.exec(t);return o?Math.max(0,o[1]-(n||0))+(o[2]||"px"):t}function S(e,t,n,o,i){for(var a=n===(o?"border":"content")?4:"width"===t?1:0,r=0;4>a;a+=2)"margin"===n&&(r+=dt.css(e,n+Tn[a],!0,i)),o?("content"===n&&(r-=dt.css(e,"padding"+Tn[a],!0,i)),"margin"!==n&&(r-=dt.css(e,"border"+Tn[a]+"Width",!0,i))):(r+=dt.css(e,"padding"+Tn[a],!0,i),"padding"!==n&&(r+=dt.css(e,"border"+Tn[a]+"Width",!0,i)));return r}function E(e,t,n){var o=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=un(e),r=dt.support.boxSizing&&"border-box"===dt.css(e,"boxSizing",!1,a);if(0>=i||null==i){if(i=fn(e,t,a),(0>i||null==i)&&(i=e.style[t]),bn.test(i))return i;o=r&&(dt.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+S(e,t,n||(r?"border":"content"),o,a)+"px"}function N(e){var t=Y,n=wn[e];return n||(n=I(e,t),"none"!==n&&n||(dn=(dn||dt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(dn[0].contentWindow||dn[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=I(e,t),dn.detach()),wn[e]=n),n}function I(e,t){var n=dt(t.createElement(e)).appendTo(t.body),o=dt.css(n[0],"display");return n.remove(),o}function A(e,t,n,o){var i;if(dt.isArray(t))dt.each(t,function(t,i){n||En.test(e)?o(e,i):A(e+"["+("object"==typeof i?t:"")+"]",i,n,o)});else if(n||"object"!==dt.type(t))o(e,t);else for(i in t)A(e+"["+i+"]",t[i],n,o)}function O(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var o,i=0,a=t.toLowerCase().match(ft)||[];if(dt.isFunction(n))for(;o=a[i++];)"+"===o[0]?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(n)):(e[o]=e[o]||[]).push(n)}}function R(e,n,o,i){function a(l){var c;return r[l]=!0,dt.each(e[l]||[],function(e,l){var d=l(n,o,i);return"string"!=typeof d||s||r[d]?s?!(c=d):t:(n.dataTypes.unshift(d),a(d),!1)}),c}var r={},s=e===$n;return a(n.dataTypes[0])||!r["*"]&&a("*")}function D(e,n){var o,i,a=dt.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((a[i]?e:o||(o={}))[i]=n[i]);return o&&dt.extend(!0,e,o),e}function L(e,n,o){for(var i,a,r,s,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),a===t&&(a=e.mimeType||n.getResponseHeader("Content-Type"));if(a)for(s in l)if(l[s]&&l[s].test(a)){c.unshift(s);break}if(c[0]in o)r=c[0];else{for(s in o){if(!c[0]||e.converters[s+" "+c[0]]){r=s;break}i||(i=s)}r=r||i}return r?(r!==c[0]&&c.unshift(r),o[r]):t}function j(e,t,n,o){var i,a,r,s,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(a=d.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(r=c[l+" "+a]||c["* "+a],!r)for(i in c)if(s=i.split(" "),s[1]===a&&(r=c[l+" "+s[0]]||c["* "+s[0]])){r===!0?r=c[i]:c[i]!==!0&&(a=s[0],d.unshift(s[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function H(){try{return new e.XMLHttpRequest}catch(t){}}function M(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function P(){return setTimeout(function(){Zn=t}),Zn=dt.now()}function z(e,t,n){for(var o,i=(ao[t]||[]).concat(ao["*"]),a=0,r=i.length;r>a;a++)if(o=i[a].call(n,t,e))return o}function F(e,t,n){var o,i,a=0,r=io.length,s=dt.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Zn||P(),n=Math.max(0,c.startTime+c.duration-t),o=n/c.duration||0,a=1-o,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(a);return s.notifyWith(e,[c,a,n]),1>a&&l?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:dt.extend({},t),opts:dt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||P(),duration:n.duration,tweens:[],createTween:function(t,n){var o=dt.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(o),o},stop:function(t){var n=0,o=t?c.tweens.length:0;if(i)return this;for(i=!0;o>n;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),d=c.props;for(q(d,c.opts.specialEasing);r>a;a++)if(o=io[a].call(c,e,d,c.opts))return o;return dt.map(d,z,c),dt.isFunction(c.opts.start)&&c.opts.start.call(e,c),dt.fx.timer(dt.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(e,t){var n,o,i,a,r;for(n in e)if(o=dt.camelCase(n),i=t[o],a=e[n],dt.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==o&&(e[o]=a,delete e[n]),r=dt.cssHooks[o],r&&"expand"in r){a=r.expand(a),delete e[o];for(n in a)n in e||(e[n]=a[n],t[n]=i)}else t[o]=i}function U(e,t,n){var o,i,a,r,s,l,c=this,d={},u=e.style,f=e.nodeType&&_(e),p=dt._data(e,"fxshow");n.queue||(s=dt._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,dt.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===dt.css(e,"display")&&"none"===dt.css(e,"float")&&(dt.support.inlineBlockNeedsLayout&&"inline"!==N(e.nodeName)?u.zoom=1:u.display="inline-block")),n.overflow&&(u.overflow="hidden",dt.support.shrinkWrapBlocks||c.always(function(){u.overflow=n.overflow[0],u.overflowX=n.overflow[1],u.overflowY=n.overflow[2]}));for(o in t)if(i=t[o],to.exec(i)){if(delete t[o],a=a||"toggle"===i,i===(f?"hide":"show"))continue;d[o]=p&&p[o]||dt.style(e,o)}if(!dt.isEmptyObject(d)){p?"hidden"in p&&(f=p.hidden):p=dt._data(e,"fxshow",{}),a&&(p.hidden=!f),f?dt(e).show():c.done(function(){dt(e).hide()}),c.done(function(){var t;dt._removeData(e,"fxshow");for(t in d)dt.style(e,t,d[t])});for(o in d)r=z(f?p[o]:0,o,c),o in p||(p[o]=r.start,f&&(r.end=r.start,r.start="width"===o||"height"===o?1:0))}}function W(e,t,n,o,i){return new W.prototype.init(e,t,n,o,i)}function $(e,t){var n,o={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Tn[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function B(e){return dt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V,X,G=typeof t,J=e.location,Y=e.document,Q=Y.documentElement,K=e.jQuery,Z=e.$,et={},tt=[],nt="1.10.0",ot=tt.concat,it=tt.push,at=tt.slice,rt=tt.indexOf,st=et.toString,lt=et.hasOwnProperty,ct=nt.trim,dt=function(e,t){return new dt.fn.init(e,t,X)},ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=/\S+/g,pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,kt=/^-ms-/,wt=/-([\da-z])/gi,xt=function(e,t){return t.toUpperCase()},_t=function(e){(Y.addEventListener||"load"===e.type||"complete"===Y.readyState)&&(Tt(),dt.ready())},Tt=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",_t,!1),e.removeEventListener("load",_t,!1)):(Y.detachEvent("onreadystatechange",_t),e.detachEvent("onload",_t))};dt.fn=dt.prototype={jquery:nt,constructor:dt,init:function(e,n,o){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ht.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||o).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof dt?n[0]:n,dt.merge(this,dt.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:Y,!0)),gt.test(i[1])&&dt.isPlainObject(n))for(i in n)dt.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=Y.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return o.find(e);this.length=1,this[0]=a}return this.context=Y,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):dt.isFunction(e)?o.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),dt.makeArray(e,this))},selector:"",length:0,toArray:function(){return at.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=dt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return dt.each(this,e,t)},ready:function(e){return dt.ready.promise().done(e),this},slice:function(){return this.pushStack(at.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(dt.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:it,sort:[].sort,splice:[].splice},dt.fn.init.prototype=dt.fn,dt.extend=dt.fn.extend=function(){var e,n,o,i,a,r,s=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[1]||{},l=2),"object"==typeof s||dt.isFunction(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(a=arguments[l]))for(i in a)e=s[i],o=a[i],s!==o&&(d&&o&&(dt.isPlainObject(o)||(n=dt.isArray(o)))?(n?(n=!1,r=e&&dt.isArray(e)?e:[]):r=e&&dt.isPlainObject(e)?e:{},s[i]=dt.extend(d,r,o)):o!==t&&(s[i]=o));return s},dt.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===dt&&(e.$=Z),t&&e.jQuery===dt&&(e.jQuery=K),dt},isReady:!1,readyWait:1,holdReady:function(e){e?dt.readyWait++:dt.ready(!0)},ready:function(e){if(e===!0?!--dt.readyWait:!dt.isReady){if(!Y.body)return setTimeout(dt.ready);dt.isReady=!0,e!==!0&&--dt.readyWait>0||(V.resolveWith(Y,[dt]),dt.fn.trigger&&dt(Y).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===dt.type(e)},isArray:Array.isArray||function(e){return"array"===dt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?et[st.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==dt.type(e)||e.nodeType||dt.isWindow(e))return!1;try{if(e.constructor&&!lt.call(e,"constructor")&&!lt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(o){return!1}if(dt.support.ownLast)for(n in e)return lt.call(e,n);for(n in e);return n===t||lt.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Y;var o=gt.exec(e),i=!n&&[];return o?[t.createElement(o[1])]:(o=dt.buildFragment([e],t,i),i&&dt(i).remove(),dt.merge([],o.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=dt.trim(n),n&&mt.test(n.replace(yt,"@").replace(bt,"]").replace(vt,"")))?Function("return "+n)():(dt.error("Invalid JSON: "+n),t)},parseXML:function(n){var o,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,o=i.parseFromString(n,"text/xml")):(o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(n))}catch(a){o=t}return o&&o.documentElement&&!o.getElementsByTagName("parsererror").length||dt.error("Invalid XML: "+n),o},noop:function(){},globalEval:function(t){t&&dt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(kt,"ms-").replace(wt,xt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,o){var i,a=0,r=e.length,s=n(e);if(o){if(s)for(;r>a&&(i=t.apply(e[a],o),i!==!1);a++);else for(a in e)if(i=t.apply(e[a],o),i===!1)break}else if(s)for(;r>a&&(i=t.call(e[a],a,e[a]),i!==!1);a++);else for(a in e)if(i=t.call(e[a],a,e[a]),i===!1)break;return e},trim:ct&&!ct.call("﻿ ")?function(e){return null==e?"":ct.call(e)}:function(e){return null==e?"":(e+"").replace(pt,"")},makeArray:function(e,t){var o=t||[];return null!=e&&(n(Object(e))?dt.merge(o,"string"==typeof e?[e]:e):it.call(o,e)),o},inArray:function(e,t,n){var o;if(t){if(rt)return rt.call(t,e,n);for(o=t.length,n=n?0>n?Math.max(0,o+n):n:0;o>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var o=n.length,i=e.length,a=0;if("number"==typeof o)for(;o>a;a++)e[i++]=n[a];else for(;n[a]!==t;)e[i++]=n[a++];return e.length=i,e},grep:function(e,t,n){var o,i=[],a=0,r=e.length;for(n=!!n;r>a;a++)o=!!t(e[a],a),n!==o&&i.push(e[a]);return i},map:function(e,t,o){var i,a=0,r=e.length,s=n(e),l=[];if(s)for(;r>a;a++)i=t(e[a],a,o),null!=i&&(l[l.length]=i);else for(a in e)i=t(e[a],a,o),null!=i&&(l[l.length]=i);return ot.apply([],l)},guid:1,proxy:function(e,n){var o,i,a;return"string"==typeof n&&(a=e[n],n=e,e=a),dt.isFunction(e)?(o=at.call(arguments,2),i=function(){return e.apply(n||this,o.concat(at.call(arguments)))},i.guid=e.guid=e.guid||dt.guid++,i):t},access:function(e,n,o,i,a,r,s){var l=0,c=e.length,d=null==o;if("object"===dt.type(o)){a=!0;for(l in o)dt.access(e,n,l,o[l],!0,r,s)}else if(i!==t&&(a=!0,dt.isFunction(i)||(s=!0),d&&(s?(n.call(e,i),n=null):(d=n,n=function(e,t,n){return d.call(dt(e),n)})),n))for(;c>l;l++)n(e[l],o,s?i:i.call(e[l],l,n(e[l],o)));return a?e:d?n.call(e):c?n(e[0],o):r},now:function(){return(new Date).getTime()},swap:function(e,t,n,o){var i,a,r={};for(a in t)r[a]=e.style[a],e.style[a]=t[a];i=n.apply(e,o||[]);for(a in t)e.style[a]=r[a];return i}}),dt.ready.promise=function(t){if(!V)if(V=dt.Deferred(),"complete"===Y.readyState)setTimeout(dt.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",_t,!1),e.addEventListener("load",_t,!1);else{Y.attachEvent("onreadystatechange",_t),e.attachEvent("onload",_t);var n=!1;try{n=null==e.frameElement&&Y.documentElement}catch(o){}n&&n.doScroll&&function i(){if(!dt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Tt(),dt.ready()}}()}return V.promise(t)},dt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()}),X=dt(Y),function(e,t){function n(e,t,n,o){var i,a,r,s,l,c,d,u,f,p;if((t?t.ownerDocument||t:$)!==H&&j(t),t=t||H,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(P&&!o){if(i=_t.exec(e))if(r=i[1]){if(9===s){if(a=t.getElementById(r),!a||!a.parentNode)return n;if(a.id===r)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(r))&&U(t,a)&&a.id===r)return n.push(a),n}else{if(i[2])return it.apply(n,t.getElementsByTagName(e)),n;if((r=i[3])&&E.getElementsByClassName&&t.getElementsByClassName)return it.apply(n,t.getElementsByClassName(r)),n}if(E.qsa&&(!z||!z.test(e))){if(u=d=W,f=t,p=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=g(e),(d=t.getAttribute("id"))?u=d.replace(St,"\\$&"):t.setAttribute("id",u),u="[id='"+u+"'] ",l=c.length;l--;)c[l]=u+m(c[l]);f=vt.test(e)&&t.parentNode||t,p=c.join(",")}if(p)try{return it.apply(n,f.querySelectorAll(p)),n}catch(h){}finally{d||t.removeAttribute("id")}}}return T(e.replace(ht,"$1"),t,n,o)}function o(e){return xt.test(e+"")}function i(){function e(n,o){return t.push(n+=" ")>I.cacheLength&&delete e[t.shift()],e[n]=o}var t=[];return e}function a(e){return e[W]=!0,e}function r(e){var t=H.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t,n){e=e.split("|");for(var o,i=e.length,a=n?null:t;i--;)(o=I.attrHandle[e[i]])&&o!==t||(I.attrHandle[e[i]]=a)}function l(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:e[t]===!0?t.toLowerCase():null}function c(e,t){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}function d(e){return"input"===e.nodeName.toLowerCase()?e.defaultValue:t}function u(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Z)-(~e.sourceIndex||Z);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function f(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function p(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function h(e){return a(function(t){return t=+t,a(function(n,o){for(var i,a=e([],n.length,t),r=a.length;r--;)n[i=a[r]]&&(n[i]=!(o[i]=n[i]))})})}function g(e,t){var o,i,a,r,s,l,c,d=G[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],c=I.preFilter;s;){(!o||(i=gt.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),o=!1,(i=mt.exec(s))&&(o=i.shift(),a.push({value:o,type:i[0].replace(ht," ")}),s=s.slice(o.length));for(r in I.filter)!(i=wt[r].exec(s))||c[r]&&!(i=c[r](i))||(o=i.shift(),a.push({value:o,type:r,matches:i}),s=s.slice(o.length));if(!o)break}return t?s.length:s?n.error(e):G(e,l).slice(0)}function m(e){for(var t=0,n=e.length,o="";n>t;t++)o+=e[t].value;return o}function v(e,t,n){var o=t.dir,i=n&&"parentNode"===o,a=V++;return t.first?function(t,n,a){for(;t=t[o];)if(1===t.nodeType||i)return e(t,n,a)}:function(t,n,r){var s,l,c,d=B+" "+a;if(r){for(;t=t[o];)if((1===t.nodeType||i)&&e(t,n,r))return!0}else for(;t=t[o];)if(1===t.nodeType||i)if(c=t[W]||(t[W]={}),(l=c[o])&&l[0]===d){if((s=l[1])===!0||s===N)return s===!0}else if(l=c[o]=[d],l[1]=e(t,n,r)||N,l[1]===!0)return!0}}function y(e){return e.length>1?function(t,n,o){for(var i=e.length;i--;)if(!e[i](t,n,o))return!1;return!0}:e[0]}function b(e,t,n,o,i){for(var a,r=[],s=0,l=e.length,c=null!=t;l>s;s++)(a=e[s])&&(!n||n(a,o,i))&&(r.push(a),c&&t.push(s));return r}function k(e,t,n,o,i,r){return o&&!o[W]&&(o=k(o)),i&&!i[W]&&(i=k(i,r)),a(function(a,r,s,l){var c,d,u,f=[],p=[],h=r.length,g=a||_(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?g:b(g,f,e,s,l),v=n?i||(a?e:h||o)?[]:r:m;if(n&&n(m,v,s,l),o)for(c=b(v,p),o(c,[],s,l),d=c.length;d--;)(u=c[d])&&(v[p[d]]=!(m[p[d]]=u));if(a){if(i||e){if(i){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(m[d]=u);i(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&(c=i?rt.call(a,u):f[d])>-1&&(a[c]=!(r[c]=u))}}else v=b(v===r?v.splice(h,v.length):v),i?i(null,r,v,l):it.apply(r,v)})}function w(e){for(var t,n,o,i=e.length,a=I.relative[e[0].type],r=a||I.relative[" "],s=a?1:0,l=v(function(e){return e===t},r,!0),c=v(function(e){return rt.call(t,e)>-1},r,!0),d=[function(e,n,o){return!a&&(o||n!==D)||((t=n).nodeType?l(e,n,o):c(e,n,o))}];i>s;s++)if(n=I.relative[e[s].type])d=[v(y(d),n)];else{if(n=I.filter[e[s].type].apply(null,e[s].matches),n[W]){for(o=++s;i>o&&!I.relative[e[o].type];o++);return k(s>1&&y(d),s>1&&m(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ht,"$1"),n,o>s&&w(e.slice(s,o)),i>o&&w(e=e.slice(o)),i>o&&m(e))}d.push(n)}return y(d)}function x(e,t){var o=0,i=t.length>0,r=e.length>0,s=function(a,s,l,c,d){var u,f,p,h=[],g=0,m="0",v=a&&[],y=null!=d,k=D,w=a||r&&I.find.TAG("*",d&&s.parentNode||s),x=B+=null==k?1:Math.random()||.1;for(y&&(D=s!==H&&s,N=o);null!=(u=w[m]);m++){if(r&&u){for(f=0;p=e[f++];)if(p(u,s,l)){c.push(u);break}y&&(B=x,N=++o)}i&&((u=!p&&u)&&g--,a&&v.push(u))}if(g+=m,i&&m!==g){for(f=0;p=t[f++];)p(v,h,s,l);if(a){if(g>0)for(;m--;)v[m]||h[m]||(h[m]=nt.call(c));h=b(h)}it.apply(c,h),y&&!a&&h.length>0&&g+t.length>1&&n.uniqueSort(c)}return y&&(B=x,D=k),v};return i?a(s):s}function _(e,t,o){for(var i=0,a=t.length;a>i;i++)n(e,t[i],o);return o}function T(e,t,n,o){var i,a,r,s,l,c=g(e);if(!o&&1===c.length){if(a=c[0]=c[0].slice(0),a.length>2&&"ID"===(r=a[0]).type&&E.getById&&9===t.nodeType&&P&&I.relative[a[1].type]){if(t=(I.find.ID(r.matches[0].replace(Et,Nt),t)||[])[0],!t)return n;e=e.slice(a.shift().value.length)}for(i=wt.needsContext.test(e)?0:a.length;i--&&(r=a[i],!I.relative[s=r.type]);)if((l=I.find[s])&&(o=l(r.matches[0].replace(Et,Nt),vt.test(a[0].type)&&t.parentNode||t))){if(a.splice(i,1),e=o.length&&m(a),!e)return it.apply(n,o),n;break}}return R(e,c)(o,t,!P,n,vt.test(e)),n}function C(){}var S,E,N,I,A,O,R,D,L,j,H,M,P,z,F,q,U,W="sizzle"+-new Date,$=e.document,B=0,V=0,X=i(),G=i(),J=i(),Y=!1,Q=function(){return 0},K=typeof t,Z=1<<31,et={}.hasOwnProperty,tt=[],nt=tt.pop,ot=tt.push,it=tt.push,at=tt.slice,rt=tt.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},st="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",lt="[\\x20\\t\\r\\n\\f]",ct="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ut=ct.replace("w","w#"),ft="\\["+lt+"*("+ct+")"+lt+"*(?:([*^$|!~]?=)"+lt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ut+")|)|)"+lt+"*\\]",pt=":("+ct+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ft.replace(3,8)+")*)|.*)\\)|)",ht=RegExp("^"+lt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+lt+"+$","g"),gt=RegExp("^"+lt+"*,"+lt+"*"),mt=RegExp("^"+lt+"*([>+~]|"+lt+")"+lt+"*"),vt=RegExp(lt+"*[+~]"),yt=RegExp("="+lt+"*([^\\]'\"]*)"+lt+"*\\]","g"),bt=RegExp(pt),kt=RegExp("^"+ut+"$"),wt={ID:RegExp("^#("+ct+")"),CLASS:RegExp("^\\.("+ct+")"),TAG:RegExp("^("+ct.replace("w","w*")+")"),ATTR:RegExp("^"+ft),PSEUDO:RegExp("^"+pt),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+lt+"*(even|odd|(([+-]|)(\\d*)n|)"+lt+"*(?:([+-]|)"+lt+"*(\\d+)|))"+lt+"*\\)|)","i"),bool:RegExp("^(?:"+st+")$","i"),needsContext:RegExp("^"+lt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+lt+"*((?:-\\d)?\\d*)"+lt+"*\\)|)(?=[^-]|$)","i")},xt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Tt=/^(?:input|select|textarea|button)$/i,Ct=/^h\d$/i,St=/'|\\/g,Et=RegExp("\\\\([\\da-f]{1,6}"+lt+"?|("+lt+")|.)","ig"),Nt=function(e,t,n){var o="0x"+t-65536;return o!==o||n?t:0>o?String.fromCharCode(o+65536):String.fromCharCode(55296|o>>10,56320|1023&o)};try{it.apply(tt=at.call($.childNodes),$.childNodes),tt[$.childNodes.length].nodeType}catch(It){it={apply:tt.length?function(e,t){ot.apply(e,at.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}O=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},E=n.support={},j=n.setDocument=function(e){var n=e?e.ownerDocument||e:$;return n!==H&&9===n.nodeType&&n.documentElement?(H=n,M=n.documentElement,P=!O(n),E.attributes=r(function(e){return e.innerHTML="<a href='#'></a>",s("type|href|height|width",c,"#"===e.firstChild.getAttribute("href")),s(st,l,null==e.getAttribute("disabled")),e.className="i",!e.getAttribute("className")}),E.input=r(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}),s("value",d,E.attributes&&E.input),E.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),E.getById=r(function(e){return M.appendChild(e).id=W,!n.getElementsByName||!n.getElementsByName(W).length}),E.getById?(I.find.ID=function(e,t){if(typeof t.getElementById!==K&&P){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},I.filter.ID=function(e){var t=e.replace(Et,Nt);return function(e){return e.getAttribute("id")===t}}):(delete I.find.ID,I.filter.ID=function(e){var t=e.replace(Et,Nt);return function(e){var n=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return n&&n.value===t}}),I.find.TAG=E.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==K?n.getElementsByTagName(e):t}:function(e,t){var n,o=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&o.push(n);return o}return a},I.find.CLASS=E.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==K&&P?n.getElementsByClassName(e):t},F=[],z=[],(E.qsa=o(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||z.push("\\["+lt+"*(?:value|"+st+")"),e.querySelectorAll(":checked").length||z.push(":checked")
}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&z.push("[*^$]="+lt+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||z.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),z.push(",.*:")})),(E.matchesSelector=o(q=M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&r(function(e){E.disconnectedMatch=q.call(e,"div"),q.call(e,"[s!='']:x"),F.push("!=",pt)}),z=z.length&&RegExp(z.join("|")),F=F.length&&RegExp(F.join("|")),U=o(M.contains)||M.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E.sortDetached=r(function(e){return 1&e.compareDocumentPosition(n.createElement("div"))}),Q=M.compareDocumentPosition?function(e,t){if(e===t)return Y=!0,0;var o=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return o?1&o||!E.sortDetached&&t.compareDocumentPosition(e)===o?e===n||U($,e)?-1:t===n||U($,t)?1:L?rt.call(L,e)-rt.call(L,t):0:4&o?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var o,i=0,a=e.parentNode,r=t.parentNode,s=[e],l=[t];if(e===t)return Y=!0,0;if(!a||!r)return e===n?-1:t===n?1:a?-1:r?1:L?rt.call(L,e)-rt.call(L,t):0;if(a===r)return u(e,t);for(o=e;o=o.parentNode;)s.unshift(o);for(o=t;o=o.parentNode;)l.unshift(o);for(;s[i]===l[i];)i++;return i?u(s[i],l[i]):s[i]===$?-1:l[i]===$?1:0},n):H},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==H&&j(e),t=t.replace(yt,"='$1']"),!(!E.matchesSelector||!P||F&&F.test(t)||z&&z.test(t)))try{var o=q.call(e,t);if(o||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return o}catch(i){}return n(t,H,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==H&&j(e),U(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==H&&j(e);var o=I.attrHandle[n.toLowerCase()],i=o&&et.call(I.attrHandle,n.toLowerCase())?o(e,n,!P):t;return i===t?E.attributes||!P?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null:i},n.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],o=0,i=0;if(Y=!E.detectDuplicates,L=!E.sortStable&&e.slice(0),e.sort(Q),Y){for(;t=e[i++];)t===e[i]&&(o=n.push(i));for(;o--;)e.splice(n[o],1)}return e},A=n.getText=function(e){var t,n="",o=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=A(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[o];o++)n+=A(t);return n},I=n.selectors={cacheLength:50,createPseudo:a,match:wt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Et,Nt),e[3]=(e[4]||e[5]||"").replace(Et,Nt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,o=!e[5]&&e[2];return wt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:o&&bt.test(o)&&(n=g(o,!0))&&(n=o.indexOf(")",o.length-n)-o.length)&&(e[0]=e[0].slice(0,n),e[2]=o.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Et,Nt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=X[e+" "];return t||(t=RegExp("(^|"+lt+")"+e+"("+lt+"|$)"))&&X(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,t,o){return function(i){var a=n.attr(i,e);return null==a?"!="===t:t?(a+="","="===t?a===o:"!="===t?a!==o:"^="===t?o&&0===a.indexOf(o):"*="===t?o&&a.indexOf(o)>-1:"$="===t?o&&a.slice(-o.length)===o:"~="===t?(" "+a+" ").indexOf(o)>-1:"|="===t?a===o||a.slice(0,o.length+1)===o+"-":!1):!0}},CHILD:function(e,t,n,o,i){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===o&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,f,p,h,g=a!==r?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(m){if(a){for(;g;){for(u=t;u=u[g];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[r?m.firstChild:m.lastChild],r&&y){for(d=m[W]||(m[W]={}),c=d[e]||[],p=c[0]===B&&c[1],f=c[0]===B&&c[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(f=p=0)||h.pop();)if(1===u.nodeType&&++f&&u===t){d[e]=[B,p,f];break}}else if(y&&(c=(t[W]||(t[W]={}))[e])&&c[0]===B)f=c[1];else for(;(u=++p&&u&&u[g]||(f=p=0)||h.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++f||(y&&((u[W]||(u[W]={}))[e]=[B,f]),u!==t)););return f-=i,f===o||0===f%o&&f/o>=0}}},PSEUDO:function(e,t){var o,i=I.pseudos[e]||I.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return i[W]?i(t):i.length>1?(o=[e,e,"",t],I.setFilters.hasOwnProperty(e.toLowerCase())?a(function(e,n){for(var o,a=i(e,t),r=a.length;r--;)o=rt.call(e,a[r]),e[o]=!(n[o]=a[r])}):function(e){return i(e,0,o)}):i}},pseudos:{not:a(function(e){var t=[],n=[],o=R(e.replace(ht,"$1"));return o[W]?a(function(e,t,n,i){for(var a,r=o(e,null,i,[]),s=e.length;s--;)(a=r[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,o(t,null,a,n),!n.pop()}}),has:a(function(e){return function(t){return n(e,t).length>0}}),contains:a(function(e){return function(t){return(t.textContent||t.innerText||A(t)).indexOf(e)>-1}}),lang:a(function(e){return kt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(Et,Nt).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!I.pseudos.empty(e)},header:function(e){return Ct.test(e.nodeName)},input:function(e){return Tt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:h(function(){return[0]}),last:h(function(e,t){return[t-1]}),eq:h(function(e,t,n){return[0>n?n+t:n]}),even:h(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:h(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:h(function(e,t,n){for(var o=0>n?n+t:n;--o>=0;)e.push(o);return e}),gt:h(function(e,t,n){for(var o=0>n?n+t:n;t>++o;)e.push(o);return e})}};for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[S]=f(S);for(S in{submit:!0,reset:!0})I.pseudos[S]=p(S);R=n.compile=function(e,t){var n,o=[],i=[],a=J[e+" "];if(!a){for(t||(t=g(e)),n=t.length;n--;)a=w(t[n]),a[W]?o.push(a):i.push(a);a=J(e,x(i,o))}return a},I.pseudos.nth=I.pseudos.eq,C.prototype=I.filters=I.pseudos,I.setFilters=new C,E.sortStable=W.split("").sort(Q).join("")===W,j(),[0,0].sort(Q),E.detectDuplicates=Y,dt.find=n,dt.expr=n.selectors,dt.expr[":"]=dt.expr.pseudos,dt.unique=n.uniqueSort,dt.text=n.getText,dt.isXMLDoc=n.isXML,dt.contains=n.contains}(e);var Ct={};dt.Callbacks=function(e){e="string"==typeof e?Ct[e]||o(e):dt.extend({},e);var n,i,a,r,s,l,c=[],d=!e.once&&[],u=function(t){for(i=e.memory&&t,a=!0,s=l||0,l=0,r=c.length,n=!0;c&&r>s;s++)if(c[s].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}n=!1,c&&(d?d.length&&u(d.shift()):i?c=[]:f.disable())},f={add:function(){if(c){var t=c.length;(function o(t){dt.each(t,function(t,n){var i=dt.type(n);"function"===i?e.unique&&f.has(n)||c.push(n):n&&n.length&&"string"!==i&&o(n)})})(arguments),n?r=c.length:i&&(l=t,u(i))}return this},remove:function(){return c&&dt.each(arguments,function(e,t){for(var o;(o=dt.inArray(t,c,o))>-1;)c.splice(o,1),n&&(r>=o&&r--,s>=o&&s--)}),this},has:function(e){return e?dt.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=d=i=t,this},disabled:function(){return!c},lock:function(){return d=t,i||f.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||a&&!d||(n?d.push(t):u(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!a}};return f},dt.extend({Deferred:function(e){var t=[["resolve","done",dt.Callbacks("once memory"),"resolved"],["reject","fail",dt.Callbacks("once memory"),"rejected"],["notify","progress",dt.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return dt.Deferred(function(n){dt.each(t,function(t,a){var r=a[0],s=dt.isFunction(e[t])&&e[t];i[a[1]](function(){var e=s&&s.apply(this,arguments);e&&dt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r+"With"](this===o?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?dt.extend(e,o):o}},i={};return o.pipe=o.then,dt.each(t,function(e,a){var r=a[2],s=a[3];o[a[1]]=r.add,s&&r.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?o:this,arguments),this},i[a[0]+"With"]=r.fireWith}),o.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,o,i=0,a=at.call(arguments),r=a.length,s=1!==r||e&&dt.isFunction(e.promise)?r:0,l=1===s?e:dt.Deferred(),c=function(e,n,o){return function(i){n[e]=this,o[e]=arguments.length>1?at.call(arguments):i,o===t?l.notifyWith(n,o):--s||l.resolveWith(n,o)}};if(r>1)for(t=Array(r),n=Array(r),o=Array(r);r>i;i++)a[i]&&dt.isFunction(a[i].promise)?a[i].promise().done(c(i,o,a)).fail(l.reject).progress(c(i,n,t)):--s;return s||l.resolveWith(o,a),l.promise()}}),dt.support=function(t){var n,o,i,a,r,s,l,c,d,u=Y.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=u.getElementsByTagName("*")||[],o=u.getElementsByTagName("a")[0],!o||!o.style||!n.length)return t;a=Y.createElement("select"),s=a.appendChild(Y.createElement("option")),i=u.getElementsByTagName("input")[0],o.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==u.className,t.leadingWhitespace=3===u.firstChild.nodeType,t.tbody=!u.getElementsByTagName("tbody").length,t.htmlSerialize=!!u.getElementsByTagName("link").length,t.style=/top/.test(o.getAttribute("style")),t.hrefNormalized="/a"===o.getAttribute("href"),t.opacity=/^0.5/.test(o.style.opacity),t.cssFloat=!!o.style.cssFloat,t.checkOn=!!i.value,t.optSelected=s.selected,t.enctype=!!Y.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,i.checked=!0,t.noCloneChecked=i.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!s.disabled;try{delete u.test}catch(f){t.deleteExpando=!1}i=Y.createElement("input"),i.setAttribute("value",""),t.input=""===i.getAttribute("value"),i.value="t",i.setAttribute("type","radio"),t.radioValue="t"===i.value,i.setAttribute("checked","t"),i.setAttribute("name","t"),r=Y.createDocumentFragment(),r.appendChild(i),t.appendChecked=i.checked,t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,u.attachEvent&&(u.attachEvent("onclick",function(){t.noCloneEvent=!1}),u.cloneNode(!0).click());for(d in{submit:!0,change:!0,focusin:!0})u.setAttribute(l="on"+d,"t"),t[d+"Bubbles"]=l in e||u.attributes[l].expando===!1;u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===u.style.backgroundClip;for(d in dt(t))break;return t.ownLast="0"!==d,dt(function(){var n,o,i,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=Y.getElementsByTagName("body")[0];r&&(n=Y.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(n).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=u.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=c&&0===i[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",dt.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===u.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(u,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(u,null)||{width:"4px"}).width,o=u.appendChild(Y.createElement("div")),o.style.cssText=u.style.cssText=a,o.style.marginRight=o.style.width="0",u.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof u.style.zoom!==G&&(u.innerHTML="",u.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==u.offsetWidth,t.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(n),n=u=i=o=null)}),n=a=r=s=o=i=null,t}({});var St=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Et=/([A-Z])/g;dt.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?dt.cache[e[dt.expando]]:e[dt.expando],!!e&&!s(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return a(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return a(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&dt.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),dt.fn.extend({data:function(e,n){var o,i,a=null,s=0,l=this[0];if(e===t){if(this.length&&(a=dt.data(l),1===l.nodeType&&!dt._data(l,"parsedAttrs"))){for(o=l.attributes;o.length>s;s++)i=o[s].name,0===i.indexOf("data-")&&(i=dt.camelCase(i.slice(5)),r(l,i,a[i]));dt._data(l,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){dt.data(this,e)}):arguments.length>1?this.each(function(){dt.data(this,e,n)}):l?r(l,e,dt.data(l,e)):null},removeData:function(e){return this.each(function(){dt.removeData(this,e)})}}),dt.extend({queue:function(e,n,o){var i;return e?(n=(n||"fx")+"queue",i=dt._data(e,n),o&&(!i||dt.isArray(o)?i=dt._data(e,n,dt.makeArray(o)):i.push(o)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=dt.queue(e,t),o=n.length,i=n.shift(),a=dt._queueHooks(e,t),r=function(){dt.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),o--),a.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,r,a)),!o&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return dt._data(e,n)||dt._data(e,n,{empty:dt.Callbacks("once memory").add(function(){dt._removeData(e,t+"queue"),dt._removeData(e,n)})})}}),dt.fn.extend({queue:function(e,n){var o=2;return"string"!=typeof e&&(n=e,e="fx",o--),o>arguments.length?dt.queue(this[0],e):n===t?this:this.each(function(){var t=dt.queue(this,e,n);dt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&dt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){dt.dequeue(this,e)})},delay:function(e,t){return e=dt.fx?dt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var o=setTimeout(t,e);n.stop=function(){clearTimeout(o)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var o,i=1,a=dt.Deferred(),r=this,s=this.length,l=function(){--i||a.resolveWith(r,[r])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)o=dt._data(r[s],e+"queueHooks"),o&&o.empty&&(i++,o.empty.add(l));return l(),a.promise(n)}});var Nt,It,At=/[\t\r\n\f]/g,Ot=/\r/g,Rt=/^(?:input|select|textarea|button|object)$/i,Dt=/^(?:a|area)$/i,Lt=/^(?:checked|selected)$/i,jt=dt.support.getSetAttribute,Ht=dt.support.input;dt.fn.extend({attr:function(e,t){return dt.access(this,dt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){dt.removeAttr(this,e)})},prop:function(e,t){return dt.access(this,dt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=dt.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,o,i,a,r=0,s=this.length,l="string"==typeof e&&e;if(dt.isFunction(e))return this.each(function(t){dt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ft)||[];s>r;r++)if(n=this[r],o=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):" ")){for(a=0;i=t[a++];)0>o.indexOf(" "+i+" ")&&(o+=i+" ");n.className=dt.trim(o)}return this},removeClass:function(e){var t,n,o,i,a,r=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(dt.isFunction(e))return this.each(function(t){dt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ft)||[];s>r;r++)if(n=this[r],o=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):"")){for(a=0;i=t[a++];)for(;o.indexOf(" "+i+" ")>=0;)o=o.replace(" "+i+" "," ");n.className=e?dt.trim(o):""}return this},toggleClass:function(e,t){var n=typeof e,o="boolean"==typeof t;return dt.isFunction(e)?this.each(function(n){dt(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var i,a=0,r=dt(this),s=t,l=e.match(ft)||[];i=l[a++];)s=o?s:!r.hasClass(i),r[s?"addClass":"removeClass"](i);else(n===G||"boolean"===n)&&(this.className&&dt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":dt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,o=this.length;o>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(At," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,o,i,a=this[0];{if(arguments.length)return i=dt.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=i?e.call(this,n,dt(this).val()):e,null==a?a="":"number"==typeof a?a+="":dt.isArray(a)&&(a=dt.map(a,function(e){return null==e?"":e+""})),o=dt.valHooks[this.type]||dt.valHooks[this.nodeName.toLowerCase()],o&&"set"in o&&o.set(this,a,"value")!==t||(this.value=a))});if(a)return o=dt.valHooks[a.type]||dt.valHooks[a.nodeName.toLowerCase()],o&&"get"in o&&(n=o.get(a,"value"))!==t?n:(n=a.value,"string"==typeof n?n.replace(Ot,""):null==n?"":n)}}}),dt.extend({valHooks:{option:{get:function(e){var t=dt.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,o=e.options,i=e.selectedIndex,a="select-one"===e.type||0>i,r=a?null:[],s=a?i+1:o.length,l=0>i?s:a?i:0;s>l;l++)if(n=o[l],!(!n.selected&&l!==i||(dt.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&dt.nodeName(n.parentNode,"optgroup"))){if(t=dt(n).val(),a)return t;r.push(t)}return r},set:function(e,t){for(var n,o,i=e.options,a=dt.makeArray(t),r=i.length;r--;)o=i[r],(o.selected=dt.inArray(dt(o).val(),a)>=0)&&(n=!0);return n||(e.selectedIndex=-1),a}}},attr:function(e,n,o){var i,a,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===G?dt.prop(e,n,o):(1===r&&dt.isXMLDoc(e)||(n=n.toLowerCase(),i=dt.attrHooks[n]||(dt.expr.match.bool.test(n)?It:Nt)),o===t?i&&"get"in i&&null!==(a=i.get(e,n))?a:(a=dt.find.attr(e,n),null==a?t:a):null!==o?i&&"set"in i&&(a=i.set(e,o,n))!==t?a:(e.setAttribute(n,o+""),o):(dt.removeAttr(e,n),t))},removeAttr:function(e,t){var n,o,i=0,a=t&&t.match(ft);if(a&&1===e.nodeType)for(;n=a[i++];)o=dt.propFix[n]||n,dt.expr.match.bool.test(n)?Ht&&jt||!Lt.test(n)?e[o]=!1:e[dt.camelCase("default-"+n)]=e[o]=!1:dt.attr(e,n,""),e.removeAttribute(jt?n:o)},attrHooks:{type:{set:function(e,t){if(!dt.support.radioValue&&"radio"===t&&dt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,o){var i,a,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return r=1!==s||!dt.isXMLDoc(e),r&&(n=dt.propFix[n]||n,a=dt.propHooks[n]),o!==t?a&&"set"in a&&(i=a.set(e,o,n))!==t?i:e[n]=o:a&&"get"in a&&null!==(i=a.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=dt.find.attr(e,"tabindex");return t?parseInt(t,10):Rt.test(e.nodeName)||Dt.test(e.nodeName)&&e.href?0:-1}}}}),It={set:function(e,t,n){return t===!1?dt.removeAttr(e,n):Ht&&jt||!Lt.test(n)?e.setAttribute(!jt&&dt.propFix[n]||n,n):e[dt.camelCase("default-"+n)]=e[n]=!0,n}},dt.each(dt.expr.match.bool.source.match(/\w+/g),function(e,n){var o=dt.expr.attrHandle[n]||dt.find.attr;dt.expr.attrHandle[n]=Ht&&jt||!Lt.test(n)?function(e,n,i){var a=dt.expr.attrHandle[n],r=i?t:(dt.expr.attrHandle[n]=t)!=o(e,n,i)?n.toLowerCase():null;return dt.expr.attrHandle[n]=a,r}:function(e,n,o){return o?t:e[dt.camelCase("default-"+n)]?n.toLowerCase():null}}),Ht&&jt||(dt.attrHooks.value={set:function(e,n,o){return dt.nodeName(e,"input")?(e.defaultValue=n,t):Nt&&Nt.set(e,n,o)}}),jt||(Nt={set:function(e,n,o){var i=e.getAttributeNode(o);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(o)),i.value=n+="","value"===o||n===e.getAttribute(o)?n:t}},dt.expr.attrHandle.id=dt.expr.attrHandle.name=dt.expr.attrHandle.coords=function(e,n,o){var i;return o?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},dt.valHooks.button={get:function(e,n){var o=e.getAttributeNode(n);return o&&o.specified?o.value:t},set:Nt.set},dt.attrHooks.contenteditable={set:function(e,t,n){Nt.set(e,""===t?!1:t,n)}},dt.each(["width","height"],function(e,n){dt.attrHooks[n]={set:function(e,o){return""===o?(e.setAttribute(n,"auto"),o):t}}})),dt.support.hrefNormalized||dt.each(["href","src"],function(e,t){dt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),dt.support.style||(dt.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),dt.support.optSelected||(dt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){dt.propFix[this.toLowerCase()]=this}),dt.support.enctype||(dt.propFix.enctype="encoding"),dt.each(["radio","checkbox"],function(){dt.valHooks[this]={set:function(e,n){return dt.isArray(n)?e.checked=dt.inArray(dt(e).val(),n)>=0:t}},dt.support.checkOn||(dt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Mt=/^(?:input|select|textarea)$/i,Pt=/^key/,zt=/^(?:mouse|contextmenu)|click/,Ft=/^(?:focusinfocus|focusoutblur)$/,qt=/^([^.]*)(?:\.(.+)|)$/;dt.event={global:{},add:function(e,n,o,i,a){var r,s,l,c,d,u,f,p,h,g,m,v=dt._data(e);if(v){for(o.handler&&(c=o,o=c.handler,a=c.selector),o.guid||(o.guid=dt.guid++),(s=v.events)||(s=v.events={}),(u=v.handle)||(u=v.handle=function(e){return typeof dt===G||e&&dt.event.triggered===e.type?t:dt.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=(n||"").match(ft)||[""],l=n.length;l--;)r=qt.exec(n[l])||[],h=m=r[1],g=(r[2]||"").split(".").sort(),h&&(d=dt.event.special[h]||{},h=(a?d.delegateType:d.bindType)||h,d=dt.event.special[h]||{},f=dt.extend({type:h,origType:m,data:i,handler:o,guid:o.guid,selector:a,needsContext:a&&dt.expr.match.needsContext.test(a),namespace:g.join(".")},c),(p=s[h])||(p=s[h]=[],p.delegateCount=0,d.setup&&d.setup.call(e,i,g,u)!==!1||(e.addEventListener?e.addEventListener(h,u,!1):e.attachEvent&&e.attachEvent("on"+h,u))),d.add&&(d.add.call(e,f),f.handler.guid||(f.handler.guid=o.guid)),a?p.splice(p.delegateCount++,0,f):p.push(f),dt.event.global[h]=!0);e=null}},remove:function(e,t,n,o,i){var a,r,s,l,c,d,u,f,p,h,g,m=dt.hasData(e)&&dt._data(e);if(m&&(d=m.events)){for(t=(t||"").match(ft)||[""],c=t.length;c--;)if(s=qt.exec(t[c])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p){for(u=dt.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,f=d[p]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=f.length;a--;)r=f[a],!i&&g!==r.origType||n&&n.guid!==r.guid||s&&!s.test(r.namespace)||o&&o!==r.selector&&("**"!==o||!r.selector)||(f.splice(a,1),r.selector&&f.delegateCount--,u.remove&&u.remove.call(e,r));l&&!f.length&&(u.teardown&&u.teardown.call(e,h,m.handle)!==!1||dt.removeEvent(e,p,m.handle),delete d[p])}else for(p in d)dt.event.remove(e,p+t[c],n,o,!0);dt.isEmptyObject(d)&&(delete m.handle,dt._removeData(e,"events"))}},trigger:function(n,o,i,a){var r,s,l,c,d,u,f,p=[i||Y],h=lt.call(n,"type")?n.type:n,g=lt.call(n,"namespace")?n.namespace.split("."):[];if(l=u=i=i||Y,3!==i.nodeType&&8!==i.nodeType&&!Ft.test(h+dt.event.triggered)&&(h.indexOf(".")>=0&&(g=h.split("."),h=g.shift(),g.sort()),s=0>h.indexOf(":")&&"on"+h,n=n[dt.expando]?n:new dt.Event(h,"object"==typeof n&&n),n.isTrigger=a?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),o=null==o?[n]:dt.makeArray(o,[n]),d=dt.event.special[h]||{},a||!d.trigger||d.trigger.apply(i,o)!==!1)){if(!a&&!d.noBubble&&!dt.isWindow(i)){for(c=d.delegateType||h,Ft.test(c+h)||(l=l.parentNode);l;l=l.parentNode)p.push(l),u=l;u===(i.ownerDocument||Y)&&p.push(u.defaultView||u.parentWindow||e)}for(f=0;(l=p[f++])&&!n.isPropagationStopped();)n.type=f>1?c:d.bindType||h,r=(dt._data(l,"events")||{})[n.type]&&dt._data(l,"handle"),r&&r.apply(l,o),r=s&&l[s],r&&dt.acceptData(l)&&r.apply&&r.apply(l,o)===!1&&n.preventDefault();if(n.type=h,!a&&!n.isDefaultPrevented()&&(!d._default||d._default.apply(p.pop(),o)===!1)&&dt.acceptData(i)&&s&&i[h]&&!dt.isWindow(i)){u=i[s],u&&(i[s]=null),dt.event.triggered=h;try{i[h]()}catch(m){}dt.event.triggered=t,u&&(i[s]=u)}return n.result}},dispatch:function(e){e=dt.event.fix(e);var n,o,i,a,r,s=[],l=at.call(arguments),c=(dt._data(this,"events")||{})[e.type]||[],d=dt.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(s=dt.event.handlers.call(this,e,c),n=0;(a=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,r=0;(i=a.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,o=((dt.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,l),o!==t&&(e.result=o)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,n){var o,i,a,r,s=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(a=[],r=0;l>r;r++)i=n[r],o=i.selector+" ",a[o]===t&&(a[o]=i.needsContext?dt(o,this).index(c)>=0:dt.find(o,this,null,[c]).length),a[o]&&a.push(i);a.length&&s.push({elem:c,handlers:a})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[dt.expando])return e;var t,n,o,i=e.type,a=e,r=this.fixHooks[i];for(r||(this.fixHooks[i]=r=zt.test(i)?this.mouseHooks:Pt.test(i)?this.keyHooks:{}),o=r.props?this.props.concat(r.props):this.props,e=new dt.Event(a),t=o.length;t--;)n=o[t],e[n]=a[n];return e.target||(e.target=a.srcElement||Y),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var o,i,a,r=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||Y,a=i.documentElement,o=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==d()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return dt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return dt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,o){var i=dt.extend(new dt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});o?dt.event.trigger(i,null,t):dt.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},dt.removeEvent=Y.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var o="on"+t;e.detachEvent&&(typeof e[o]===G&&(e[o]=null),e.detachEvent(o,n))},dt.Event=function(e,n){return this instanceof dt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?l:c):this.type=e,n&&dt.extend(this,n),this.timeStamp=e&&e.timeStamp||dt.now(),this[dt.expando]=!0,t):new dt.Event(e,n)},dt.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},dt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){dt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,o=this,i=e.relatedTarget,a=e.handleObj;return(!i||i!==o&&!dt.contains(o,i))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),dt.support.submitBubbles||(dt.event.special.submit={setup:function(){return dt.nodeName(this,"form")?!1:(dt.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,o=dt.nodeName(n,"input")||dt.nodeName(n,"button")?n.form:t;o&&!dt._data(o,"submitBubbles")&&(dt.event.add(o,"submit._submit",function(e){e._submit_bubble=!0}),dt._data(o,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&dt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return dt.nodeName(this,"form")?!1:(dt.event.remove(this,"._submit"),t)}}),dt.support.changeBubbles||(dt.event.special.change={setup:function(){return Mt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(dt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),dt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),dt.event.simulate("change",this,e,!0)
})),!1):(dt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Mt.test(t.nodeName)&&!dt._data(t,"changeBubbles")&&(dt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||dt.event.simulate("change",this.parentNode,e,!0)}),dt._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return dt.event.remove(this,"._change"),!Mt.test(this.nodeName)}}),dt.support.focusinBubbles||dt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,o=function(e){dt.event.simulate(t,e.target,dt.event.fix(e),!0)};dt.event.special[t]={setup:function(){0===n++&&Y.addEventListener(e,o,!0)},teardown:function(){0===--n&&Y.removeEventListener(e,o,!0)}}}),dt.fn.extend({on:function(e,n,o,i,a){var r,s;if("object"==typeof e){"string"!=typeof n&&(o=o||n,n=t);for(r in e)this.on(r,n,o,e[r],a);return this}if(null==o&&null==i?(i=n,o=n=t):null==i&&("string"==typeof n?(i=o,o=t):(i=o,o=n,n=t)),i===!1)i=c;else if(!i)return this;return 1===a&&(s=i,i=function(e){return dt().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=dt.guid++)),this.each(function(){dt.event.add(this,e,i,o,n)})},one:function(e,t,n,o){return this.on(e,t,n,o,1)},off:function(e,n,o){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,dt(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,n,e[a]);return this}return(n===!1||"function"==typeof n)&&(o=n,n=t),o===!1&&(o=c),this.each(function(){dt.event.remove(this,e,o,n)})},trigger:function(e,t){return this.each(function(){dt.event.trigger(e,t,this)})},triggerHandler:function(e,n){var o=this[0];return o?dt.event.trigger(e,n,o,!0):t}});var Ut=/^.[^:#\[\.,]*$/,Wt=/^(?:parents|prev(?:Until|All))/,$t=dt.expr.match.needsContext,Bt={children:!0,contents:!0,next:!0,prev:!0};dt.fn.extend({find:function(e){var t,n=[],o=this,i=o.length;if("string"!=typeof e)return this.pushStack(dt(e).filter(function(){for(t=0;i>t;t++)if(dt.contains(o[t],this))return!0}));for(t=0;i>t;t++)dt.find(e,o[t],n);return n=this.pushStack(i>1?dt.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=dt(e,this),o=n.length;return this.filter(function(){for(t=0;o>t;t++)if(dt.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e||[],!0))},filter:function(e){return this.pushStack(f(this,e||[],!1))},is:function(e){return!!f(this,"string"==typeof e&&$t.test(e)?dt(e):e||[],!1).length},closest:function(e,t){for(var n,o=0,i=this.length,a=[],r=$t.test(e)||"string"!=typeof e?dt(e,t||this.context):0;i>o;o++)for(n=this[o];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(r?r.index(n)>-1:1===n.nodeType&&dt.find.matchesSelector(n,e))){n=a.push(n);break}return this.pushStack(a.length>1?dt.unique(a):a)},index:function(e){return e?"string"==typeof e?dt.inArray(this[0],dt(e)):dt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?dt(e,t):dt.makeArray(e&&e.nodeType?[e]:e),o=dt.merge(this.get(),n);return this.pushStack(dt.unique(o))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),dt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return dt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return dt.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return dt.dir(e,"nextSibling")},prevAll:function(e){return dt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return dt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return dt.dir(e,"previousSibling",n)},siblings:function(e){return dt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return dt.sibling(e.firstChild)},contents:function(e){return dt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:dt.merge([],e.childNodes)}},function(e,t){dt.fn[e]=function(n,o){var i=dt.map(this,t,n);return"Until"!==e.slice(-5)&&(o=n),o&&"string"==typeof o&&(i=dt.filter(o,i)),this.length>1&&(Bt[e]||(i=dt.unique(i)),Wt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),dt.extend({filter:function(e,t,n){var o=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?dt.find.matchesSelector(o,e)?[o]:[]:dt.find.matches(e,dt.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,o){for(var i=[],a=e[n];a&&9!==a.nodeType&&(o===t||1!==a.nodeType||!dt(a).is(o));)1===a.nodeType&&i.push(a),a=a[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Xt=/ jQuery\d+="(?:null|\d+)"/g,Gt=RegExp("<(?:"+Vt+")[\\s/>]","i"),Jt=/^\s+/,Yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qt=/<([\w:]+)/,Kt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,on=/^$|\/(?:java|ecma)script/i,an=/^true\/(.*)/,rn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:dt.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=p(Y),cn=ln.appendChild(Y.createElement("div"));sn.optgroup=sn.option,sn.tbody=sn.tfoot=sn.colgroup=sn.caption=sn.thead,sn.th=sn.td,dt.fn.extend({text:function(e){return dt.access(this,function(e){return e===t?dt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,o=e?dt.filter(e,this):this,i=0;null!=(n=o[i]);i++)t||1!==n.nodeType||dt.cleanData(k(n)),n.parentNode&&(t&&dt.contains(n.ownerDocument,n)&&v(k(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&dt.cleanData(k(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&dt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return dt.clone(this,e,t)})},html:function(e){return dt.access(this,function(e){var n=this[0]||{},o=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Xt,""):t;if(!("string"!=typeof e||en.test(e)||!dt.support.htmlSerialize&&Gt.test(e)||!dt.support.leadingWhitespace&&Jt.test(e)||sn[(Qt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Yt,"<$1></$2>");try{for(;i>o;o++)n=this[o]||{},1===n.nodeType&&(dt.cleanData(k(n,!1)),n.innerHTML=e);n=0}catch(a){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=dt.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var o=e[t++],i=e[t++];i&&(o&&o.parentNode!==i&&(o=this.nextSibling),dt(this).remove(),i.insertBefore(n,o))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=ot.apply([],e);var o,i,a,r,s,l,c=0,d=this.length,u=this,f=d-1,p=e[0],h=dt.isFunction(p);if(h||!(1>=d||"string"!=typeof p||dt.support.checkClone)&&nn.test(p))return this.each(function(o){var i=u.eq(o);h&&(e[0]=p.call(this,o,i.html())),i.domManip(e,t,n)});if(d&&(l=dt.buildFragment(e,this[0].ownerDocument,!1,!n&&this),o=l.firstChild,1===l.childNodes.length&&(l=o),o)){for(r=dt.map(k(l,"script"),g),a=r.length;d>c;c++)i=l,c!==f&&(i=dt.clone(i,!0,!0),a&&dt.merge(r,k(i,"script"))),t.call(this[c],i,c);if(a)for(s=r[r.length-1].ownerDocument,dt.map(r,m),c=0;a>c;c++)i=r[c],on.test(i.type||"")&&!dt._data(i,"globalEval")&&dt.contains(s,i)&&(i.src?dt._evalUrl(i.src):dt.globalEval((i.text||i.textContent||i.innerHTML||"").replace(rn,"")));l=o=null}return this}}),dt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){dt.fn[e]=function(e){for(var n,o=0,i=[],a=dt(e),r=a.length-1;r>=o;o++)n=o===r?this:this.clone(!0),dt(a[o])[t](n),it.apply(i,n.get());return this.pushStack(i)}}),dt.extend({clone:function(e,t,n){var o,i,a,r,s,l=dt.contains(e.ownerDocument,e);if(dt.support.html5Clone||dt.isXMLDoc(e)||!Gt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(cn.innerHTML=e.outerHTML,cn.removeChild(a=cn.firstChild)),!(dt.support.noCloneEvent&&dt.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||dt.isXMLDoc(e)))for(o=k(a),s=k(e),r=0;null!=(i=s[r]);++r)o[r]&&b(i,o[r]);if(t)if(n)for(s=s||k(e),o=o||k(a),r=0;null!=(i=s[r]);r++)y(i,o[r]);else y(e,a);return o=k(a,"script"),o.length>0&&v(o,!l&&k(e,"script")),o=s=i=null,a},buildFragment:function(e,t,n,o){for(var i,a,r,s,l,c,d,u=e.length,f=p(t),h=[],g=0;u>g;g++)if(a=e[g],a||0===a)if("object"===dt.type(a))dt.merge(h,a.nodeType?[a]:a);else if(Zt.test(a)){for(s=s||f.appendChild(t.createElement("div")),l=(Qt.exec(a)||["",""])[1].toLowerCase(),d=sn[l]||sn._default,s.innerHTML=d[1]+a.replace(Yt,"<$1></$2>")+d[2],i=d[0];i--;)s=s.lastChild;if(!dt.support.leadingWhitespace&&Jt.test(a)&&h.push(t.createTextNode(Jt.exec(a)[0])),!dt.support.tbody)for(a="table"!==l||Kt.test(a)?"<table>"!==d[1]||Kt.test(a)?0:s:s.firstChild,i=a&&a.childNodes.length;i--;)dt.nodeName(c=a.childNodes[i],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(dt.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(t.createTextNode(a));for(s&&f.removeChild(s),dt.support.appendChecked||dt.grep(k(h,"input"),w),g=0;a=h[g++];)if((!o||-1===dt.inArray(a,o))&&(r=dt.contains(a.ownerDocument,a),s=k(f.appendChild(a),"script"),r&&v(s),n))for(i=0;a=s[i++];)on.test(a.type||"")&&n.push(a);return s=null,f},cleanData:function(e,t){for(var n,o,i,a,r=0,s=dt.expando,l=dt.cache,c=dt.support.deleteExpando,d=dt.event.special;null!=(n=e[r]);r++)if((t||dt.acceptData(n))&&(i=n[s],a=i&&l[i])){if(a.events)for(o in a.events)d[o]?dt.event.remove(n,o):dt.removeEvent(n,o,a.handle);l[i]&&(delete l[i],c?delete n[s]:typeof n.removeAttribute!==G?n.removeAttribute(s):n[s]=null,tt.push(i))}},_evalUrl:function(e){return dt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),dt.fn.extend({wrapAll:function(e){if(dt.isFunction(e))return this.each(function(t){dt(this).wrapAll(e.call(this,t))});if(this[0]){var t=dt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return dt.isFunction(e)?this.each(function(t){dt(this).wrapInner(e.call(this,t))}):this.each(function(){var t=dt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=dt.isFunction(e);return this.each(function(n){dt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){dt.nodeName(this,"body")||dt(this).replaceWith(this.childNodes)}).end()}});var dn,un,fn,pn=/alpha\([^)]*\)/i,hn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=RegExp("^("+ut+")(.*)$","i"),bn=RegExp("^("+ut+")(?!px)[a-z%]+$","i"),kn=RegExp("^([+-])=("+ut+")","i"),wn={BODY:"block"},xn={position:"absolute",visibility:"hidden",display:"block"},_n={letterSpacing:0,fontWeight:400},Tn=["Top","Right","Bottom","Left"],Cn=["Webkit","O","Moz","ms"];dt.fn.extend({css:function(e,n){return dt.access(this,function(e,n,o){var i,a,r={},s=0;if(dt.isArray(n)){for(a=un(e),i=n.length;i>s;s++)r[n[s]]=dt.css(e,n[s],!1,a);return r}return o!==t?dt.style(e,n,o):dt.css(e,n)},e,n,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:_(this))?dt(this).show():dt(this).hide()})}}),dt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=fn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":dt.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,o,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,r,s,l=dt.camelCase(n),c=e.style;if(n=dt.cssProps[l]||(dt.cssProps[l]=x(c,l)),s=dt.cssHooks[n]||dt.cssHooks[l],o===t)return s&&"get"in s&&(a=s.get(e,!1,i))!==t?a:c[n];if(r=typeof o,"string"===r&&(a=kn.exec(o))&&(o=(a[1]+1)*a[2]+parseFloat(dt.css(e,n)),r="number"),!(null==o||"number"===r&&isNaN(o)||("number"!==r||dt.cssNumber[l]||(o+="px"),dt.support.clearCloneStyle||""!==o||0!==n.indexOf("background")||(c[n]="inherit"),s&&"set"in s&&(o=s.set(e,o,i))===t)))try{c[n]=o}catch(d){}}},css:function(e,n,o,i){var a,r,s,l=dt.camelCase(n);return n=dt.cssProps[l]||(dt.cssProps[l]=x(e.style,l)),s=dt.cssHooks[n]||dt.cssHooks[l],s&&"get"in s&&(r=s.get(e,!0,o)),r===t&&(r=fn(e,n,i)),"normal"===r&&n in _n&&(r=_n[n]),""===o||o?(a=parseFloat(r),o===!0||dt.isNumeric(a)?a||0:r):r}}),e.getComputedStyle?(un=function(t){return e.getComputedStyle(t,null)},fn=function(e,n,o){var i,a,r,s=o||un(e),l=s?s.getPropertyValue(n)||s[n]:t,c=e.style;return s&&(""!==l||dt.contains(e.ownerDocument,e)||(l=dt.style(e,n)),bn.test(l)&&vn.test(n)&&(i=c.width,a=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=s.width,c.width=i,c.minWidth=a,c.maxWidth=r)),l}):Y.documentElement.currentStyle&&(un=function(e){return e.currentStyle},fn=function(e,n,o){var i,a,r,s=o||un(e),l=s?s[n]:t,c=e.style;return null==l&&c&&c[n]&&(l=c[n]),bn.test(l)&&!gn.test(n)&&(i=c.left,a=e.runtimeStyle,r=a&&a.left,r&&(a.left=e.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=i,r&&(a.left=r)),""===l?"auto":l}),dt.each(["height","width"],function(e,n){dt.cssHooks[n]={get:function(e,o,i){return o?0===e.offsetWidth&&mn.test(dt.css(e,"display"))?dt.swap(e,xn,function(){return E(e,n,i)}):E(e,n,i):t},set:function(e,t,o){var i=o&&un(e);return C(e,t,o?S(e,n,o,dt.support.boxSizing&&"border-box"===dt.css(e,"boxSizing",!1,i),i):0)}}}),dt.support.opacity||(dt.cssHooks.opacity={get:function(e,t){return hn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,o=e.currentStyle,i=dt.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=o&&o.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===dt.trim(a.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||o&&!o.filter)||(n.filter=pn.test(a)?a.replace(pn,i):a+" "+i)}}),dt(function(){dt.support.reliableMarginRight||(dt.cssHooks.marginRight={get:function(e,n){return n?dt.swap(e,{display:"inline-block"},fn,[e,"marginRight"]):t}}),!dt.support.pixelPosition&&dt.fn.position&&dt.each(["top","left"],function(e,n){dt.cssHooks[n]={get:function(e,o){return o?(o=fn(e,n),bn.test(o)?dt(e).position()[n]+"px":o):t}}})}),dt.expr&&dt.expr.filters&&(dt.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!dt.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||dt.css(e,"display"))},dt.expr.filters.visible=function(e){return!dt.expr.filters.hidden(e)}),dt.each({margin:"",padding:"",border:"Width"},function(e,t){dt.cssHooks[e+t]={expand:function(n){for(var o=0,i={},a="string"==typeof n?n.split(" "):[n];4>o;o++)i[e+Tn[o]+t]=a[o]||a[o-2]||a[0];return i}},vn.test(e)||(dt.cssHooks[e+t].set=C)});var Sn=/%20/g,En=/\[\]$/,Nn=/\r?\n/g,In=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;dt.fn.extend({serialize:function(){return dt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=dt.prop(this,"elements");return e?dt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!dt(this).is(":disabled")&&An.test(this.nodeName)&&!In.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=dt(this).val();return null==n?null:dt.isArray(n)?dt.map(n,function(e){return{name:t.name,value:e.replace(Nn,"\r\n")}}):{name:t.name,value:n.replace(Nn,"\r\n")}}).get()}}),dt.param=function(e,n){var o,i=[],a=function(e,t){t=dt.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=dt.ajaxSettings&&dt.ajaxSettings.traditional),dt.isArray(e)||e.jquery&&!dt.isPlainObject(e))dt.each(e,function(){a(this.name,this.value)});else for(o in e)A(o,e[o],n,a);return i.join("&").replace(Sn,"+")},dt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){dt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),dt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var On,Rn,Dn=dt.now(),Ln=/\?/,jn=/#.*$/,Hn=/([?&])_=[^&]*/,Mn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Pn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zn=/^(?:GET|HEAD)$/,Fn=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Un=dt.fn.load,Wn={},$n={},Bn="*/".concat("*");try{Rn=J.href}catch(Vn){Rn=Y.createElement("a"),Rn.href="",Rn=Rn.href}On=qn.exec(Rn.toLowerCase())||[],dt.fn.load=function(e,n,o){if("string"!=typeof e&&Un)return Un.apply(this,arguments);var i,a,r,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),dt.isFunction(n)?(o=n,n=t):n&&"object"==typeof n&&(r="POST"),s.length>0&&dt.ajax({url:e,type:r,dataType:"html",data:n}).done(function(e){a=arguments,s.html(i?dt("<div>").append(dt.parseHTML(e)).find(i):e)}).complete(o&&function(e,t){s.each(o,a||[e.responseText,t,e])}),this},dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){dt.fn[t]=function(e){return this.on(t,e)}}),dt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rn,type:"GET",isLocal:Pn.test(On[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":dt.parseJSON,"text xml":dt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?D(D(e,dt.ajaxSettings),t):D(dt.ajaxSettings,e)},ajaxPrefilter:O(Wn),ajaxTransport:O($n),ajax:function(e,n){function o(e,n,o,i){var a,u,y,b,w,_=n;2!==k&&(k=2,l&&clearTimeout(l),d=t,s=i||"",x.readyState=e>0?4:0,a=e>=200&&300>e||304===e,o&&(b=L(f,x,o)),b=j(f,b,x,a),a?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(dt.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(dt.etag[r]=w)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=b.state,u=b.data,y=b.error,a=!y)):(y=_,(e||!_)&&(_="error",0>e&&(e=0))),x.status=e,x.statusText=(n||_)+"",a?g.resolveWith(p,[u,_,x]):g.rejectWith(p,[x,_,y]),x.statusCode(v),v=t,c&&h.trigger(a?"ajaxSuccess":"ajaxError",[x,f,a?u:y]),m.fireWith(p,[x,_]),c&&(h.trigger("ajaxComplete",[x,f]),--dt.active||dt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,a,r,s,l,c,d,u,f=dt.ajaxSetup({},n),p=f.context||f,h=f.context&&(p.nodeType||p.jquery)?dt(p):dt.event,g=dt.Deferred(),m=dt.Callbacks("once memory"),v=f.statusCode||{},y={},b={},k=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===k){if(!u)for(u={};t=Mn.exec(s);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===k?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return k||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return k||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>k)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return d&&d.abort(t),o(0,t),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,f.url=((e||f.url||Rn)+"").replace(jn,"").replace(Fn,On[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=dt.trim(f.dataType||"*").toLowerCase().match(ft)||[""],null==f.crossDomain&&(i=qn.exec(f.url.toLowerCase()),f.crossDomain=!(!i||i[1]===On[1]&&i[2]===On[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(On[3]||("http:"===On[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=dt.param(f.data,f.traditional)),R(Wn,f,n,x),2===k)return x;c=f.global,c&&0===dt.active++&&dt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!zn.test(f.type),r=f.url,f.hasContent||(f.data&&(r=f.url+=(Ln.test(r)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=Hn.test(r)?r.replace(Hn,"$1_="+Dn++):r+(Ln.test(r)?"&":"?")+"_="+Dn++)),f.ifModified&&(dt.lastModified[r]&&x.setRequestHeader("If-Modified-Since",dt.lastModified[r]),dt.etag[r]&&x.setRequestHeader("If-None-Match",dt.etag[r])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Bn+"; q=0.01":""):f.accepts["*"]);for(a in f.headers)x.setRequestHeader(a,f.headers[a]);if(f.beforeSend&&(f.beforeSend.call(p,x,f)===!1||2===k))return x.abort();w="abort";for(a in{success:1,error:1,complete:1})x[a](f[a]);if(d=R($n,f,n,x)){x.readyState=1,c&&h.trigger("ajaxSend",[x,f]),f.async&&f.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},f.timeout));try{k=1,d.send(y,o)}catch(_){if(!(2>k))throw _;o(-1,_)}}else o(-1,"No Transport");return x},getJSON:function(e,t,n){return dt.get(e,t,n,"json")},getScript:function(e,n){return dt.get(e,t,n,"script")}}),dt.each(["get","post"],function(e,n){dt[n]=function(e,o,i,a){return dt.isFunction(o)&&(a=a||i,i=o,o=t),dt.ajax({url:e,type:n,dataType:a,data:o,success:i})}}),dt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return dt.globalEval(e),e}}}),dt.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),dt.ajaxTransport("script",function(e){if(e.crossDomain){var n,o=Y.head||dt("head")[0]||Y.documentElement;return{send:function(t,i){n=Y.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},o.insertBefore(n,o.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Xn=[],Gn=/(=)\?(?=&|$)|\?\?/;dt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xn.pop()||dt.expando+"_"+Dn++;return this[e]=!0,e}}),dt.ajaxPrefilter("json jsonp",function(n,o,i){var a,r,s,l=n.jsonp!==!1&&(Gn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(a=n.jsonpCallback=dt.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Gn,"$1"+a):n.jsonp!==!1&&(n.url+=(Ln.test(n.url)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return s||dt.error(a+" was not called"),s[0]},n.dataTypes[0]="json",r=e[a],e[a]=function(){s=arguments},i.always(function(){e[a]=r,n[a]&&(n.jsonpCallback=o.jsonpCallback,Xn.push(a)),s&&dt.isFunction(r)&&r(s[0]),s=r=t}),"script"):t});var Jn,Yn,Qn=0,Kn=e.ActiveXObject&&function(){var e;for(e in Jn)Jn[e](t,!0)};dt.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&H()||M()}:H,Yn=dt.ajaxSettings.xhr(),dt.support.cors=!!Yn&&"withCredentials"in Yn,Yn=dt.support.ajax=!!Yn,Yn&&dt.ajaxTransport(function(n){if(!n.crossDomain||dt.support.cors){var o;return{send:function(i,a){var r,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(c){}l.send(n.hasContent&&n.data||null),o=function(e,i){var s,c,d,u;try{if(o&&(i||4===l.readyState))if(o=t,r&&(l.onreadystatechange=dt.noop,Kn&&delete Jn[r]),i)4!==l.readyState&&l.abort();else{u={},s=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{d=l.statusText}catch(f){d=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=u.text?200:404}}catch(p){i||a(-1,p)}u&&a(s,d,u,c)},n.async?4===l.readyState?setTimeout(o):(r=++Qn,Kn&&(Jn||(Jn={},dt(e).unload(Kn)),Jn[r]=o),l.onreadystatechange=o):o()},abort:function(){o&&o(t,!0)}}}});var Zn,eo,to=/^(?:toggle|show|hide)$/,no=RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),oo=/queueHooks$/,io=[U],ao={"*":[function(e,t){var n=this.createTween(e,t),o=n.cur(),i=no.exec(t),a=i&&i[3]||(dt.cssNumber[e]?"":"px"),r=(dt.cssNumber[e]||"px"!==a&&+o)&&no.exec(dt.css(n.elem,e)),s=1,l=20;if(r&&r[3]!==a){a=a||r[3],i=i||[],r=+o||1;do s=s||".5",r/=s,dt.style(n.elem,e,r+a);while(s!==(s=n.cur()/o)&&1!==s&&--l)}return i&&(n.unit=a,n.start=+r||+o||0,n.end=i[1]?r+(i[1]+1)*i[2]:+i[2]),n}]};dt.Animation=dt.extend(F,{tweener:function(e,t){dt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,o=0,i=e.length;i>o;o++)n=e[o],ao[n]=ao[n]||[],ao[n].unshift(t)},prefilter:function(e,t){t?io.unshift(e):io.push(e)}}),dt.Tween=W,W.prototype={constructor:W,init:function(e,t,n,o,i,a){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=a||(dt.cssNumber[n]?"":"px")},cur:function(){var e=W.propHooks[this.prop];return e&&e.get?e.get(this):W.propHooks._default.get(this)},run:function(e){var t,n=W.propHooks[this.prop];return this.pos=t=this.options.duration?dt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=dt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){dt.fx.step[e.prop]?dt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[dt.cssProps[e.prop]]||dt.cssHooks[e.prop])?dt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},dt.each(["toggle","show","hide"],function(e,t){var n=dt.fn[t];dt.fn[t]=function(e,o,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate($(t,!0),e,o,i)}}),dt.fn.extend({fadeTo:function(e,t,n,o){return this.filter(_).css("opacity",0).show().end().animate({opacity:t},e,n,o)},animate:function(e,t,n,o){var i=dt.isEmptyObject(e),a=dt.speed(t,n,o),r=function(){var t=F(this,dt.extend({},e),a);r.finish=function(){t.stop(!0)},(i||dt._data(this,"finish"))&&t.stop(!0)};return r.finish=r,i||a.queue===!1?this.each(r):this.queue(a.queue,r)},stop:function(e,n,o){var i=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof e&&(o=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",a=dt.timers,r=dt._data(this);if(n)r[n]&&r[n].stop&&i(r[n]);else for(n in r)r[n]&&r[n].stop&&oo.test(n)&&i(r[n]);for(n=a.length;n--;)a[n].elem!==this||null!=e&&a[n].queue!==e||(a[n].anim.stop(o),t=!1,a.splice(n,1));(t||!o)&&dt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=dt._data(this),o=n[e+"queue"],i=n[e+"queueHooks"],a=dt.timers,r=o?o.length:0;for(n.finish=!0,dt.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;r>t;t++)o[t]&&o[t].finish&&o[t].finish.call(this);delete n.finish})}}),dt.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){dt.fn[e]=function(e,n,o){return this.animate(t,e,n,o)}}),dt.speed=function(e,t,n){var o=e&&"object"==typeof e?dt.extend({},e):{complete:n||!n&&t||dt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!dt.isFunction(t)&&t};return o.duration=dt.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in dt.fx.speeds?dt.fx.speeds[o.duration]:dt.fx.speeds._default,(null==o.queue||o.queue===!0)&&(o.queue="fx"),o.old=o.complete,o.complete=function(){dt.isFunction(o.old)&&o.old.call(this),o.queue&&dt.dequeue(this,o.queue)},o},dt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},dt.timers=[],dt.fx=W.prototype.init,dt.fx.tick=function(){var e,n=dt.timers,o=0;for(Zn=dt.now();n.length>o;o++)e=n[o],e()||n[o]!==e||n.splice(o--,1);n.length||dt.fx.stop(),Zn=t},dt.fx.timer=function(e){e()&&dt.timers.push(e)&&dt.fx.start()},dt.fx.interval=13,dt.fx.start=function(){eo||(eo=setInterval(dt.fx.tick,dt.fx.interval))},dt.fx.stop=function(){clearInterval(eo),eo=null},dt.fx.speeds={slow:600,fast:200,_default:400},dt.fx.step={},dt.expr&&dt.expr.filters&&(dt.expr.filters.animated=function(e){return dt.grep(dt.timers,function(t){return e===t.elem}).length}),dt.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){dt.offset.setOffset(this,e,t)});var n,o,i={top:0,left:0},a=this[0],r=a&&a.ownerDocument;if(r)return n=r.documentElement,dt.contains(n,a)?(typeof a.getBoundingClientRect!==G&&(i=a.getBoundingClientRect()),o=B(r),{top:i.top+(o.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(o.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},dt.offset={setOffset:function(e,t,n){var o=dt.css(e,"position");"static"===o&&(e.style.position="relative");var i,a,r=dt(e),s=r.offset(),l=dt.css(e,"top"),c=dt.css(e,"left"),d=("absolute"===o||"fixed"===o)&&dt.inArray("auto",[l,c])>-1,u={},f={};d?(f=r.position(),i=f.top,a=f.left):(i=parseFloat(l)||0,a=parseFloat(c)||0),dt.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(u.top=t.top-s.top+i),null!=t.left&&(u.left=t.left-s.left+a),"using"in t?t.using.call(e,u):r.css(u)}},dt.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},o=this[0];return"fixed"===dt.css(o,"position")?t=o.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),dt.nodeName(e[0],"html")||(n=e.offset()),n.top+=dt.css(e[0],"borderTopWidth",!0),n.left+=dt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-dt.css(o,"marginTop",!0),left:t.left-n.left-dt.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Q;e&&!dt.nodeName(e,"html")&&"static"===dt.css(e,"position");)e=e.offsetParent;
return e||Q})}}),dt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var o=/Y/.test(n);dt.fn[e]=function(i){return dt.access(this,function(e,i,a){var r=B(e);return a===t?r?n in r?r[n]:r.document.documentElement[i]:e[i]:(r?r.scrollTo(o?dt(r).scrollLeft():a,o?a:dt(r).scrollTop()):e[i]=a,t)},e,i,arguments.length,null)}}),dt.each({Height:"height",Width:"width"},function(e,n){dt.each({padding:"inner"+e,content:n,"":"outer"+e},function(o,i){dt.fn[i]=function(i,a){var r=arguments.length&&(o||"boolean"!=typeof i),s=o||(i===!0||a===!0?"margin":"border");return dt.access(this,function(n,o,i){var a;return dt.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+e],a["scroll"+e],n.body["offset"+e],a["offset"+e],a["client"+e])):i===t?dt.css(n,o,s):dt.style(n,o,i,s)},n,r?i:t,r,null)}})}),dt.fn.size=function(){return this.length},dt.fn.andSelf=dt.fn.addBack,e.jQuery=e.$=dt}(window),window.fk$=jQuery.noConflict(!0),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,o){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(o);for(var i=this.options.trigger.split(" "),a=i.length;a--;){var r=i[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,o){n[e]!=o&&(t[e]=o)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,o=this.tip();this.setContent(),this.options.animation&&o.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,r=a.test(i);r&&(i=i.replace(a,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var s=this.getPosition(),l=o[0].offsetWidth,c=o[0].offsetHeight;if(r){var d=this.$element.parent(),u=i,f=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:d.outerWidth(),h="body"==this.options.container?window.innerHeight:d.outerHeight(),g="body"==this.options.container?0:d.offset().left;i="bottom"==i&&s.top+s.height+c-f>h?"top":"top"==i&&0>s.top-f-c?"bottom":"right"==i&&s.right+l>p?"left":"left"==i&&g>s.left-l?"right":i,o.removeClass(u).addClass(i)}var m=this.getCalculatedOffset(i,s,l,c);this.applyPlacement(m,i),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?o.one(e.support.transition.end,v).emulateTransitionEnd(150):v()}},t.prototype.applyPlacement=function(t,n){var o,i=this.tip(),a=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),l=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(l)&&(l=0),t.top=t.top+s,t.left=t.left+l,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var c=i[0].offsetWidth,d=i[0].offsetHeight;if("top"==n&&d!=r&&(o=!0,t.top=t.top+r-d),/bottom|top/.test(n)){var u=0;0>t.left&&(u=-2*t.left,t.left=0,i.offset(t),c=i[0].offsetWidth,d=i[0].offsetHeight),this.replaceArrow(u-a+c,c,"left")}else this.replaceArrow(d-r,d,"top");o&&i.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&o.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,o=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(o.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?o.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,o){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-o,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-o/2,left:t.left-n}:{top:t.top+t.height/2-o/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var o=e(this),i=o.data("bs.tooltip"),a="object"==typeof n&&n;(i||"destroy"!=n)&&(i||o.data("bs.tooltip",i=new t(this,a)),"string"==typeof n&&i[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(fk$),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var o=e(this),i=o.data("bs.popover"),a="object"==typeof n&&n;(i||"destroy"!=n)&&(i||o.data("bs.popover",i=new t(this,a)),"string"==typeof n&&i[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(fk$),function(e){var t=[],n=e(document),o=navigator.userAgent.toLowerCase(),i=e(window),a=[],r={ieQuirks:null,msie:/msie/.test(o)&&!/opera/.test(o),opera:/opera/.test(o)};r.ie6=r.msie&&/msie 6./.test(o)&&"object"!=typeof window.XMLHttpRequest,r.ie7=r.msie&&/msie 7.0/.test(o),e.fkmodal=function(t,n){return e.fkmodal.impl.init(t,n)},e.fkmodal.close=function(){e.fkmodal.impl.close()},e.fkmodal.focus=function(t){e.fkmodal.impl.focus(t)},e.fkmodal.setContainerDimensions=function(){e.fkmodal.impl.setContainerDimensions()},e.fkmodal.setPosition=function(){e.fkmodal.impl.setPosition()},e.fkmodal.update=function(t,n){e.fkmodal.impl.update(t,n)},e.fn.fkmodal=function(t){return e.fkmodal.impl.init(this,t)},e.fkmodal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,fkmodal:!0,onOpen:null,onShow:null,onClose:null},e.fkmodal.impl={d:{},init:function(t,n){var o=this;if(o.d.data)return!1;if(r.ieQuirks=r.msie&&"BackCompat"===document.compatMode,o.o=e.extend({},e.fkmodal.defaults,n),o.zIndex=o.o.zIndex,o.occb=!1,"object"==typeof t)t=t instanceof e?t:e(t),o.d.placeholder=!1,t.parent().parent().size()>0&&(t.before(e("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),o.d.placeholder=!0,o.display=t.css("display"),o.o.persist||(o.d.orig=t.clone(!0)));else{if("string"!=typeof t&&"number"!=typeof t)return alert("SimpleModal Error: Unsupported data type: "+typeof t),o;t=e("<div></div>").html(t)}return o.create(t),t=null,o.open(),e.isFunction(o.o.onShow)&&o.o.onShow.apply(o,[o.d]),o},create:function(n){var o=this;o.getDimensions(),o.o.fkmodal&&r.ie6&&(o.d.iframe=e('<iframe src="javascript:false;"></iframe>').css(e.extend(o.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:a[0],width:a[1],zIndex:o.o.zIndex,top:0,left:0})).appendTo(o.o.appendTo)),o.d.overlay=e("<div></div>").attr("id",o.o.overlayId).addClass("simplemodal-overlay").css(e.extend(o.o.overlayCss,{display:"none",opacity:o.o.opacity/100,height:o.o.fkmodal?t[0]:0,width:o.o.fkmodal?t[1]:0,position:"fixed",left:0,top:0,zIndex:o.o.zIndex+1})).appendTo(o.o.appendTo),o.d.container=e("<div></div>").attr("id",o.o.containerId).addClass("simplemodal-container").css(e.extend({position:o.o.fixed?"fixed":"absolute"},o.o.containerCss,{display:"none",zIndex:o.o.zIndex+2})).append(o.o.close&&o.o.closeHTML?e(o.o.closeHTML).addClass(o.o.closeClass):"").appendTo(o.o.appendTo),o.d.wrap=e("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(o.d.container),o.d.data=n.attr("id",n.attr("id")||o.o.dataId).addClass("simplemodal-data").css(e.extend(o.o.dataCss,{display:"none"})).appendTo("body"),n=null,o.setContainerDimensions(),o.d.data.appendTo(o.d.wrap),(r.ie6||r.ieQuirks)&&o.fixIE()},bindEvents:function(){var o=this;e("."+o.o.closeClass).bind("click.simplemodal",function(e){e.preventDefault(),o.close(),e.stopPropagation()}),o.o.fkmodal&&o.o.close&&o.o.overlayClose&&o.d.overlay.bind("click.simplemodal",function(e){e.preventDefault(),o.close(),e.stopPropagation()}),n.bind("keydown.simplemodal",function(e){o.o.fkmodal&&9===e.keyCode?o.watchTab(e):o.o.close&&o.o.escClose&&27===e.keyCode&&(e.preventDefault(),o.close())}),i.bind("resize.simplemodal orientationchange.simplemodal",function(){o.getDimensions(),o.o.autoResize?o.setContainerDimensions():o.o.autoPosition&&o.setPosition(),r.ie6||r.ieQuirks?o.fixIE():o.o.fkmodal&&(o.d.iframe&&o.d.iframe.css({height:a[0],width:a[1]}),o.d.overlay.css({height:t[0],width:t[1]}))})},unbindEvents:function(){e("."+this.o.closeClass).unbind("click.simplemodal"),n.unbind("keydown.simplemodal"),i.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var t=this,n=t.o.position;e.each([t.d.iframe||null,t.o.fkmodal?t.d.overlay:null,"fixed"===t.d.container.css("position")?t.d.container:null],function(e,t){if(t){var o="document.body.clientHeight",i="document.body.clientWidth",a="document.body.scrollHeight",r="document.body.scrollLeft",s="document.body.scrollTop",l="document.body.scrollWidth",c="document.documentElement.clientHeight",d="document.documentElement.clientWidth",u="document.documentElement.scrollLeft",f="document.documentElement.scrollTop",p=t[0].style;if(p.position="absolute",2>e)p.removeExpression("height"),p.removeExpression("width"),p.setExpression("height",""+a+" > "+o+" ? "+a+" : "+o+' + "px"'),p.setExpression("width",""+l+" > "+i+" ? "+l+" : "+i+' + "px"');else{var h,g;if(n&&n.constructor===Array){var m=n[0]?"number"==typeof n[0]?""+n[0]:n[0].replace(/px/,""):t.css("top").replace(/px/,"");if(h=-1===m.indexOf("%")?m+" + (t = "+f+" ? "+f+" : "+s+') + "px"':parseInt(m.replace(/%/,""))+" * (("+c+" || "+o+") / 100) + (t = "+f+" ? "+f+" : "+s+') + "px"',n[1]){var v="number"==typeof n[1]?""+n[1]:n[1].replace(/px/,"");g=-1===v.indexOf("%")?v+" + (t = "+u+" ? "+u+" : "+r+') + "px"':parseInt(v.replace(/%/,""))+" * (("+d+" || "+i+") / 100) + (t = "+u+" ? "+u+" : "+r+') + "px"'}}else h="("+c+" || "+o+") / 2 - (this.offsetHeight / 2) + (t = "+f+" ? "+f+" : "+s+') + "px"',g="("+d+" || "+i+") / 2 - (this.offsetWidth / 2) + (t = "+u+" ? "+u+" : "+r+') + "px"';p.removeExpression("top"),p.removeExpression("left"),p.setExpression("top",h),p.setExpression("left",g)}}})},focus:function(t){var n=this,o=t&&-1!==e.inArray(t,["first","last"])?t:"first",i=e(":input:enabled:visible:"+o,n.d.wrap);setTimeout(function(){i.length>0?i.focus():n.d.wrap.focus()},10)},getDimensions:function(){var e=window.innerHeight===void 0?i.height():window.innerHeight;t=[n.height(),n.width()],a=[e,i.width()]},getVal:function(e,t){return e?"number"==typeof e?e:"auto"===e?0:e.indexOf("%")>0?parseInt(e.replace(/%/,""))/100*("h"===t?a[0]:a[1]):parseInt(e.replace(/px/,"")):null},update:function(e,t){var n=this;return n.d.data?(n.d.origHeight=n.getVal(e,"h"),n.d.origWidth=n.getVal(t,"w"),n.d.data.hide(),e&&n.d.container.css("height",e),t&&n.d.container.css("width",t),n.setContainerDimensions(),n.d.data.show(),n.o.focus&&n.focus(),n.unbindEvents(),n.bindEvents(),void 0):!1},setContainerDimensions:function(){var e=this,t=r.ie6||r.ie7,n=e.d.origHeight?e.d.origHeight:r.opera?e.d.container.height():e.getVal(t?e.d.container[0].currentStyle.height:e.d.container.css("height"),"h"),o=e.d.origWidth?e.d.origWidth:r.opera?e.d.container.width():e.getVal(t?e.d.container[0].currentStyle.width:e.d.container.css("width"),"w"),i=e.d.data.outerHeight(!0),s=e.d.data.outerWidth(!0);e.d.origHeight=e.d.origHeight||n,e.d.origWidth=e.d.origWidth||o;var l=e.o.maxHeight?e.getVal(e.o.maxHeight,"h"):null,c=e.o.maxWidth?e.getVal(e.o.maxWidth,"w"):null,d=l&&a[0]>l?l:a[0],u=c&&a[1]>c?c:a[1],f=e.o.minHeight?e.getVal(e.o.minHeight,"h"):"auto";n=n?e.o.autoResize&&n>d?d:f>n?f:n:i?i>d?d:e.o.minHeight&&"auto"!==f&&f>i?f:i:f;var p=e.o.minWidth?e.getVal(e.o.minWidth,"w"):"auto";o=o?e.o.autoResize&&o>u?u:p>o?p:o:s?s>u?u:e.o.minWidth&&"auto"!==p&&p>s?p:s:p,e.d.container.css({height:n,width:o}),e.d.wrap.css({overflow:i>n||s>o?"auto":"visible"}),e.o.autoPosition&&e.setPosition()},setPosition:function(){var e,t,n=this,o=a[0]/2-n.d.container.outerHeight(!0)/2,r=a[1]/2-n.d.container.outerWidth(!0)/2,s="fixed"!==n.d.container.css("position")?i.scrollTop():0;n.o.position&&"[object Array]"===Object.prototype.toString.call(n.o.position)?(e=s+(n.o.position[0]||o),t=n.o.position[1]||r):(e=s+o,t=r),n.d.container.css({left:t,top:e})},watchTab:function(t){var n=this;if(e(t.target).parents(".simplemodal-container").length>0){if(n.inputs=e(":input:enabled:visible:first, :input:enabled:visible:last",n.d.data[0]),!t.shiftKey&&t.target===n.inputs[n.inputs.length-1]||t.shiftKey&&t.target===n.inputs[0]||0===n.inputs.length){t.preventDefault();var o=t.shiftKey?"last":"first";n.focus(o)}}else t.preventDefault(),n.focus()},open:function(){var t=this;t.d.iframe&&t.d.iframe.show(),e.isFunction(t.o.onOpen)?t.o.onOpen.apply(t,[t.d]):(t.d.overlay.show(),t.d.container.show(),t.d.data.show()),t.o.focus&&t.focus(),t.bindEvents()},close:function(){var t=this;if(!t.d.data)return!1;if(t.unbindEvents(),e.isFunction(t.o.onClose)&&!t.occb)t.occb=!0,t.o.onClose.apply(t,[t.d]);else{if(t.d.placeholder){var n=e("#simplemodal-placeholder");t.o.persist?n.replaceWith(t.d.data.removeClass("simplemodal-data").css("display",t.display)):(t.d.data.hide().remove(),n.replaceWith(t.d.orig))}else t.d.data.hide().remove();t.d.container.hide().remove(),t.d.overlay.hide(),t.d.iframe&&t.d.iframe.hide().remove(),t.d.overlay.remove(),t.d={}}}}}(fk$),function(e){function t(e){return e}function n(e){return decodeURIComponent(e.replace(i," "))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a.json?JSON.parse(e):e}catch(t){}}var i=/\+/g,a=e.cookie=function(i,r,s){if(void 0!==r){if(s=e.extend({},a.defaults,s),"number"==typeof s.expires){var l=s.expires,c=s.expires=new Date;c.setDate(c.getDate()+l)}return r=a.json?JSON.stringify(r):r+"",document.cookie=[a.raw?i:encodeURIComponent(i),"=",a.raw?r:encodeURIComponent(r),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var d=a.raw?t:n,u=document.cookie.split("; "),f=i?void 0:{},p=0,h=u.length;h>p;p++){var g=u[p].split("="),m=d(g.shift()),v=d(g.join("="));if(i&&i===m){f=o(v);break}i||(f[m]=o(v))}return f};a.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}}(fk$),function(e){e.fn.betterTrigger=function(t,n){return this.each(function(){try{var o=new CustomEvent(t,{detail:n});window.document.dispatchEvent(o)}catch(i){try{var o=document.createEvent("Event");o.initEvent(t,!0,!0),o.detail=n,window.document.dispatchEvent(o)}catch(i){e(document).trigger(t,n)}}})}}(fk$),function(e){function t(e){return e.replace(/(:|\.|\[|\])/g,"\\$1")}e.fn.getPath=function(){try{if(0==this.length)return"";for(var e,n=this;n.length;){var o=n[0],i=o.localName,a=o.className;if(!i)break;i=i.toLowerCase(),o.id?i+="#"+t(o.id):a&&(a=a.trim(),a=t(a),i+="."+a.split(/\s+/).join("."));var r=n.parent(),s=r.children(i);s.length>1&&(i+=":eq("+s.index(n)+")"),e=i+(e?">"+e:""),n=r}return e}catch(l){return""}}}(fk$),function(){var e=!1,t=window.localStorage.getItem("fk-debug");if(t)try{var n=new Date(t),o=n.getTime(),i=o/1e3/60,a=(new Date).getTime(),r=a/1e3/60;1440>=r-i&&(e=!0)}catch(s){}window.fkconsole={},e?(fkconsole.info=function(e){console&&console.info&&console.info(e)},fkconsole.error=function(e){console&&console.error&&console.error(e)},fkconsole.log=function(){console&&console.log&&console.log(arguments)},fkconsole.dir=function(e){console&&console.dir&&console.dir(e)}):(fkconsole.info=function(){},fkconsole.error=function(){},fkconsole.log=function(){},fkconsole.dir=function(){})}(),function(e,t){void 0===t.fk&&(t.fk={});var n=t.fk;void 0===n.helpers&&(n.helpers={}),n.helpers.getUniqueTime=function(){for(var e=(new Date).getTime();e==(new Date).getTime(););return(new Date).getTime()},n.helpers.isRealNumber=function(e){return 8==Object.prototype.toString.call(e).indexOf("Number")?!0:!1},n.helpers.doIHaveARealString=function(e){return e&&8==Object.prototype.toString.call(e).indexOf("String")&&e.length>0&&"null"!=e&&"undefined"!=e?!0:!1},n.helpers.doIHaveARealJson=function(e){return e&&8==Object.prototype.toString.call(e).indexOf("Object")&&"null"!=e&&"undefined"!=e?!0:!1},n.helpers.stringToJson=function(e){var t={},o=n.helpers.doIHaveARealString(e);if(0==o)return t;try{t=JSON.parse(e)}catch(i){}return t},n.helpers.numberOfEntriesInJson=function(e){var t=0;for(var n in e)0!=e.hasOwnProperty(n)&&t++;return t},n.helpers.wildSearch=function(e,t){for(var n,o=t.split("*"),i=o.length,a=-1,r=0;i>r;r++){if(n=o[r],a=e.indexOf(n),0>a)return!1;e=e.substring(a+n.length)}return!0},n.helpers.escapeRegex=function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},n.helpers.comareDates=function(e,t){return e=Date.parse(e),t=Date.parse(t),t>e?-1:e==t?0:1},n.helpers.isIpInRange=function(e,t){for(var n,i,a,r,s=t.split(","),l=!1,c=0;s.length>c;c++)a=s[c],n=a,i=a,a.indexOf("-")>0&&(n=a.split("-")[0].trim(),i=a.split("-")[1].trim()),n=o(n),i=o(i),r=o(e),r>=n&&i>=r&&(l=!0);return l};var o=function(e){var t=e.split("."),n=256*256*256*+t[0]+256*256*+t[1]+256*+t[2]+ +t[3];return n};n.helpers.roundUp=function(e,t){return 1==isNaN(e)||1==isNaN(t)?0:(e/=t,e=Math.round(e),e*=t,e=Math.round(e))},n.helpers.parseContentEditableElem=function(e){return e[0].innerText?e[0].innerText.trim().replace(/[\n]|[\r\n]/gi,"<br>"):e.html().trim()},n.helpers.areWeOnSSL=function(){return 0==n.constants.domainName.indexOf("https")?!0:!1},n.helpers.getUrlParameter=function(e){return decodeURI((RegExp(e+"="+"(.+?)(&|$)").exec(location.search)||[,null])[1])},n.helpers.escapeRegex=function(e){return(e+"").replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}}(fk$,window),function(e,t){void 0===t.fk&&(t.fk={});var n=t.fk;void 0===n.itemUploader&&(n.itemUploader={});var o="fkUploadHash",i=50,a=5e3,r=function(e,t,n){fkconsole.log("in addItemToUploadList");var o=u(),i={url:e,data:t,method:n,ts:(new Date).getTime()},a=Math.random();fkconsole.log("will add this item: ",i,"at key: ",a),o[a]=i,f(o)},s=function(e){var t=u();fkconsole.log("asked to remove item with key: ",e),delete t[e],f(t)},l=function(){var e=u(),t=null;for(var n in e)if(0!=e.hasOwnProperty(n)){t=n;break}return fkconsole.log("will lookup item of first key which is: ",t,"and its value is: ",e[t]),[n,e[t]]},c=function(){var e=u();return fkconsole.log(e),e},d=function(){localStorage.removeItem(o),console.log("cleared")},u=function(){var e=localStorage.getItem(o);return e=JSON.parse(e),fkconsole.log("currently the upload hash is like: ",e),null==e&&(fkconsole.log("upload hash was empty. will initialize it to be empty"),e={}),e},f=function(e){fkconsole.log("saving hash: ",e),localStorage.setItem(o,JSON.stringify(e))},p=function(t){var n=t.data;n.fkUploadHashkey=t.fkUploadHashkey,fkconsole.log("in callServer. dataToUpload: ",n,"url is: ",t.url),e.ajax({data:n,context:t.context?t.context:this,timeout:t.timeout?t.timeout:5e3,method:t.method?t.method:"PUT",url:t.url,xhrFields:{withCredentials:!0},error:function(){t.error&&t.error.apply(this,arguments)},success:function(){t.success&&t.success.apply(this,arguments)},complete:function(){t.complete&&t.complete.apply(this,arguments)}})},h=function(){fkconsole.log("checking itemToUploadHash in localstorage for data");var t=l(),o=t[0],r=t[1];if(o){fkconsole.log("got data to upload. ",o,r);var c={url:r.url,data:r.data,method:r.method,timeout:a,fkUploadHashkey:o,success:function(t){fkconsole.log("successfully uploaded stuff and got: ",t),t.fkUploadHashkey&&(fkconsole.log("the upload response has a key: ",t.fkUploadHashkey,"will remove this data from the hash"),s(t.fkUploadHashkey)),(t.marketing_stop_points||t.marketing_start_points)&&(fkconsole.log("response had start/stop points. checking and firing events",t),t.marketing_stop_points>=100?e(document).trigger("fk-stop-marketing"):t.marketing_start_points>=n.constants.targetStartPoints&&e(document).trigger("fk-start-marketing")),fkconsole.log("rescheduling to fetch and upload in a few seconds"),window.setTimeout(h,i)},error:function(){fkconsole.log("error occurred while uploading. will stop the uploading")},complete:function(){e(document).dequeue()}};e(document).queue(function(){p(c)})}else fkconsole.log("no data received to be uploaded. resheduling to check again in a few seconds"),window.setTimeout(h,i)},g=function(){fkconsole.log("initializing the itemUploader"),window.setTimeout(h,i)};n.itemUploader.addItem=r,n.itemUploader.removeItem=s,n.itemUploader.getFirstItem=l,n.itemUploader.viewList=c,n.itemUploader.clearList=d,n.itemUploader.init=g}(fk$,window);var FkAutolinker={htmlRegex:/<(\/)?(\w+)(?:(?:\s+\w+(?:\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>/g,prefixRegex:/^(https?:\/\/)?(www\.)?/,link:function(e,t){function n(e){return e=e.replace(r,function(e,t,n,o,i,a){var r=t,p=n,h=o,g=i,m=a,v="",y="",b=[],k=e.charAt(e.length-1);if(")"===k){var w=e.match(/\(/g),x=e.match(/\)/g),_=w&&w.length||0,T=x&&x.length||0;T>_&&(e=e.substr(0,e.length-1),y=")")}var C=e,S=e;return r&&!d||g&&!u||m&&!f?v+S+y:(r?(v=p,C="https://twitter.com/"+h,S="@"+h):g?(C="mailto:"+g,S=g):/^[A-Za-z]{3,9}:/i.test(C)||(C="http://"+C),l&&(S=S.replace(FkAutolinker.prefixRegex,"")),"/"===S.charAt(S.length-1)&&(S=S.slice(0,-1)),b.push('href="'+C+'"'),s&&b.push('target="_blank"'),c&&S.length>c&&(S=S.substring(0,c-2)+".."),v+"<a "+b.join(" ")+">"+S+"</a>"+y)})}t=t||{};for(var o,i,a=FkAutolinker.htmlRegex,r=FkAutolinker.matcherRegex,s=("newWindow"in t?t.newWindow:!0),l=("stripPrefix"in t?t.stripPrefix:!0),c=t.truncate,d=("twitter"in t?t.twitter:!0),u=("email"in t?t.email:!0),f=("urls"in t?t.urls:!0),p=0,h="",g=0;null!==(o=a.exec(e));){var m=o[0],v=o[2],y=!!o[1];i=e.substring(p,o.index),p=o.index+m.length,"a"===v?y?(g--,0===g&&(h+=i)):(g++,h+=n(i)):0===g&&(h+=n(i)),h+=m}return e.length>p&&(h+=n(e.substring(p))),h}};FkAutolinker.matcherRegex=/((^|\s)@(\w{1,15}))|((?:[\-;:&=\+\$,\w\.]+@)[A-Za-z0-9\.\-]*[A-Za-z0-9\-]\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b)|((?:(?:(?:[A-Za-z]{3,9}:(?:\/\/)?)[A-Za-z0-9\.\-]*[A-Za-z0-9\-])|(?:(?:www\.)[A-Za-z0-9\.\-]*[A-Za-z0-9\-])|(?:[A-Za-z0-9\.\-]*[A-Za-z0-9\-]\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b))(?:[-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#\/%=~_()|])?)/g,function(e){e.fn.isElementInViewport=function(){var t=e(this).get(0),n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}}(fk$),function(e){e.fn.viewportHeight=function(){return null===document.doctype?document.body.clientHeight:e(window).height()}}(fk$),function(e){e.fn.scrollStopped=function(t){var n="scrollTimeout_"+fk.helpers.getUniqueTime();e(this).scroll(function(){var o=this,i=e(o);i.data(n)&&clearTimeout(i.data(n)),i.data(n,setTimeout(t,500,o))})}}(fk$),function(e){e.fn.reachedBottom=function(t){e(this).scrollStopped(function(){e(window).scrollTop()+e(document).viewportHeight()>e(document).height()-5&&t()})}}(fk$),function(e){e.fn.mousedOut=function(t){return this.each(function(){e(this).on("mouseleave",function(e){0>=e.clientY&&t(e)})})}}(fk$),function(e){var t;void 0===window.fk&&(window.fk={}),window.fk.templates={},t=window.fk.templates,t.feedback=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-question" data-paramname="custom2">        </p>      </div>      <div class="col-sm-12">        <p>          <textarea class="form-control" rows=2            data-paramname="custom1"></textarea>        </p>      </div>      <div class="col-sm-12">        <span style="" class="fk-invalidinput">          Invalid Input!        </span>        <button type="button" data-paramname="custom3" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-right">        </button>      </div>    </div>  </div></div>'),t.field=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-question" data-paramname="custom2">        </p>      </div>      <div class="col-sm-12">        <p>          <input type="text" class="form-control"             data-paramname="custom1">        </p>      </div>      <div class="col-sm-12">        <span style="" class="fk-invalidinput">          Invalid Input!        </span>        <button type="button" data-paramname="custom3" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-right">        </button>      </div>    </div>  </div></div>'),t.checkbox=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-question" data-paramname="custom10">        </p>      </div>      <div class="col-sm-12">          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom1"></span>            </label>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom2"></span>            </label>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom3"></span>            </label>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom4"></span>            </label>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom5"></span>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom6"></span>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom7"></span>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom8"></span>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom9"></span>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom11"></span>          </div>          <div class="fkcheckbox">            <label>              <input type="checkbox"><span data-paramname="custom12"></span>          </div>      </div>      <div class="col-sm-12">        <span  style="" class="fk-invalidinput">          Invalid Input!        </span>        <button type="button" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-right">            Submit        </button>      </div>    </div>  </div></div>'),t.thankyou=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-question" data-paramname="custom1">        </p>      </div>      <div class="col-sm-12 fk-thankyoubody" data-paramname="custom2">      </div>    </div>  </div></div>'),t.message=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-thankyoubody" data-paramname="custom1">        </p>      </div>    </div>    <div class="fkrow">      <div class="col-sm-12">        <button type="button" data-paramname="custom2" data-go="-1" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-left">        </button>        <button type="button" data-paramname="custom4" data-close="1" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-right closeButton">        </button>        <button type="button" data-paramname="custom3"  data-go="1" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-right">        </button>      </div>    </div>  </div></div>'),t.thumb=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-question" data-paramname="custom1">        </p>      </div>      <div class="col-sm-12" style="text-align:center">        <div class="fkrow">          <div class="col-sm-3 col-xs-3 col-sm-offset-3 col-xs-offset-3">            <span class="glyphicon glyphicon-thumbs-up fk-thumbsicon" data-action data-paramname="custom2">            </span>          </div>          <div class="col-sm-3 col-xs-3">            <span class="glyphicon glyphicon-thumbs-down fk-thumbsicon" data-action data-paramname="custom3">            </span>          </div>        </div>        <div class="fkrow">          <div class="col-sm-3 col-sm-offset-3 col-xs-3 col-xs-offset-3 fk-thumbsans"            data-paramname="custom2" data-action>          </div>          <div class="col-sm-3 col-xs-3 fk-thumbsans" data-paramname="custom3" data-action>          </div>        </div>      </div>    </div>  </div></div>'),t.multiplechoice=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>      <div class="fkrow">        <div class="col-sm-12">          <p class="fk-question" data-paramname="custom10">          </p>        </div>        <div class="col-sm-12">           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom1">                </span>             </label>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom2">                </span>             </label>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom3">                </span>             </label>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom4">                </span>             </label>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom5">                </span>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom6">                </span>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom7">                </span>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom8">                </span>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom9">                </span>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom11">                </span>           </div>           <div class="fkradio">             <label>                <input type="radio" name="optionRadios" data-action>                <input type="text" class="form-control input-sm"                 placeholder="Other" data-paramname="custom12">           </div>         </div>      </div>      <div class="fkrow">          <div class="col-sm-12">            <span style="" class="fk-invalidinput">              Invalid Input!            </span>            <button type="button" data-action              class="fkbtn fkbtn-default fkbtn-xs pull-right">                Submit            </button>          </div>      </div>  </div></div>'),t.email=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>      <div class="fkrow">        <div class="col-sm-12">          <p class="fk-question" data-paramname="custom1">          </p>          <p data-paramname="custom2">          </p>        </div>        <div class="col-sm-12">          <p>            <input type="email" class="form-control" data-paramname="custom3" />          </p>        </div>      </div>      <div class="fkrow">        <div class="col-sm-12">          <a href="javascript:void(0);" class="fk-skiplink"            data-action data-skip=true>              Skip          </a>          <span class="fk-invalidinput">            Invalid Input!          </span>          <button type="button" data-action data-paramname="custom4"            class="fkbtn fkbtn-default fkbtn-xs pull-right">          </button>        </div>      </div>  </div></div>'),t.nps=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>      <div class="fkrow">        <div class="col-sm-12">          <p class="fk-question" data-paramname="custom15">          </p>        </div>        <div class="col-sm-12">           <p class="fk-npsrow">              <span class="fk-npsradioitemfirst">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom11"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom1"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom2"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom3"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom4"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom5"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom6"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom7"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom8"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom9"></span>              </span>              <span class="fk-npsradioitem">                <input type="radio" name="optionRadios" data-action>                <span data-paramname="custom10"></span>              </span>            </p>        </div>        <div class="col-sm-6 col-xs-6 text-left">           <p class="fk-npsleft" data-paramname="custom13">           </p>        </div>        <div class="col-sm-6 col-xs-6 text-right">           <p class="fk-npsright" data-paramname="custom14">           </p>        </div>      </div>      <div class="fkrow">        <div class="col-sm-12">          <a href="javascript:void(0);" class="fk-skiplink"            data-action data-skip=true>              Skip          </a>          <span class="fk-invalidinput">            Invalid Input!          </span>          <button type="button" data-action            class="fkbtn fkbtn-default fkbtn-xs pull-right">              Submit          </button>        </div>      </div>  </div></div>'),t.beta=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>      <div class="fkrow">        <div class="col-sm-12">          <p class="fk-question" data-paramname="custom1">          </p>          <p data-paramname="custom2">          </p>        </div>        <div class="col-sm-12" style="text-align:center">          <input type="radio" name="optionsRadios" value="option1" data-action />          <label data-paramname="custom3"></label>          <input type="radio" name="optionsRadios" value="option2" data-action class="fk-betanoradio" />          <label data-paramname="custom4"></label>        </div>      </div>  </div></div>'),t.feedbackTab=e('<a href="javascript:void(0);" id="fk-feedback-tab" class="fkstrap" style="display:none;">   Feedback<div id="hidden-div"></div></a>'),t.messageContainer=e('<div id="fk-messagecontainer" class="fkstrap" style="display:none">  <img data-paramname="user-image" class="fkuserimage" />  <div class="arrow-right"></div>  <div class="container-fluid" data-widgetname data-widgetid data-featureid style="padding:0px">    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fk-row">      <div class="col-sm-12">        <p data-paramname="body">          --        </p>        <p>          <textarea class="form-control" rows=1 data-paramname="response"></textarea>        </p>      </div>      <div class="col-sm-12">        <span style="" class="fk-invalidinput">          Invalid Input!        </span>        <span style="" class="fk-validinput">          Submitted!        </span>        <button type="button" data-paramname="send" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-right">          Reply        </button>      </div>    </div>  </div></div>'),t.form=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-question" data-paramname="custom10">        </p>      </div>      <div class="col-sm-12">        <input type="text" class="form-control fk-inputareabox"             data-paramname="custom1">        <input type="text" class="form-control fk-inputareabox"             data-paramname="custom2">        <input type="text" class="form-control fk-inputareabox"             data-paramname="custom3">        <input type="text" class="form-control fk-inputareabox"             data-paramname="custom4">      </div>      <div class="col-sm-12">        <span  style="" class="fk-invalidinput">          Invalid Input!        </span>        <button type="button" data-action          class="fkbtn fkbtn-default fkbtn-xs pull-right">            Submit        </button>      </div>    </div>  </div></div>'),t.empty=e('<div>  <div class="container-fluid fk-cont" data-widgetname data-widgetid data-featureid>    <button type="button" class="close close-right-button" aria-hidden="true">&times;</button>    <div class="fkrow">      <div class="col-sm-12">        <p class="fk-question" data-paramname="custom1">        </p>      </div>    </div>  </div></div>'),t.floatingImageContainer=e('<div id="fk-floatingImageContainer" class="fkstrap" style="display:none">  <img data-paramname="user-image" class="fkfloatingimage" /></div>'),t.branded=e('<div class="fk-branded">  <a></a></div>')
}(fk$),function(e){var t,n,o,i;void 0===window.fk&&(window.fk={}),void 0===window.fk.popovers&&(window.fk.popovers={}),t=window.fk.popovers,fk.getPopoversTemplate=function(t){var n,o,a=0,r=0,s=[];for(n=t.widgets,n=e.grep(n,function(e){return e.status}),n=e.grep(n,function(e){return"email"==e.name&&fk.raw.user.visitor.email_by_visitor?!1:!0}),n.sort(function(e,t){return e.position-t.position}),r=n.length,a=0;r>a;a++)o=n[a],s.push(i(o,t));return s},i=function(t,i){var a,r,s,l,c;c=fk.templates,a=c[t.name].clone();for(r in t)if(0==r.indexOf("custom")){if(s=a.find("[data-paramname='"+r+"']"),!t[r]){if("checkbox"==t.name){s.closest("div.fkcheckbox").hide();continue}if("multiplechoice"==t.name){s.closest("div.fkradio").hide();continue}if("nps"==t.name){s.parent().hide();continue}if("message"==t.name){s.hide();continue}"form"==t.name&&s.closest(".fk-inputareabox").hide()}t[r]&&(t[r]=n(t[r],fk.variables.visitorCustomProperties)),s.each(function(n,o){o=e(o),"thumb"==t.name?o.hasClass("glyphicon")?o.attr("data-action",t[r]):o.hasClass("fk-thumbsans")?(o.attr("data-action",t[r]),o.html(t[r])):o.hasClass("fk-question")?o.html(FkAutolinker.link(t[r])):o.html(t[r]):"TEXTAREA"==o.prop("tagName")?(o.attr("placeholder",t[r]),o.text("")):"INPUT"==o.prop("tagName")&&"email"==o.attr("type")?o.attr("placeholder",t[r]):"INPUT"==o.prop("tagName")&&"text"==o.attr("type")?o.attr("placeholder",t[r]):o.hasClass("fk-question")?o.html(FkAutolinker.link(t[r])):o.hasClass("fk-thankyoubody")?o.html(FkAutolinker.link(t[r])):o.html(t[r])})}var l=a.find("[data-widgetid]");return l.attr("data-widgetid",t.id),l.attr("data-widgetname",t.name),l.attr("data-featureid",i.id),l.attr("data-widgetconditions",JSON.stringify(t.conditions)),fk.constants.userBranded&&(a=o(a)),a},o=function(e){var t=fk.templates.branded.clone(),n=t.find("a"),o="http://listenloop.com?utm_source=c"+fk.variables.userid+"&utm_medium=referral&utm_campaign=Popover&utm_content="+fk.constants.environment;return n.attr("href",o),n.attr("target","listenloop"),n.text("Powered by ListenLoop"),e.append(t)},n=function(e,t){for(var n in t){var o=RegExp("\\|"+n+"\\|","g");e=e.replace(o,t[n])}return e},fk.validateInputedValue=function(e,t){return"email"==t?/^[\w\.\+]+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e):/.+/.test(e)},fk.getQuestionValue=function(e){return e.find("[data-paramname].fk-question").text()},fk.getInputedValue=function(t,n){var o=t.find("[data-widgetid]");o.attr("data-widgetid");var i,a,r,s=o.attr("data-widgetname"),l=e(n.target);if("feedback"==s)i=o.find("textarea").val();else if("field"==s)i=o.find("input[type='text']").val();else if("form"==s){elems=o.find("input[type='text']:visible");for(var c={},d=0;elems.length>d;d++){var u=elems[d].placeholder,f=e(elems[d]).val();c[u]=f}i=JSON.stringify(c)}else"checkbox"==s?(a=o.find("input[type='checkbox']:checked"),r=a.find("~ span[data-paramname]"),i=[],e.each(r,function(t,n){i.push(e(n).text())}),i=i.join(" | ")):"multiplechoice"==s?(a=o.find("input[type='radio']:checked"),r=a.find("~[data-paramname]"),i="text"==r.attr("type")?r.val():r.text()):"thumb"==s?i=l.data("action"):"beta"==s?i=l.find("+ label:first").text():"email"==s?i=o.find("input[type='email']").val():"nps"==s&&(a=o.find("input[type='radio']:checked"),r=a.find("~ span[data-paramname]"),i=r.text());return i},fk.getNextWidgetIdAsPerBranch=function(e,t){var n=e.find("[data-widgetid]"),o=n.attr("data-widgetconditions");o=JSON.parse(o);for(var i,a=0;o.length>a;a++){var r=o[a];if(t.indexOf(r.value)>=0){i=r.go_to_widget;break}}return i},fk.getIndexOfWidget=function(e,t){var n,o,i,a=e.data("popoverstemplate"),r=a.length;for(n=0;r>n;n++)if(o=a[n],i=o.find("[data-widgetid]").attr("data-widgetid"),i==t)return n;return void 0},e(document).on("click",".fk-cont div.fkradio input[type='text']",function(t){e(t.target).parent().find("input[type='radio']").click()}),e(document).on("click",".fk-cont div.fkradio input[type='radio']",function(t){e(t.target).parent().find("input[type='text']").focus()}),e(document).on("keypress",".fk-cont div.fkradio input[type='text'],.fk-cont input[type='email']",function(t){"13"==t.keyCode&&e(t.target).closest(".fk-cont").find("button[data-action]").click()}),e(document).on("fk_popover_widget_displayed",function(){e("#fk-popovercontainer .fk-cont textarea").eq(0).focus()}),e(document).on("click","div.fkstrap button.close-right-button.close",function(){e(document).click()})}(fk$),function(e){fkconsole.info("in business, going to run FK sandeep1"),e(function(){function t(e,t){var n=a.helpers.doIHaveARealString;if(0==n(t))return fkconsole.log("no regex. nothing to test again. value passes"),!0;if(0==n(e))return fkconsole.log("no value given. if you given nothing how can you pass. you fail."),!1;fkconsole.log("user specified a regex. will see if the value does not match");var o=RegExp(t),i=o.test(tempElemValue);return fkconsole.log("regexTestResult: ",i),i}function n(e,t){var n;if("innerText"==t)n=e.text();else if("innerHtml"==t)n=e.html();else if("style"==t)try{n=e.prop("style").cssText}catch(o){n=e.attr("style")}else n="value"==t?e.val():e.prop(t);return n=1==a.helpers.doIHaveARealString(n)?n.trim():null,"value"==t&&1!=e.data("fkInputHasChanged")&&(n=null),n}void 0===window.fk&&(window.fk={});var o,i,a=window.fk,r=0,s=0,l=a.helpers.wildSearch;if(e("script[fk-userid]").length>=1)i=e("script[fk-userid]");else{if(!(e("script[fk-public-key]").length>=1))return console&&console.warn&&console.log("script tag not included correctly. cannot proceed"),void 0;i=e("script[fk-public-key]")}a.dataDump=function(){console.log("user id: "+a.variables.userid),console.log("publicKey id: "+a.variables.publicKey),console.log("visitor id: "+a.variables.visitorid),console.log("visitor fingerprint: "+new FkFingerprint({canvas:!0}).get()),console.log("visitor email: "+a.variables.visitorEmail),console.log("visitor hash: "+a.variables.visitorHash),console.log("visitor page data: "+JSON.stringify(a.variables.visitorPageData)),console.log("visitor segment: "+a.variables.visitorSegment),console.log("visitor custom properties: ",a.variables.visitorCustomProperties),console.log("usage id: "+a.variables.usageId),console.log("usage count: "+a.variables.usageCount),console.log("featuresSeen: "+localStorage.getItem("fk-user-"+a.variables.userid+"-featuresSeen")),console.log("featuresUsed: "+localStorage.getItem("fk-user-"+a.variables.userid+"-featuresUsed")),console.log("sessionLengthInMinutes: "+a.constants.sessionLengthInMinutes),console.log("gapLengthInMinutes: "+a.constants.gapLengthInMinutes),console.log("minutes between NOW and last time a feature was seen: "+j()),console.log("last time when a feature was seen: "+D()),console.log("percentageToShowTo: "+a.constants.percentageToShowTo),console.log("do I get to see features: "+It()),console.log("are we recording heat: "+a.constants.recordHeat),console.log("are we doing marketing: "+a.constants.useMarketing),console.log("domainName: "+a.constants.domainName),console.log("user targetStartPoints: "+a.constants.targetStartPoints)};var c=function(t){fkconsole.log("Making JSONP request: ",t.url,t.data),1==e.support.cors?e.ajax({data:t.data,context:t.context?t.context:this,timeout:t.timeout?t.timeout:3e4,method:t.method?t.method:"GET",url:a.constants.domainName+t.url,xhrFields:{withCredentials:!0},error:function(){t.error&&t.error.apply(this,arguments)},success:function(){t.success&&t.success.apply(this,arguments)},complete:function(){t.complete&&t.complete.apply(this,arguments)}}):void 0==t.onlyCors?e.ajax({dataType:"jsonp",crossDomain:!0,data:t.data,context:this,timeout:t.timeout?t.timeout:3e4,url:a.constants.domainName+t.url,error:function(){t.error&&t.error.apply(this,arguments)},success:function(){t.success&&t.success.apply(this,arguments)},complete:function(){t.complete&&t.complete.apply(this,arguments)}}):fkconsole.log("not calling server: ",t)},d=function(){void 0===a.constants&&(a.constants={});var e=i[0].src,t=document.createElement("a");t.href=e;var n="http:";t.protocol&&0==t.protocol.indexOf("http")&&(n=t.protocol);var o=i.attr("fk-server");o||(console&&console.warn&&console.warn("ListenLoop JavaScript File was included in a deprecated fashion. Even though this works, we now support cloudFront CDN inclusion and it is recommend for performance reasons to upgrade. The new snippet to include the javascript file can be found on you integration page. Thank You & Have a Nice Day!"),fkconsole.log("since no server was detected I am defaulting to prod server"),o=t.host),"fkapp-staging.herokuapp.com"==o?o="app.listenloopstaging.com":"fkapp.herokuapp.com"==o&&(o="app.listenloop.com"),a.constants.domainName=n+"//"+o,fkconsole.log("so domain we got is: "+a.constants.domainName)},u=function(t){fkconsole.info("loading overlay css file."),fkconsole.log("will load it fom the same server we loaded the javascript file from");var n=i[0].src,o=document.createElement("a");o.href=n;var a=o.host;e("head").append('<link rel="stylesheet" href="'+o.protocol+"//"+a+'/assets/featurekicker.css" type="text/css" />'),t&&-1==t.indexOf("/missing.png")&&e("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />')},f=function(){e("body").append("<iframe src='//listenloop.sitescoutadserver.com/disp?pid=323095E247&rnd="+Date.now()+"' width='0' height='0' "+"marginwidth='0' marginheight='0' scrollbars='0' scrolling='no' "+"frameborder='0' bordercolor='#000000' vspace='0' hspace='0' "+"style='display:none;width:0px;height:0px' id='fkCommunicationFrame'>"+"</iframe>")},p=function(){c({url:"/users/"+a.variables.userid+"/visitors/whoami",success:function(){fkconsole.log("vid in cookie has been stored In ETag.")},error:function(){fkconsole.log("unable to store vid in ETag.")}})},h=function(){fkconsole.info("THING 1: in setupUser:"),void 0===a.variables&&(a.variables={},a.variables.viewsSent={},a.variables.scrolledInAndTriggered={},a.variables.scrolledToBottomAndTriggered={},a.variables.pageMousedOutAndTriggered={}),void 0===a.raw&&(a.raw={});var e=i.attr("fk-userid"),t=i.attr("fk-public-key");return e||t?(a.variables.userid=e,a.variables.publicKey=t,fkconsole.log("setting up user id to: "+a.variables.userid+" and publicKey to: "+a.variables.publicKey),a.variables.pf=i.attr("fk-pf"),g(),void 0):(fkconsole.error("what's goin on here!!!!!. we didn't get the users userid or publicKey. STOPIING!"),void 0)},g=function(){fkconsole.info("THING 1.5: in getUserFeatureAndVisitorData:");var t,n=null,o=null,i=null,r=null,s=null,l=null;t=localStorage.getItem("fk-user-"+a.variables.userid+"-visitor-id"),l=sessionStorage.getItem("fk-user-"+a.variables.userid+"-session-id"),l&&"object"==typeof l&&(l=l.value),"undefined"!=typeof fkVisitorEmail&&8==Object.prototype.toString.call(fkVisitorEmail).indexOf("Function")&&(n=fkVisitorEmail(),0==Mt(n)&&(n=null)),"undefined"!=typeof fkVisitorData&&8==Object.prototype.toString.call(fkVisitorData).indexOf("Function")&&(s=fkVisitorData(),n=1==Mt(s.email)?s.email:null,o=1==Mt(s.hash)?s.hash:null,i=s.segment,r=s.custom_properties),fkconsole.log("calling init"),c({url:"/api/v1/public/init.json",data:{user_id:a.variables.userid,public_key:a.variables.publicKey,pf:a.variables.pf,usage_id:l,visitor_id:t,visitor_email:n,visitor_hash:o,visitor_segment:i,visitor_custom_properties:r,visitor_fingerprint:new FkFingerprint({canvas:!0}).get()},success:function(t){a.raw=t,a.variables.userid=t.user.id,u(t.user.custom_popover_css_url),v(),Kt(),Jt(),1==a.constants.useMarketing&&"production"==a.raw.env&&(f(),window.setTimeout(function(){fkconsole.log("sending message to com frame");try{e("#fkCommunicationFrame")[0].contentWindow.postMessage("fk-sends-visitor-information="+JSON.stringify({visitor_id:a.raw.user.visitor.id,user_id:a.raw.user.id}),"*")}catch(t){fkconsole.log("failed to send message to communication frame")}},5e3)),a.constants.configFeedbackTab&&null!=m()||Yt(),1==a.constants.useMarketing&&p()},error:function(e,t,n){fkconsole.error("Error getting init data ",e,t,n),console&&console.log&&console.log("The error message above indicates that our service was unable to process this request, but you shouldn't experience any interruption in your service to your users.")}})},m=function(){for(var e=null,t=0;a.variables.features.length>t;t++){var n=a.variables.features[t];if("#fk-feedback-tab"==n.action_selector){e=n;break}}return e},v=function(){fkconsole.info("THING 2: in setupConstants:"),void 0===a.constants&&(a.constants={}),a.constants.sessionLengthInMinutes=a.raw.user.session_length,a.constants.gapLengthInMinutes=a.raw.user.gap_length,a.constants.percentageToShowTo=a.raw.user.percentage_to_show_to,a.constants.recordHeat=a.raw.user.record_heat,a.constants.useMarketing=a.raw.user.use_marketing,a.constants.configFeedbackTab=a.raw.user.config_feedback_tab,a.constants.userBranded=a.raw.user.branded,a.constants.environment=a.raw.env,a.constants.responsesPerWidgetHash=Zt(),a.constants.targetStartPoints=a.raw.user.target_start_points,a.constants.domPollTimeForPageData=1e3,y()},y=function(){fkconsole.info("THING 3 & 4: in setupVisitor:"),a.variables.visitorUsesAdBlocker=a.raw.user.visitor.uses_ad_blocker,a.variables.visitorEmail=a.raw.user.visitor.email_by_user,a.variables.visitorHash=a.raw.user.visitor.custom_identifier,a.variables.visitorSegment=a.raw.user.visitor.segment,a.variables.visitorCustomProperties=JSON.parse(a.raw.user.visitor.custom_properties),a.variables.visitorid=a.raw.user.visitor.id,a.variables.visitorUrl="http://app.listenloop.com/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid,a.variables.visitorPageData=a.raw.user.visitor.page_data||{},a.variables.visitorEmail&&"preview@featurekicker.com"==a.variables.visitorEmail?fkconsole.log("not storing visitor id in LS as its preview visitor"):localStorage.setItem("fk-user-"+a.variables.userid+"-visitor-id",a.variables.visitorid),fkconsole.log("starting location business"),1==_(a.raw.user.visitor)&&window.setTimeout(w,1e4),T()},b=function(t,n){var o="https://https-api.apigurus.com/iplocation/v1.8/locateip?key=SAK6Q248U56SRW39969Z&ip="+t.ip_address+"&format=json";e.ajax({url:o,dataType:"jsonp",crossDomain:!0,success:function(e){try{if("OK"==e.query_status.query_status_code){var t={ip:e.ip_address,country_code:e.geolocation_data["country_code_fips10-4"],country_name:e.geolocation_data.country_name,region_code:e.geolocation_data.region_code,region_name:e.geolocation_data.region_name,city:e.geolocation_data.city,latitude:e.geolocation_data.latitude,longitude:e.geolocation_data.longitude,zipcode:e.geolocation_data.postal_code,metro_code:e.geolocation_data.metro_code,area_code:e.geolocation_data.area_code,organization:e.geolocation_data.organization};n(t)}else fkconsole.log("unable to get ip address: "+e.query_status.query_status_code+" - "+e.query_status.query_status_description)}catch(o){fkconsole.log("unable to process location")}}})},k=function(t,n){var o="http://ip-api.com/json/"+t.ip_address;e.ajax({url:o,dataType:"jsonp",crossDomain:!0,success:function(e){try{if("success"==e.status){var t={ip:e.query,country_code:e.countryCode,country_name:e.country,region_code:e.region,region_name:e.regionName,city:e.city,latitude:e.lat,longitude:e.lon,zipcode:e.zip,time_zone:e.timezone,organization:e.org};n(t)}else fkconsole.log("unable to get ip address: "+e.status+" - "+e.message)}catch(o){fkconsole.log("unable to lookup location")}}})},w=function(){fkconsole.log("in add location to visitor");var e=a.raw.user.visitor;1==a.helpers.areWeOnSSL()?1==a.constants.useMarketing&&b(e,x):k(e,x)},x=function(e){fkconsole.log("inside upload visitor"),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/location/add_location_to_visitor",data:e,success:function(){fkconsole.log("data has been reported")},error:function(){fkconsole.log("error reporting location data to our backend")}})},_=function(e){return 1==C()?!1:"127.0.0.1"==e.ip_address?(fkconsole.log("not uploading as ip is of localhost"),!1):e.location?e.ip_address==e.location.ip?(fkconsole.log("not uploading as stored visitor location is same as current ip"),!1):(fkconsole.log("true - location should be updated"),!0):(fkconsole.log("uploading as visitor location is not already present"),!0)},T=function(){fkconsole.info("THING 5: in setupSession:"),a.variables.usageId=a.raw.user.usage_id,a.variables.usageCount=a.raw.user.num_of_days_of_usage,sessionStorage.setItem("fk-user-"+a.variables.userid+"-session-id",a.variables.usageId),Q(),Qt()},C=function(){fkconsole.info("checking if we are on mobile");var e=navigator.userAgent,t=null!=e.match(/iPhone/i),n=null!=e.match(/Android/i),o=null!=e.match(/webOS/i);return t||n||o?(fkconsole.info("yup its mobile"),!0):(fkconsole.info("its not mobile"),!1)},S=function(e){for(var t=Ht(e),n=t.widgets,o=0;n.length>o;o++)if(1==n[o].status)return!0;return!1},E=function(t,n,o){fkconsole.info("in openOverlay");var i,r=encodeURI(t),s=encodeURI(a.variables.visitorid),l=Ht(t),d=l.allow_closing;if(o&&o.target&&(i=e(o.target)),i&&0!=i.length||(i=e(l.action_selector)),0==i.length&&void 0!=n&&(i=e(n)),"popover"==l.show_method){fkconsole.log("hiding all popovers"),e("[showingpopover=true]").popover("destroy"),e("[showingpopover=true]").removeAttr("showingpopover"),void 0===i.data("popoverstemplate")&&(fkconsole.log("building popover templateS for feature: "+l.id),i.data("popoverstemplate",a.getPopoversTemplate(l)),fkconsole.log("build popover templates: ",i.data("popoverstemplate")));var u={animation:!0,html:!0,placement:l.popover_placement,trigger:"manual",content:i.data("popoverstemplate")[0].html(),container:"#fk-popovercontainer"},f={template:'<div class="popover make-popover-fixed"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'};"feedbacktab"==l.feature_purpose||"scroll_to_bottom"==l.show_on||"on_win_load"==l.show_on?(feedbackTabPopoverOptions=e.extend(u,f),i.popover(feedbackTabPopoverOptions)):i.popover(u),fkconsole.log("showing this popover"),i.popover("show"),i.data("bs.popover").$tip.attr("data-conversationid",l.id),"on_moused_out"==l.show_on&&i.data("bs.popover").$tip.addClass("popoverNextToFloatingImage"),i.data("currentlyshowingwidgetindex",0),i.attr("showingpopover",!0),e(document).betterTrigger("fk_overlay_loaded",{feature_id:l.id,feature_name:l.name}),e(document).trigger("fk_popover_widget_displayed")}else if("iframe"==l.show_method){if(C()===!0){var p={focus:!0,appendTo:"body",opacity:70,overlayId:"fk-overlay",containerId:"fk-container",zIndex:"3000",maxWidth:"290",maxHeight:"450",autoResize:!0,dataId:"fk-simplemodal-data-mobile",close:d,closeClass:"fk-close",onClose:function(){e.fkmodal.close(),e(document).betterTrigger("fk-overlay-closed")},escClose:!0,overlayClose:!0},h=a.constants.domainName+"/users/"+a.variables.userid+"/features/"+r+"/mobile_overlay";e.fkmodal('<iframe class="fk-iframe" src="'+h+"?visitor_id="+s+'"width="100%" height="100%" id="fk-iframe" '+"/>",p)}else{var p={focus:!0,appendTo:"body",opacity:70,overlayId:"fk-overlay",containerId:"fk-container",zIndex:"3000",maxWidth:"1024",maxHeight:"768",autoResize:!0,dataId:"fk-simplemodal-data",close:d,closeClass:"fk-close",onClose:function(){e.fkmodal.close(),e(document).betterTrigger("fk-overlay-closed")},escClose:!0,overlayClose:!0},g=a.constants.domainName+"/users/"+a.variables.userid+"/features/"+r+"/web_overlay";e.fkmodal('<iframe class="fk-iframe" src="'+g+"?visitor_id="+s+'"width="100%" height="100%" id="fk-iframe" '+"/>",p)}e("iframe#fk-iframe").load({feature_id:l.id,feature_name:l.name},function(e){fk$(document).betterTrigger("fk_overlay_loaded",e.data)})}else if("email"==l.show_method){var m="/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/send_email";c({url:m,method:"POST",data:{feature_id:l.id},timeout:2e3,xhrFields:{withCredentials:!0},success:function(){fkconsole.log("data has been reported")},error:function(){fkconsole.log("error reporting data")}})}else fkconsole.log("asked to show overlay with unknown show_method.")};e(document).bind("fk_overlay_loaded",function(){fkconsole.log("doc has received a loaded firing loaded"),e(".fk-iframe,#fk-container a.fk-close").fadeIn(500)});var N=function(e){if(fkconsole.info("checking QS for: "+e),""===e)return fkconsole.info("asked to look up empty string in QS. nothing to check so nothing found"),!1;var t=location.search;if(1==l(t,e))return fkconsole.log("in QS found: "+e),!0;var n=decodeURI(t);return 1==l(n,e)?(fkconsole.log("in QS found: "+e),!0):(fkconsole.log("QS does not have: "+e),!1)},I=function(t){fkconsole.log("checking if we can show this feature: "+t.id);var n=a.helpers.wildSearch,o=a.helpers.comareDates,i=a.helpers.numberOfEntriesInJson,r=a.helpers.isIpInRange,s=a.raw.user.visitor,l=a.helpers.stringToJson(t.behavior.dont_show_if_previous_question_has_specific_answer),c=a.helpers.stringToJson(t.behavior.dont_show_if_previous_question_does_not_have_specific_answer),d=a.helpers.stringToJson(t.behavior.dont_show_if_cutom_properties_have_specific_answers),u=new Date;if(0==t.behavior.turned_on)return fkconsole.log("rules are not turned on. in that case we will show the feature.",t.behavior.turned_on),!0;if(0==It())return fkconsole.log("can not show this feature as we only show it to a percentage of customers: ",a.constants.percentageToShowTo),!1;if(0==S(t.id))return!1;if(a.constants.gapLengthInMinutes>j())return fkconsole.log("can not show this feature "+t.id+"as time since a feature was last seen: "+j()+" is less than the gapLength "+a.constants.gapLengthInMinutes),!1;if(a.variables.usageCount<t.behavior.show_after_x_sessions)return fkconsole.log("can not show this feature as it can only be shown after :"+t.behavior.show_after_x_sessions+" sessions and we currently have "+a.variables.usageCount),!1;if(Object.prototype.toString.call(t.behavior.dont_show_after_its_been_seen_x_times).indexOf("Number")>=0&&t.behavior.dont_show_after_its_been_seen_x_times<=O(t.id))return fkconsole.log("can not show this feature as it has already been seen more times than the rule allows, which is: "+t.behavior.dont_show_after_its_been_seen_x_times),!1;if(Object.prototype.toString.call(t.behavior.dont_show_until_used_x_times).indexOf("Number")>=0&&t.behavior.dont_show_until_used_x_times-1>=R(t.id))return fkconsole.log("can not show this feature as it has not been used more times than the rule requires, which is: "+t.behavior.dont_show_until_used_x_times),!1;if(Object.prototype.toString.call(t.behavior.dont_show_when_query_string).indexOf("String")>=0&&N(t.behavior.dont_show_when_query_string)===!0)return fkconsole.log("can not show this feature as QS has: "+t.behavior.dont_show_when_query_string),!1;if(1==Mt(t.behavior.hide_if_referrer_matches)){fkconsole.info("it wants to hide if referrer is: "+t.behavior.hide_if_referrer_matches+t.id);var f=window.document.referrer;if(1==n(f,t.behavior.hide_if_referrer_matches))return fkconsole.log("hidding as the current referrer matches. "+t.id),!1}if(1==Mt(t.behavior.hide_if_referrer_does_not_match)){fkconsole.info("it wants to hide if referrer does not match: "+t.behavior.hide_if_referrer_does_not_match+t.id);var f=window.document.referrer;if(0==n(f,t.behavior.hide_if_referrer_does_not_match))return fkconsole.log("hidding as the current referrer does not match. "+t.id),!1}if(1==Mt(t.behavior.dont_show_if_elem_present)&&e(t.behavior.dont_show_if_elem_present).length>0)return fkconsole.info("found the element on which we dont show, wont attach to: "+t.id),!1;var p=a.variables.visitorSegment;if(fkconsole.log("visitor segment: "+p),fkconsole.log("feature requires segment: "+t.behavior.show_only_if_segment_contains),1==Mt(t.behavior.show_only_if_segment_contains)){if(fkconsole.log("okay so we have specified a required segment"),void 0===p||null===p||""===p)return fkconsole.info("visitors segment doesn't exist. can not show feature as we need segment: ",t.behavior.show_only_if_segment_contains),!1;if(-1==p.indexOf(t.behavior.show_only_if_segment_contains))return fkconsole.info("visitors segment does not contain the string we needed. can not show: ",t.behavior.show_only_if_segment_contains),!1;fkconsole.log("didnt match any stop conditions")}if(1==Mt(t.behavior.dont_show_if_elem_not_present)&&0>=e(t.behavior.dont_show_if_elem_not_present).length)return fkconsole.info("did not find the element which was required for show, wont attach to: "+t.id),!1;if(t.behavior.dont_show_after_received_response===!0&&t.has_received_a_response===!0)return fkconsole.info("feature says no show after response has been received: "+t.id),!1;if(1==Mt(t.behavior.dont_show_before_time)&&-1==o(u,t.behavior.dont_show_before_time))return fkconsole.info("the time now is before the dont_show_before_time. Will not show. "+t.id),!1;if(1==Mt(t.behavior.dont_show_after_time)&&1==o(u,t.behavior.dont_show_after_time))return fkconsole.info("the time now is after the dont_show_after_time. Will not show. "+t.id),!1;if(1==Mt(t.behavior.dont_show_for_range)&&1==r(s.ip_address,t.behavior.dont_show_for_range))return fkconsole.info("Your ip is in the blocked range. Will not show. "+t.id),!1;if(i(l)>0){fkconsole.log("for feature: ",t.id," YES we have json with data");for(var h in l){var g=h,m=l[h];fkconsole.log("dont ask if for widget id: ",g," the answer matches: ",m);var v=a.constants.responsesPerWidgetHash[g];if(v){fkconsole.log("we have previous answers for: ",g," - ",v.join(", "));for(var y=0;v.length>y;y++)if(n(v[y],m))return fkconsole.log("previus answer: "+v[y]+" contains the ans you are looking for. Will STOP"),!1;fkconsole.log("none of the previous answers matched. will continue")}else fkconsole.log("we have NO previous answers for: ",g)}}else fkconsole.log("for feature: ",t.id," NO we do not have json with data");if(i(c)>0){fkconsole.log("for feature: ",t.id," YES we have json with data");for(var h in c){var g=h,m=c[h];fkconsole.log("dont ask if for widget id: ",g," the answer does not matches: ",m);var v=a.constants.responsesPerWidgetHash[g],b=!1;if(v){fkconsole.log("we have previous answers for: ",g," - ",v.join(", "));var k=-1;if(k=m.indexOf("CSV="),k>-1)for(var w=m.substring(k+4),x=w.split(","),_=0;x.length>_;_++)for(var y=0;v.length>y;y++)v[y]===x[_]&&(b=!0);else for(var y=0;v.length>y;y++)n(v[y],m)&&(fkconsole.log("previus answer: "+v[y]+" contains the ans we were looking for"),b=!0);fkconsole.log("none of the previous answers matched. will continue")}else fkconsole.log("we have NO previous answers for: ",g);return 1==b?!0:!1}}else fkconsole.log("for feature: ",t.id," NO we do not have json with data");if(i(d)>0){fkconsole.log("for feature: ",t.id," YES we have Custom Property Rules json data");for(var h=0;d.length>h;h++){var T=d[h],C=T.name,E=T.operator,I=T.value;if(I.indexOf("current_epoch_time")>0){fkconsole.log("input is: "+I);var A=I.indexOf("current_epoch_time"),D=I.indexOf("}}"),L=I.substring(A,D),H=L.split(" ");H=H.filter(function(e){return e}),H[0];var M,P=H[1],z=H[2],F=0,q=Math.round((new Date).getTime()/1e3);z&&(F=60*60*24*z),P?"+"==P?M=q+F:"-"==P&&(M=q-F):M=q,I=M,fkconsole.log("Working on a current_epoch_time string: "+I),fkconsole.log("time_now: "+q),fkconsole.log("operator is: "+P),fkconsole.log("offset_time is: "+F),fkconsole.log("result is: "+M)}else"{{current_day_of_week}}"==I?I=(new Date).getDay():"{{current_date_of_month}}"==I?I=(new Date).getDate():"{{current_number_of_month}}"==I&&(I=(new Date).getMonth());fkconsole.log("dont ask if  the custom property: ",C,"on opertor: ",E," satisfies the value ",I);var U=a.variables.visitorCustomProperties;if(fkconsole.log("visitor has: ",U),"=="==E){if(U[C]==I)return fkconsole.log("matched it. stopping. ",C,U[C],E,I),void 0}else if(">"==E){if(U[C]>I)return fkconsole.log("matched it. stopping. ",C,U[C],E,I),void 0}else if("<"==E){if(I>U[C])return fkconsole.log("matched it. stopping. ",C,U[C],E,I),void 0}else if("!="==E){if(U[C]!=I)return fkconsole.log("matched it. stopping. ",C,U[C],E,I),void 0}else if("Is Present"==E){if(U[C])return fkconsole.log("matched it. stopping. ",C,U[C],E,I),void 0}else if("Is Empty"==E&&!U[C])return fkconsole.log("matched it. stopping. ",C,U[C],E,I),void 0}}else fkconsole.log("for feature: ",t.id," NO we do not have json with data");return t.behavior.dont_show_to_blocked_visitors===!0&&s.blocked===!0?(fkconsole.log("can not show this feature as this visitor is blocked: ",s.blocked),!1):(fkconsole.log("rules PASS, we can show this feature"),!0)},A=function(e,t){fkconsole.log("checking cout of feature: "+t+" in list: "+e);var n=localStorage.getItem("fk-user-"+a.variables.userid+"-"+e),o=JSON.parse(n);return null===o?(fkconsole.log("there is no hash data for list. Giving count 0"),0):o[t]?(fkconsole.log("this feature has data in list. its count is: "+parseInt(o[t])),o[t]):(fkconsole.log("this specific feature has no count in this list. Giving count of 0"),0)},O=function(e){return A("featuresSeen",e)},R=function(e){return A("featuresUsed",e)},D=function(){var e=localStorage.getItem("fk-user-"+a.variables.userid+"-lastTimeFeatureWasSeen");e||(e=0);var t=new Date(parseInt(e));return t},L=function(){fkconsole.log("adding feature "),localStorage.setItem("fk-user-"+a.variables.userid+"-lastTimeFeatureWasSeen",(new Date).getTime())},j=function(){var e=(new Date).getTime(),t=e/1e3/60,n=D().getTime(),o=n/1e3/60;return t-o},H=function(e,t,n){fkconsole.log("setting up feature id: "+t+" to list: "+e+"with val: "+n);var o=localStorage.getItem("fk-user-"+a.variables.userid+"-"+e),i=JSON.parse(o);null===i?(fkconsole.log("there is no listHash. Creating hash and adding it with count 1"),i={},i[t]=n):(fkconsole.log("this specific feature has val: "+i[t]+" We are changing it to: "+n),i[t]=n),fkconsole.log("saving listHash"),localStorage.setItem("fk-user-"+a.variables.userid+"-"+e,JSON.stringify(i))},M=function(e,t){fkconsole.log("adding feature id: "+t+" to list: "+e);var n=localStorage.getItem("fk-user-"+a.variables.userid+"-"+e),o=JSON.parse(n);null===o?(fkconsole.log("there is no listHash. Creating hash and adding it with count 1"),o={},o[t]=1):o[t]?(fkconsole.log("this feature exists in the list and has count of: "+o[t]+". Increasing count by 1"),o[t]=parseInt(o[t])+1):(fkconsole.log("this specific feature is not in list Adding it with a count of 1"),o[t]=1),fkconsole.log("saving listHash"),localStorage.setItem("fk-user-"+a.variables.userid+"-"+e,JSON.stringify(o))},P=function(e){M("featuresUsed",e)},z=function(e){M("featuresSeen",e)},F=function(t){var n=t.action_selector,o=e(n);o.length>0&&1==o.is(":visible")&&void 0===a.variables.viewsSent[t.id]?(a.variables.viewsSent[t.id]=!0,fkconsole.info("SENDING a view event for: "+t.id)):fkconsole.info("NOT sending a view event for: "+t.id)},q=function(){var e=localStorage.getItem("heatItems");return null==e?(fkconsole.log("no data available to upload. will stop"),void 0):(e=JSON.parse(e),c({url:"/users/"+a.variables.userid+"/heats/create_jsonp",data:{heat:e},method:"POST",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: sending heat data"),localStorage.removeItem("heatItems")},error:function(){fkconsole.log("FAILURE: sending heat data"),localStorage.removeItem("heatItems")},timeout:500}),void 0)},U=function(e){fkconsole.log("saving email_from_last_click: "+e+"on visitor: "+a.variables.visitorid),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/update_email_from_last_click",data:{email:e},method:"POST",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: adding email_from_last_click: "+e)},error:function(){fkconsole.log("FAILURE: adding email_from_last_click: "+e)},timeout:15e3})},W=function(e){fkconsole.log("saving domain_from_last_click: "+e+"on visitor: "+a.variables.visitorid),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/update_domain_from_last_click",data:{domain:e},method:"POST",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: adding domain_from_last_click: "+e)},error:function(){fkconsole.log("FAILURE: adding domain_from_last_click: "+e)},timeout:15e3})},$=function(e){fkconsole.log("assing agent: "+e+" for visitor: "+a.variables.visitorid),c({url:"/api/v1/public/assign_agent_to_visitor",data:{user_id:a.variables.userid,visitor_id:a.variables.visitorid,agent_email:e},method:"POST",onlyCors:!0,success:function(e){fkconsole.log("SUCCESS: assigning agent to visitor ",e)
},error:function(){fkconsole.log("FAILURE: unable to add agent to visitor "+e)},timeout:15e3})},B=function(e){fkconsole.log("saving a notes: "+e+"on visitor: "+a.variables.visitorid),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/notes/create_jsonp",data:{body:e},method:"POST",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: adding note: "+e)},error:function(){fkconsole.log("FAILURE: adding note: "+e)},timeout:2e3})},V=function(e,t){fkconsole.log("saving that referrer url: "+e+" which was opened by visitor: "+a.variables.visitorid),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/referrers",data:{referrer:{referrer_url:e,landing_url:t}},method:"POST",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: sending referrer url")},error:function(){fkconsole.log("FAILURE: sending referrer url")},timeout:500})},X=function(t){fkconsole.log("uploading time spent by visitor "+a.variables.visitorid),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/update_time_spent",data:{visitor:{time_spent:a.raw.user.visitor.time_spent}},method:"PUT",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: uploading time"),e(document).trigger("fk-time-has-been-updated",[a.raw.user.visitor.time_spent]);var n=2*t;window.setTimeout(function(){fkconsole.log("added: ",t," time now: ",(new Date).getTime()/1e3),a.raw.user.visitor.time_spent+=t,X(n)},1e3*t)},error:function(){fkconsole.log("FAILURE: uploading time")},timeout:2e3})},G=function(e){fkconsole.log("saving current url: "+e+" which was opened by visitor: "+a.variables.visitorid),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/pages",data:{page:{url:e,title:document.title}},method:"POST",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: sending current url")},error:function(){fkconsole.log("FAILURE: sending current url")},timeout:500})},J=function(e){if(!e.pageX||!e.pageY)return fkconsole.log("not sending heat data as no co-ords"),void 0;var t=a.helpers.roundUp(e.pageX,10),n=a.helpers.roundUp(e.pageY,10),o={x:t,y:n,screen_width:screen.width,screen_height:screen.height,browser_inner_width:window.innerWidth,browser_inner_height:window.innerHeight,url:location.host+location.pathname,user_id:a.variables.userid,visitor_id:a.variables.visitorid},i=JSON.parse(localStorage.getItem("heatItems"))||[];i[i.length]=o,localStorage.setItem("heatItems",JSON.stringify(i))},Y=function(t,n,o,i){"clicked"==t&&P(n),"clicked_and_overlay_shown"==t&&(P(n),z(n),L());var r="/users/"+a.variables.userid+"/features/"+n;"viewed"==t?r+="/visits/create_jsonp":"clicked"==t?r+="/clicks/create_jsonp?overlay_shown=false":"clicked_and_overlay_shown"==t?r+="/clicks/create_jsonp?overlay_shown=true":fkconsole.error("asked to report unknown event!!",t);var l,d,u,f,p;return i&&(l=e(i.currentTarget),l=l.length>0?l.getPath():"",d=e(i.target),d.length>0?(u=e(d.closest("a,input")),u=u.length>0?u.getPath():"",d=d.getPath()):d="",f=i.pageY,p=i.pageX),"65"==a.variables.userid&&"clicked"==t&&"Page"==Ht(n).how?(fkconsole.log("skipping sending click event"),o&&(fkconsole.info("calling callback"),o()),void 0):(c({url:r,data:{visitor_id:a.variables.visitorid,current_target:l,usage_id:a.variables.usageId,target:d,concerning_target:u,page_y:f,page_x:p},success:function(e){fkconsole.log("event has been successfully reported ",e),e&&1==e.overlay_shown&&(fkconsole.log("setting up to upload screenshot when window is closed"),$t(e),fkconsole.log("telling overlay to associate all responses to this click: "+e.id),Vt(e.id),s=e.id)},error:function(e,t,n){fkconsole.error("Error reporting event",e,t,n)},complete:function(){o&&(fkconsole.info("calling callback"),o())},timeout:o?500:7e3}),void 0)},Q=function(){fkconsole.log("THING 6: in setupFeaturesArray"),fkconsole.log("got features: ",a.raw.user.features),a.variables.features=a.raw.user.features,K()},K=function(){var t;for(t=0;a.variables.features.length>t;t++){var n=a.variables.features[t];n.status===!1||a.helpers.doIHaveARealString(n.url)&&0==l(window.document.location.href,n.url)?("Experimental"==n.type&&(Lt(e(n.action_selector)),Lt(e(n.description_selector))),fkconsole.info("feature: "+n.id+", has been removed."+n.status+" - "+n.url),a.variables.features.splice(t,1),t--):(fkconsole.info("feature: "+n.id+", is live and stays"),H("featuresSeen",n.id,n.overlays_shown_count),H("featuresUsed",n.id,n.overlays_triggered_count))}tt()},Z=function(t,n){var o=e(t);o.length>0&&void 0==o.attr("added_fk_click_handler")&&(o.bind("click",n),o.attr("added_fk_click_handler","true")),t&&e(document).on("click",t,function(t){var o=e(t.currentTarget);return"true"==o.attr("added_fk_click_handler")?(fkconsole.log("not processing event at top level as we have a  handler at the local element level"),void 0):(n.call(this,t),void 0)})},et=function(t){fkconsole.log("***** doing setupAction on feature: ",t.id,t.name);var n=e(t.action_selector),o=e(t.description_selector),i=function(n){var o=e(n.currentTarget),i=null,a=o.attr("href");a&&0!=a.indexOf("javascript")&&(n.preventDefault(),i=function(){window.document.location.href=a}),qt(t.id,n,i)};Z(t.action_selector,i),"Experimental"==t.type&&(jt(n),jt(o))},tt=function(){fkconsole.log("THING 7: in setupActionHandlers");var e=0,t=a.variables.features.length;for(e;t>e;e++){var n=a.variables.features[e];"click"==n.show_on&&et(n),F(n)}nt()},nt=function(){fkconsole.log("THING 8: in setupDocumentHandlers"),e(document).on("click",function(e){1==a.constants.recordHeat&&"heatIframe"!=window.name&&J(e),fkconsole.info("there was a click on the page");var t=0,n=a.variables.features.length;for(t;n>t;t++){var o=a.variables.features[t];F(o)}}),e(document).scrollStopped(Ot),e(document).reachedBottom(Dt),e(document).mousedOut(Rt),e(document).betterTrigger("fk-loaded"),e(document).ready(At),e(document).ready(Xt),e(window).resize(Gt),1==a.constants.useMarketing?(e(document).on("fk-start-marketing",function(){e(document).queue(ot)}),e(document).on("fk-stop-marketing",function(){e(document).queue(it)}),fkconsole.log("REACH Marketing Setup = YES")):fkconsole.log("REACH Marketing Setup = NO (Client Not Eligible)"),at()},ot=function(){fkconsole.log("attempting to start marketing to: "),fkconsole.log("user id: "+a.variables.userid),fkconsole.log("visitor id: "+a.variables.visitorid),e.ajax({url:a.constants.domainName+"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/marketings",method:"POST",xhrFields:{withCredentials:!0},error:function(){fkconsole.log("error. unable to start marketing to visitor")},success:function(t){if(t&&t.bucket&&t.bucket.target_code){var n=t.bucket.target_code;a.helpers.doIHaveARealString(n)?(fkconsole.log("success got targetCode: "+n),e("body").append(n)):fkconsole.log("did not got a target code: "+n)}else fkconsole.log("did not get back a marketing record with bucket and target code")},complete:function(){e(document).dequeue()}})},it=function(){fkconsole.log("inside stopMarketing"),e.ajax({url:a.constants.domainName+"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/marketings/stop",method:"POST",xhrFields:{withCredentials:!0},error:function(){fkconsole.log("error. unable to stop marketing to visitor")},success:function(t){if(t&&t.bucket&&t.bucket.exclude_code){var n=t.bucket.exclude_code;a.helpers.doIHaveARealString(n)?(fkconsole.log("success got excludeCode: "+n),e("body").append(n)):fkconsole.log("did not got a excludeCode: "+n)}else fkconsole.log("did not got a marketing record and its bucket so nothing to do in stop")},complete:function(){e(document).dequeue()}})},at=function(){if(fkconsole.log("THING 9: in sendMetaData"),fkconsole.log("will send meta data on visitor like heat, referrer tag, opened via email, notes etc."),vt(),ht(),a.itemUploader.init(),1==a.constants.useMarketing){Et(),Ct(),yt(),bt(),mt(),wt(),lt(),st(),xt(),rt();var e=1;window.setTimeout(function(){fkconsole.log("added: ",e," time now: ",(new Date).getTime()/1e3),a.raw.user.visitor.time_spent+=e,X(e)},1e3*e)}},rt=function(){e("body").append('<img src="https://centro.pixel.ad/iap/009783746a894aca" style="display:none;" />')},st=function(){e("input,select").one("input",function(t){e(t.target).data("fkInputHasChanged",!0)})},lt=function(){var t=e("form.mktoForm"),n=e("form.hs-form"),o=e("#pardot-form"),i=e("form[id^='form_']"),a=e("form[id^='gform_']"),r=e("form");r.size()>0&&ut(r),t.size()>0&&(ct(t),ut(t)),n.size()>0&&(ct(n),ut(n)),o.size()>0&&ft(o),i.size()>0&&ut(i),a.size()>0&&pt(a),e(document).on("click","form.mktoForm input",function(t){var n=e(t.target).closest("form.mktoForm");ct(n),ut(n)}),e(document).on("click","form.hs-form input",function(t){var n=e(t.target).closest("form.hs-form");ct(n),ut(n)}),e(document).on("click","form[id^='form_']",function(t){var n=e(t.target).closest("form[id^='form_']");ut(n)})},ct=function(e){0==e.find("input[name^='listenloop']").size()&&dt(e)},dt=function(e){e.append("<input type='hidden' name='listenloop_id' value='"+a.variables.visitorid+"' />"),e.append("<input type='hidden' name='listenloop_link' value='"+a.variables.visitorUrl+"' />")},ut=function(e){e.find("input[name='listenloop_id']").val(a.variables.visitorid),e.find("input[name='listenloop_link']").val(a.variables.visitorUrl),e.find("input[name='listenloopid']").val(a.variables.visitorid),e.find("input[name='listenlooplink']").val(a.variables.visitorUrl),e.find("input[name='submitted[listenloop_link]']").val(a.variables.visitorUrl),e.find("input[name='submitted[listenloop_id]']").val(a.variables.visitorid)},ft=function(e){e.find("p.listenloop_id.hidden input").val(a.variables.visitorid),e.find("p.listenloop_link.hidden input").val(a.variables.visitorUrl)},pt=function(e){var t=e.find("input.gform_hidden[type='hidden'][name^='input_'][value='']:eq(0)"),n=e.find("input.gform_hidden[type='hidden'][name^='input_'][value='']:eq(1)");""==t.val()&&""==n.val()&&(t.val(a.variables.visitorid),n.val(a.variables.visitorUrl))},ht=function(){1==a.constants.recordHeat?q():localStorage.removeItem("heatItems")},gt=function(e){c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/update_uses_ad_blocker",data:{uses_ad_blocker:e},method:"PUT",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: uses_ad_blocker")},error:function(){fkconsole.log("FAILURE: uses_ad_blocker")},timeout:2e3})},mt=function(){var e,t=(new Date).getTime();c({url:"/api/v1/public/advertisement?&advertiserid=true",method:"get",success:function(){fkconsole.log("no ad blocker detected"),e=!1,a.variables.visitorUsesAdBlocker!=e&&gt(e)},error:function(){var n=(new Date).getTime(),o=n-t;o>=5e3?fkconsole.log("this is a timeout. Not sure if ad blocker is on or off"):(fkconsole.log("ad blocker is ON!! "+o),e=!0,a.variables.visitorUsesAdBlocker!=e&&gt(e))},timeout:15e3})},vt=function(){fkconsole.log("Inside - setupUploadingViaEmail");var e=a.helpers.getUrlParameter("agent_email");a.helpers.doIHaveARealString(e)?(fkconsole.log("found a agent_email. will make notification email entry"),e=unescape(e),$(e)):fkconsole.log("no agent_email provided");var t=a.helpers.getUrlParameter("fk_via_email");a.helpers.doIHaveARealString(t)?(fkconsole.log("found a via email. will save note on visitor"),t=unescape(t),B("Loaded page ("+window.location.pathname+") with a param "+"indicating that he clicked on an email which was sent to: "+t+" and assigned to agent: "+e),U(t)):fkconsole.log("no via email provided");var n=a.helpers.getUrlParameter("fk_via_domain");a.helpers.doIHaveARealString(n)?(fkconsole.log("found a via email. will save note on visitor"),n=unescape(n),B("Loaded page ("+window.location.pathname+") with a param "+"indicating that he clicked on an email which was sent with: "+n+" and assigned to agent: "+e),W(n)):fkconsole.log("no via domain provided")},yt=function(){var e=window.document.location.href,t=window.document.location.hostname,n=window.document.referrer,o=document.createElement("a");o.href=n;var i=o.hostname;fkconsole.log("inspecting hosts "+t+" - "+i),a.helpers.doIHaveARealString(i)&&t!=i?(fkconsole.log("saving referrer host"),V(n,e)):fkconsole.log("NOT saving referrer host as it matches current referrer")},bt=function(){var e=window.document.location.href;window.setTimeout(function(){fkconsole.log("its been 2 seconds on this page. Lets save it"),G(e)},2e3)},kt=function(t){var n=a.raw.user.marketo_handle,o=a.raw.user.munchkin_id,i=a.raw.user.marketo_form_id,r=e.cookie("_mkto_trk");if(!(n&&o&&i&&r))return fkconsole.log("skipping sending data to marketo as integration is not present"),void 0;var s=a.helpers.areWeOnSSL(),l="http://";1==s&&(l="https://");var c=l+n+".marketo.com/index.php/leadCapture/save";fkconsole.log("marketo_url",c);var d={munchkinId:o,formid:i,_mkto_trk:r,_mkt_trk:r,listenloopid:a.variables.visitorid,listenlooplink:a.variables.visitorUrl};e.extend(d,t),e.ajax({url:c,crossDomain:!0,data:d,method:"POST",success:function(){fkconsole.log("SUCCESS: sending data to marketo")},error:function(){fkconsole.log("FAILURE: sending data to marketo")},timeout:15e3})},wt=function(){var t=a.raw.user.css_selector_of_forms_to_sync;t&&e(t).submit(function(t){t.preventDefault();for(var n,o,i,r,s,l,d=this,u=e(this).find("input"),f=0;u.length>f;f++){u.eq(f);var p=u.eq(f).attr("name"),h=u.eq(f).val();p&&h&&(p=p.toLowerCase(),p.indexOf("company")>=0?i=h:p.indexOf("name")>=0?n=h:p.indexOf("phone")>=0?s=h:p.indexOf("title")>=0?r=h:p.indexOf("email")>=0&&(o=h))}if(!o){fkconsole.log("upon intercept of form was not able to able to find any email field");for(var f=0;u.length>f;f++){u.eq(f);var h=u.eq(f).val();if(h.indexOf("@")>0&&h.indexOf(".")>0&&h.indexOf("@")<h.indexOf(".")&&h.length>=5){o=h;break}}fkconsole.log("after brute searching for email got: "+o)}l=window.location.href,c({url:"/users/"+a.raw.user.id+"/visitors/"+a.raw.user.visitor.id+"/self_submitted_data",method:"POST",data:{self_submitted_data:{name:n,email:o,company_name:i,job_title:r,phone_number:s,url:l}},timeout:2e3,complete:function(){d.submit()}})})},xt=function(){var e=a.raw.user.page_data_mapping;if(!e)return fkconsole.log("no page data mapping found on the user. nothing to process"),void 0;try{e=JSON.parse(e)}catch(t){return fkconsole.error("error while parsing page data mapping"),void 0}for(var n,o,i,r,s,l,c=a.helpers.doIHaveARealString,d=0;e.length>d;d++)n=e[d],n.source&&n.target?n.status?c(n.source.url)&&c(n.source.css_selector)&&c(n.source.attribute_to_read)&&c(n.target)?(i=n.source.label,r=n.source.url,s=n.source.css_selector,l=n.source.attribute_to_read,tempRegex=n.source.regex,o=n.target,fkconsole.log("will get and store data on regular intervals",r,s,l,o,tempRegex,i),window.setInterval(_t.bind(void 0,r,s,l,o,tempRegex),a.constants.domPollTimeForPageData)):fkconsole.log("this source/target dont have the required attribtues. skipping it"):fkconsole.log("this mapping is off. means customer has deleted it. skipping it",n.source.label):fkconsole.log("this mapping doesn't have source target combo. skipping it")},_t=function(t,n,o,i,r){fkconsole.log("on url:"+t+" will query ",n," for ",o," which passes regex ",r," and save it in: ",i);var s,l,c=e(n),d=a.helpers.wildSearch,u=a.helpers.doIHaveARealString,f=window.document.location.href;return d(f,t)?0==c.length?(fkconsole.log("did not find the element. nothing can be read"),void 0):(s=Tt(c,o,r),fkconsole.log("read a value of: ",s),fkconsole.log("already saved value is: ",a.variables.visitorPageData[i]),a.variables.visitorPageData[i]==s?(fkconsole.log("will not save data as we already have it"),void 0):0==u(s)?(fkconsole.log("will not save data as it is empty"),void 0):(a.variables.visitorPageData[i]=s,l={},l.page_data={},l.page_data[i]=s,fkconsole.log("adding page_data to localstorage so it gets uploaded",l),a.itemUploader.addItem(a.constants.domainName+"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/page_data",l),void 0)):(fkconsole.log("the url doesn't match. will not read"),void 0)},Tt=function(e,o,i){for(var r="",s=a.helpers.doIHaveARealString,l=0;e.length>l;l++)if(tempElem=e.eq(l),tempElemValue=n(tempElem,o),fkconsole.log("value read: ",tempElemValue),0!=s(tempElemValue)){if(0!=t(tempElemValue,i)){r=tempElemValue;break}fkconsole.log("value does not match the provided regex. will go to next one")}else fkconsole.log("value is no good as its not string. will go to next one");return fkconsole.log("returning value:",r),r},Ct=function(){for(var e,t=a.raw.user.navigation_items,n=window.document.location.href.split("?")[0],o=0;t.length>o;o++)if(e=t[o],0!=e.active&&n.indexOf(e.url)>=0){fkconsole.log("you are on a nav item: ",e.id,e.url),St(e.id);break}},St=function(e){fkconsole.log("saving navigation_item_id: "+e+"on visitor: "+a.variables.visitorid),c({url:"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/update_last_visited_navigation_item_id",data:{last_visited_navigation_item_id:e},method:"POST",onlyCors:!0,success:function(){fkconsole.log("SUCCESS: updating last_visited_navigation_item_id: "+e)},error:function(){fkconsole.log("FAILURE: updating last_visited_navigation_item_id: "+e)},timeout:15e3})},Et=function(){for(var t,n=a.raw.user.events,o=a.helpers.wildSearch,i=a.helpers.doIHaveARealString,r=window.document.location.href,s=0;n.length>s;s++)if(t=n[s],0!=t.status)if("load"==t.action){fkconsole.log("processing user event with action 'Load'");var l=!1;if(t.pattern&&t.pattern.length>0)fkconsole.log("testing by pattern"),patternRegExp=RegExp(t.pattern,"i"),l=patternRegExp.test(r);else{if(!(t.url&&t.url.length>0)){fkconsole.log("got load event with no url or pattern");continue}fkconsole.log("testing by wild search"),l=o(r,t.url)}var c=!1;if(t.css_selector&&t.css_selector.length>0?(fkconsole.log("got css selector"),c=e(t.css_selector).length>0?!0:!1):(fkconsole.log("there was no css selector"),t.css_selector="html",c=e(t.css_selector).length>0?!0:!1),fkconsole.log("current_url_passes: "+l),fkconsole.log("css_selector_passes: "+c),l&c){(function(e){window.setTimeout(function(){Nt(e,r)},1e3*e.time)})(t);continue}fkconsole.log("not reporting Load event as url and css didn't allow")}else if("click"==t.action){var l=!1;if(t.pattern&&t.pattern.length>0)fkconsole.log("testing by pattern"),patternRegExp=RegExp(t.pattern,"i"),l=patternRegExp.test(r);else{if(!(t.url&&t.url.length>0)){fkconsole.log("got load event with no url or pattern");continue}fkconsole.log("testing by wild search"),l=o(r,t.url)}if(l){fkconsole.log("setting up on: "+t.css_selector+" for id: "+t.id),function(n){e(document).on("click",t.css_selector,function(){fkconsole.log("calling the callback with id: "+n.id),Nt(n,r)})}(t);continue}fkconsole.log("not reporting Click event as url didn't allow")}else"response_received"==t.action?function(t){e(document).on("fk-on-response-received",function(e){fkconsole.log("recevied a response on conversation: "+e.originalEvent.detail.feature_id),e.originalEvent.detail.feature_id==t.feature_id&&(fkconsole.log("triggering "+t.id+"as it had feature_id setup to be: "+t.feature_id),Nt(t,""))})}(t):"email_clicked"==t.action?function(e){fkconsole.log("processing email clicked event. Checking: "+window.document.location.search),window.document.location.search.indexOf("fk_email_clicked")>=0&&1==o(r,e.url)&&(fkconsole.log("triggering "+e.id+" as the url had the words "+" fk_email_clicked and the url matched: "+e.url),Nt(e,""))}(t):"ip_address"==t.action?function(e){var t=a.helpers.isIpInRange,n=a.raw.user.visitor;fkconsole.log("processing range event: "+e.id),fkconsole.log("our ip is: "+n.ip_address),fkconsole.log("range being checked against: "+e.range),t(n.ip_address,e.range)?(fkconsole.log("triggering "+e.id+" as ip is inside the range"),Nt(e,"")):fkconsole.log("not triggering "+e.id+" as ip is not in range")}(t):"wistia_play"==t.action?function(t){fkconsole.log("processing wisita play trigger: "+t.id),fkconsole.log("for wistia_code: "+t.wistia_code);var n=e("iframe[src*='"+t.wistia_code+"']")[0];if(!n)return fkconsole.log("could not find iframe video"),void 0;var o=n.wistiaApi;return o?(o.bind("play",function(){fkconsole.log("triggering "+t.id+" as got a play event"),Nt(t,"")}),void 0):(fkconsole.log("could not find Wistia API"),void 0)}(t):"wistia_conversion"==t.action?function(t){fkconsole.log("processing wisita conversion trigger: "+t.id),fkconsole.log("for wistia_code: "+t.wistia_code);var n=e("iframe[src*='"+t.wistia_code+"']")[0];if(!n)return fkconsole.log("could not find iframe video"),void 0;var o=n.wistiaApi;return o?(o.bind("conversion",function(){fkconsole.log("triggering "+t.id+" as got a conversion event"),Nt(t,"")}),void 0):(fkconsole.log("could not find Wistia API"),void 0)}(t):"wistia_popover_play"==t.action?function(t){fkconsole.log("processing wisita popover play trigger: "+t.id),fkconsole.log("for wistia_code: "+t.wistia_code);var n="a[href*='"+t.wistia_code+"']";e(document).on("click",n,function(){fkconsole.log("clicked on the popover link setup on trigger: "+t.id),Nt(t,"")})}(t):"browser"==t.action?function(e){var t=window.navigator.userAgent;fkconsole.log("processing browser trigger: "+e.id),fkconsole.log("for user agent: "+t+" - "+e.user_agent),i(e.user_agent)&&t.match(e.user_agent)?(fkconsole.log("users ua matches that of the trigger : "+t+" - "+e.user_agent),Nt(e,"")):fkconsole.log("user agent is no match")}(t):"time_spent"==t.action?function(t){fkconsole.log("processing time spent trigger with: "+t.id+" and cut off value of: "+t.value),i(t.value)?(fkconsole.log("we need to save trigger when visitor time_spent is: "+t.value),fkconsole.log("current time spent by visitor is at: "+a.raw.user.visitor.time_spent),e(document).on("fk-time-has-been-updated",function(n,o){fkconsole.log("time has been updated to ",o),a.raw.user.visitor.time_spent>t.value&&(fkconsole.log("since time is higher than what is required in rule, firing rule"),Nt(t,""),e(document).off("fk-time-has-been-updated"))})):fkconsole.log(" -- ")}(t):"stop_command"==t.action?fkconsole.log("nothing to do for backend stop command being setup"):fkconsole.log("can not process event as its action is unknown: "+t.action)},Nt=function(e,t){fkconsole.log("saving userEvent : "+e.id+"which was triggered by visitor: "+a.variables.visitorid),fkconsole.log("adding item to itemUploader");var n={};n.event_id=e.id,n.url=t,a.itemUploader.addItem(a.constants.domainName+"/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/triggers",n,"POST")},It=function(){var e;return function(){if(e!==void 0)return fkconsole.log("returning memoized value: ",e),e;fkconsole.log("calculating as result was: ",e);var t=Math.floor(100*Math.random())+1;return e=a.constants.percentageToShowTo>=t?!0:!1,fkconsole.log("updated result to: ",e),e}}(),At=function(){fkconsole.info("window has loaded");var t,n,o=a.variables.features.length;for(t=0;o>t;t++)if(n=a.variables.features[t],"on_win_load"==n.show_on){var i=e(n.action_selector);"popover"==n.show_method&&(n.action_selector="#fk-feedback-tab.fkstrap div#hidden-div"),0==Ft()&&i.length>0&&qt(n.id)}},Ot=function(){fkconsole.info("scroll stopped");var t=0,n=a.variables.features.length;for(t;n>t;t++){var o=a.variables.features[t];if("scroll_into_view"==o.show_on){var i=e(o.action_selector);0==Ft()&&i.length>0&&1==i.isElementInViewport()&&void 0==a.variables.scrolledInAndTriggered[o.id]&&(a.variables.scrolledInAndTriggered[o.id]=!0,qt(o.id))}}},Rt=function(e){fkconsole.log("doing what i am supposed to do when i moused out");var t=0,n=a.variables.features.length;for(t;n>t;t++){var o=a.variables.features[t];if("on_moused_out"==o.show_on){if(fkconsole.log("found a feature which should be shown on moused_out: ",o.id),0==Ft()&&void 0==a.variables.pageMousedOutAndTriggered[o.id])return fkconsole.info("showing by the grace of moused out: "+o.id),a.variables.pageMousedOutAndTriggered[o.id]=!0,e.target=".fkfloatingimage",qt(o.id,e),void 0;fkconsole.log("not showing. overlayOpen: "+Ft()+" f.id: "+o.id+" and already done on page mouse out: "+a.variables.pageMousedOutAndTriggered[o.id])}}},Dt=function(){fkconsole.log("doing what i am supposed to do when i reach bottom");var t=0,n=a.variables.features.length;for(t;n>t;t++){var o=a.variables.features[t];if("scroll_to_bottom"==o.show_on){var i=e(o.action_selector);if("popover"==o.show_method&&(o.action_selector="#fk-feedback-tab.fkstrap div#hidden-div"),0==Ft()&&i.length>0&&void 0==a.variables.scrolledToBottomAndTriggered[o.id])return fkconsole.info("showig by the grace of scrolled  to bottom: "+o.id),a.variables.scrolledToBottomAndTriggered[o.id]=!0,qt(o.id),void 0}}},Lt=function(e){e.addClass("fk-hide").hide()},jt=function(e){e.removeClass("fk-hide").show()},Ht=function(e){for(var t=null,n=0;a.variables.features.length>n;n++)if(a.variables.features[n].id==e)return t=a.variables.features[n];return t},Mt=function(e){return e&&Object.prototype.toString.call(e).indexOf("String")>0&&e.length>0&&"null"!=e&&"undefined"!=e?!0:!1},Pt=function(e){return e&&Object.prototype.toString.call(e).indexOf("Object")>0&&e.feature_id&&parseInt(e.feature_id)>0?!0:!1},zt=function(e){return e&&Object.prototype.toString.call(e).indexOf("Function")>0?!0:!1},Ft=function(){return e("#fk-container").is(":visible")},qt=function(e,t,n){var o=Ht(e);"Existing"==o.type?a.showOverlay({feature_id:e,e:t,onClose:n}):"Experimental"==o.type?(fkconsole.log("adding force as feature is experimental"),a.showOverlay({feature_id:e,force:!0,e:t,onClose:n})):fkconsole.info("error: passed in feature kind I dont recognize")};a.showOverlay=function(t){if(0==Pt(t))throw Error("Illegal arguments passed to showOverlay.");var n=t.force,o=t.onClose;0==zt(o)&&(o=null);var i=t.feature_id;i=parseInt(i);var a=Ht(i);if(null==a)return console.error("No such feature found."),void 0;var r=t.onSelector,s=I(a);return 1==n&&(s=!0),fkconsole.log("rules say: "+s),s?(fkconsole.info("opening overlay and saving data"),"on_moused_out"==a.show_on&&"popover"==a.show_method?(fkconsole.log("showing image"),window.setTimeout(function(){e("#fk-floatingImageContainer").show(),e("#fk-floatingImageContainer .fkfloatingimage").css("top",2),e("#fk-floatingImageContainer .fkfloatingimage").css("left",t.e.pageX)},a.delay)):(e("#fk-floatingImageContainer").hide(),e(".popoverNextToFloatingImage").hide()),window.setTimeout(function(){E(a.id,r,t.e),fkconsole.log("delay is "+a.delay),Y("clicked_and_overlay_shown",a.id,null,t.e),null!==o&&e(document).one("fk-overlay-closed",o)},a.delay),!0):(o?Y("clicked",a.id,o,t.e):Y("clicked",a.id,null,t.e),fkconsole.info("not showing overlay"),!1)};var Ut=function(){e(document).on("fk-on-response-received",function(e){var t=e.originalEvent.detail;if(fkconsole.log(t),"form"==t.widget_name){var n,o,i,a;fkconsole.log(t.answer);var r=JSON.parse(t.answer);fkconsole.log(r);for(var s in r)fkconsole.log(s),s.toLowerCase().indexOf("phone")>=0?i=r[s]:s.toLowerCase().indexOf("company")>=0?o=r[s]:s.toLowerCase().indexOf("email")>=0?a=r[s]:s.toLowerCase().indexOf("name")>=0&&(n=r[s]);fkconsole.log(n,o,i,a),kt({FirstName:n,Company:o,Phone:i,Email:a})}"email"==t.widget_name&&(fkconsole.log(t.answer),kt({Email:t.answer}))})},Wt=function(){window.addEventListener&&window.addEventListener("message",function(t){var n="fk-overlay-says-response-received=",i=""+t.data;if(0==i.indexOf(n)){var s=i.substring(n.length);s=JSON.parse(s);var l=Ht(s.feature_id),c="";l&&(c=l.name),s.feature_name=c,s.visitor={id:a.variables.visitorid,segment:a.variables.visitorSegment,hash:a.variables.visitorHash,email:a.variables.visitorEmail,custom_properties:a.variables.visitorCustomProperties};var d=s.feature_id;d=parseInt(d),fkconsole.log("overlay says we have received response from: "+d);var u=Ht(d);if(fkconsole.log("found feature: "+u),null==u)return console.error("No such feature found."),void 0;fkconsole.log("exisiting response flag: "+u.has_received_a_response),u.has_received_a_response=!0,fkconsole.log("exisiting response flag: "+u.has_received_a_response),e(document).betterTrigger("fk-on-response-received",s)}var f="fk-overlay-says-click_id_received=true";0==i.indexOf(f)&&(fkconsole.log("ovelerlay has received click id. we can now stop sending it again and again"),window.clearInterval(o),r=0);var f="fk-overlay-says-close-me=true";0==i.indexOf(f)&&e.fkmodal.close()},!1)},$t=function(t){e("#fk-overlay,#fk-container,#fk-popovercontainer").attr("data-html2canvas-ignore","true");var n=Ht(t.feature_id);if(0==n.take_screenshot)return fkconsole.log("not taking screenshot"),!1;try{html2canvas(document.body,{onrendered:function(n){var o=n.getContext("2d"),i=t.page_x,r=t.page_y,s=20;o.beginPath(),o.arc(i,r,s,0,2*Math.PI,!1),o.fillStyle="rgba(0,0,0,0.5)",o.fill(),o.lineWidth=1,o.strokeStyle="rgba(0,0,0,1)",o.stroke();var l=n.toDataURL("image/png");e.ajax({url:a.constants.domainName+"/api/v1/public/screenshot",method:"POST",data:{data_uri:l,click_id:t.id},timeout:2e3,xhrFields:{withCredentials:!0},complete:function(){fkconsole.log("completed request which uploads screenshot to server")}})}})}catch(o){fkconsole.log("error happened while trying to take screenshot")}},Bt=function(e,t){var n=e.src.indexOf("#"),o=e.src;n>-1&&(o=o.substr(0,n)),e.src=o+"#"+t},Vt=function(t){if(fkconsole.log("SENDING click id to overlay: "+t),"function"==typeof window.postMessage){try{r+=1,e("#fk-iframe")[0].contentWindow.postMessage("clients-app-says-click-id-is="+t,"*")}catch(n){fkconsole.log("error posting to iframe that we have received a response",n)}5>r?o=window.setTimeout(Vt,1e3,t):r=0}else{var i=document.getElementById("fk-iframe");r+=1,Bt(i,t),10>r?o=window.setTimeout(Vt,1e3,t):r=0}},Xt=function(){fkconsole.log("page has loaded and we can now show survey");var e=window.location.search.split("fks=")[1];if(!e)return fkconsole.log("no fks found. no survey to show on load"),void 0;var t=Ht(e);return t?("Email"==t.location?(fkconsole.log("meets requirements. attempting to show overlay"),qt(e)):fkconsole.log("not going to show overlay on this page",t.location,t.url),void 0):(fkconsole.log("no such feature found. no survey to process"),void 0)},Gt=function(){fkconsole.log("captured resize event, checking if popover is showing");var t=e(".make-popover-fixed");t.length>0&&e(t).hide()},Jt=function(){fkconsole.log("inside create and show feedback tab");var t=window.fk.templates.feedbackTab.clone();e("body").append(t)},Yt=function(){fkconsole.log("inside hide feedback tab"),e("a#fk-feedback-tab").addClass("hideFeedbackTab"),e("div#hidden-div").addClass("moveHiddenDiv")},Qt=function(){var t=a.raw.user.message;if(t){var n=window.fk.templates.messageContainer.clone();n.find("[data-paramname='user-image']").attr("src",a.raw.user.image_url),n.find("[data-paramname='body']").html(FkAutolinker.link(t.body)),n.find("[data-paramname='body']").attr("data-messageid",t.id),n.find("[data-paramname='body']").attr("data-responseid",t.response_id),n.css("display","block"),e("body").append(n),window.setTimeout(a.markMessageDisplayed,5e3)}};a.markMessageDisplayed=function(){var e=fk$("#fk-messagecontainer [data-paramname='body']").data("messageid");if(e){var t=fk$("#fk-messagecontainer [data-paramname='body']").data("markeddisplayed");if(1!=t){var n="/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/messages/"+e+"/mark_displayed";c({url:n,method:"PUT",success:function(){fkconsole.log("SUCCESS: marking message displayed"),fk$("#fk-messagecontainer [data-paramname='body']").attr("data-markeddisplayed",!0)},error:function(){fkconsole.log("ERROR: marking message displayed")}})}}},a.createMessageResponse=function(){var t=fk$("#fk-messagecontainer [data-paramname='body']").data("responseid"),n=e("#fk-messagecontainer [data-paramname='response']").val();if(n){var o="/users/"+a.variables.userid+"/visitors/"+a.variables.visitorid+"/messages/create_inbound_message";c({url:o,data:{message:{body:n,response_id:t}},method:"POST",success:function(){fkconsole.log("SUCCESS: creating message reponse")},error:function(){fkconsole.log("ERROR: creating message response")}})}};var Kt=function(){var t=window.fk.templates.floatingImageContainer.clone();t.find("[data-paramname='user-image']").attr("src",a.raw.user.image_url),e("body").append(t)
},Zt=function(){var e,t,n,o,i,r={};e=a.raw.user.visitor,t=e.responses;for(var s=0;t.length>s;s++)n=t[s],o=n.widget_id,i=n.answer,r[o]?r[o].push(i):r[o]=[i];return r};d(),h(),Wt(),Ut(),e("body").append('<div id="fk-popovercontainer" class="fkstrap"></div>'),e(document).on("click",function(t){fkconsole.log("on doc click to which does hidding of popovers");var n=e(t.target),o=e("[showingpopover=true]"),i=e("#fk-popovercontainer .popover-content");if(fkconsole.log("popover element is: ",i),fkconsole.log("element clicks on is: ",n),fkconsole.log("does popover contain element clicked: ",i.find(n)),0==i.length)return fkconsole.log("no popover element is being show"),fkconsole.log("nothing to hide"),void 0;var a=!1;i.find(n).length>0&&(fkconsole.log("you clicked inside a popover"),a=!0);var r=!1;i.is(n)===!0&&(fkconsole.log("you clicked on the popover"),r=!0);var s=!1;"true"==n.attr("showingpopover")&&(fkconsole.log("you clicked on an element which showed the popover"),s=!0);var l=!1;o.find(n).length>0&&(fkconsole.log("you clicked inside the element which triggers the popover"),l=!0),a||r||s||l?fkconsole.log("will not destroy"):(fkconsole.log("will destroy"),e("[showingpopover=true]").popover("destroy"),e("[showingpopover=true]").removeAttr("showingpopover"),e("#fk-floatingImageContainer").hide(),e(document).betterTrigger("fk-overlay-closed"))}),e(document).on("click",".fk-cont [data-action]",function(t){fkconsole.log("show next");var n,o,i,r,l=e("[showingpopover=true]"),d=l.data("popoverstemplate"),u=d.length,f=l.data("currentlyshowingwidgetindex"),p=e("#fk-popovercontainer .popover-content"),h=p.find("[data-widgetid]").attr("data-widgetid"),g=p.find("[data-widgetid]").attr("data-widgetname"),m=p.find("[data-featureid]").attr("data-featureid"),v=a.getInputedValue(p,t),y=a.getQuestionValue(p,t),b=Ht(m);if(b.has_received_a_response=!0,1==e(t.currentTarget).data("skip"))fkconsole.log("you clicked on skip. will just move on");else{if(1!=a.validateInputedValue(v,g))return fkconsole.log("wont move forward coz data is invalid"),p.find(".fk-invalidinput").show().delay(5e3).fadeOut(),void 0;fkconsole.log("we got data"),c({context:this,url:"/widgets/"+h+"/responses/create_jsonp",data:{answer:v,visitor_id:a.variables.visitorid,click_id:s},success:function(){e(document).betterTrigger("fk-on-response-received",{question:y,answer:v,feature_id:m,widget_id:h,widget_name:g,widget_index:f,toal_num_of_widgets:u,feature_name:Ht(m).name,visitor:{id:a.variables.visitorid,segment:a.variables.visitorSegment,hash:a.variables.visitorHash,email:a.variables.visitorEmail,custom_properties:a.variables.visitorCustomProperties}}),fkconsole.log("data has been reported")},error:function(){fkconsole.log("error reporting data")}})}if("1"==e(this).data("close"))return fk$(document).click(),void 0;var k=a.getNextWidgetIdAsPerBranch(p,v);k?(n=a.getIndexOfWidget(l,k),void 0==n&&(n=f+1)):n=f+1,i=f-1,r="-1"==e(this).data("go")?i:"1"==e(this).data("go")?n:n,o=d[r].find("[data-widgetid]").attr("data-widgetname"),"thankyou"==o&&(fkconsole.log("just showed a thank you widget. will hide now"),window.setTimeout(function(){e(document).betterTrigger("fk-on-thankyou"),fk$(document).click()},2500)),window.setTimeout(function(){l.data("bs.popover").options.content=d[r].html(),l.popover("show"),e(document).trigger("fk_popover_widget_displayed"),l.data("currentlyshowingwidgetindex",r),t.stopPropagation()},250)})})}(fk$),function(e){void 0===window.fk&&(window.fk={}),void 0===window.fk.messaging&&(window.fk.messaging={}),window.fk.messaging,window.fk.templates,e(document).on("click","#fk-messagecontainer button.close",function(){fk.markMessageDisplayed(),t()}),e(document).on("click","#fk-messagecontainer button[data-paramname='send']",function(){var n=e("#fk-messagecontainer [data-paramname='response']").val();n.length>0?(e("#fk-messagecontainer .fk-validinput").show(),fk.markMessageDisplayed(),fk.createMessageResponse(),t()):e("#fk-messagecontainer .fk-invalidinput").fadeIn().delay(500).fadeOut()});var t=function(){e("#fk-messagecontainer").fadeOut(function(){e("#fk-messagecontainer").remove()})}}(fk$),function(e){function t(){var t=e("<div id='fk-messageInIframe'></div>");e("body").append(t),t.on("mousemove",function(){"auto"==t.css("top")?(t.css("top","5px"),t.css("bottom","auto")):(t.css("top","auto"),t.css("bottom","5px"))})}function n(){var n=e("<div id='fk-welcomeMessageInIframe'>Hover over and right click any element in your <br/>application to setup your conversation trigger.</div>");e("body").append(n),window.setTimeout(function(){e("body").one("mousemove",function(){n.fadeOut(),i(),t()})},1e3)}var o=void 0,i=function(){function t(e){var t,n;return n=e.closest("a"),n.length>0&&(e=n),t=e.getPath()}function n(e){if(e&&e.length>0&&e.indexOf(">")>0){var t=e.split(">"),n=t[t.length-1];return n}return e}function o(e){var t=e.prop("tagName"),n=e.attr("type");return t=t?t.toUpperCase():"",n?n=n.toUpperCase():typee="","INPUT"==t&&"SUBMIT"==n?!1:!0}var i,a,r="5px solid #C40233",s="5px solid #FF0000";e(document).on("mousemove",function(l){(i||a)&&i.css("outline",a);var c=t(e(l.target));i=e(c),e("#fk-messageInIframe").html("<div class='selectors'>Target Element: "+n(c)+"<br/>"+"Full Selector: "+c+"</div>"),a=i.css("border"),1==o(i)?(i.css("outline",r),e("#fk-messageInIframe").append("<div class='yellow'>Right click to select the element.</div>")):(i.css("outline",s),e("#fk-messageInIframe").append("<div class='yellow'>You should not trigger a conversation on this element as it will be in the critical path of submitting a form. Instead have the conversation on load of this form's confirmation page. For step by step instructions visit help.listenloop.com</div>"))}),e(document).on("contextmenu",function(n){if(n.preventDefault(),0!=o(i)){e(n.target);var a=t(e(n.target)),r=window.document.location.href;window.top.postMessage("fk-action-selector="+a,"*"),window.top.postMessage("fk-url-feature-setup-on="+r,"*"),alert("You have selected: "+a)}})};window!=top&&(fkconsole.log("asking top via message if in dashboard"),window.top.postMessage("am-i-in-fk-dashboard","*"),fkconsole.log("telling top via message my url"),window.top.postMessage("fk-heatmap-showing-url="+location.host+location.pathname,"*")),e(window).on("message",function(e){var t=e.originalEvent,o=t.data;"yes-in-fk-dashabord=wysiwyg"==o?(fkconsole.log("told that this is dashboard - w"),n(),window.top.postMessage("fk-wysiwyg-loaded=true","*")):"yes-in-fk-dashabord=liveview"==o&&window.top.postMessage("fk-wysiwyg-loaded=true","*")}),e(window).on("message",function(t){var n=t.originalEvent,i=n.data;if(!i||"string"!=typeof i)return fkconsole.log("got unusable data object. its not mine. moving on"),void 0;if(0==i.indexOf("fk-heatmap-on=")){fkconsole.log("told to turn heatmap on");var a=i.split("fk-heatmap-on=")[1];a=JSON.parse(a);var r=a.width,s=a.visitor_id,l=location.host+location.pathname;if(l=prompt("Will Load Heat data for (use * for wild card matches): ",l),null==l)return;e.ajax(fk.constants.domainName+"/users/"+fk.variables.userid+"/heats/heatmap_data_for_url",{type:"GET",xhrFields:{withCredentials:!0},data:{heat:{url:l,width:r,visitor_id:s}},success:function(e){if(fkconsole.log("got heatmap data: ",e),o&&(o.cleanup(),o.clear()),0==e.data.length)alert("No Heat to Show");else{alert("Showing "+e.data.length+" points of heat data for "+e.width+" width.");var t={element:window.document.body,visible:!1};window.top.postMessage("fk-heatmap-adjust-width="+e.width,"*"),o=fkHeatmapFactory.create(t),o.store.setDataSet(e),o.toggleDisplay()}}})}else"fk-heatmap-off"==i&&(fkconsole.log("told to turn heatmap off"),o&&(o.cleanup(),o.clear(),o=void 0))})}(fk$),function(e,t,n){"use strict";function o(e,t,n){var o,i=e.runtimeStyle&&e.runtimeStyle[t],a=e.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(o=a.left,i&&(e.runtimeStyle.left=e.currentStyle.left),a.left="fontSize"===t?"1em":n||0,n=a.pixelLeft+"px",a.left=o,i&&(e.runtimeStyle.left=i)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function i(e){return parseInt(e,10)}function a(e,t,i,a){if(e=(e||"").split(","),e=e[a||0]||e[0]||"auto",e=u.Util.trimText(e).split(" "),"backgroundSize"!==i||e[0]&&!e[0].match(/cover|contain|auto/)){if(e[0]=-1===e[0].indexOf("%")?o(t,i+"X",e[0]):e[0],e[1]===n){if("backgroundSize"===i)return e[1]="auto",e;e[1]=e[0]}e[1]=-1===e[1].indexOf("%")?o(t,i+"Y",e[1]):e[1]}else;return e}function r(e,t,n,o,i,a){var r,s,l,c,d=u.Util.getCSS(t,e,i);if(1===d.length&&(c=d[0],d=[],d[0]=c,d[1]=c),-1!==(""+d[0]).indexOf("%"))l=parseFloat(d[0])/100,s=n.width*l,"backgroundSize"!==e&&(s-=(a||o).width*l);else if("backgroundSize"===e)if("auto"===d[0])s=o.width;else if(/contain|cover/.test(d[0])){var f=u.Util.resizeBounds(o.width,o.height,n.width,n.height,d[0]);s=f.width,r=f.height}else s=parseInt(d[0],10);else s=parseInt(d[0],10);return"auto"===d[1]?r=s/o.width*o.height:-1!==(""+d[1]).indexOf("%")?(l=parseFloat(d[1])/100,r=n.height*l,"backgroundSize"!==e&&(r-=(a||o).height*l)):r=parseInt(d[1],10),[s,r]}function s(e,t){var n=[];return{storage:n,width:e,height:t,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return n.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){return n.push({type:"variable",name:e,arguments:t}),t}}}function l(e){return{zindex:e,children:[]}}var c,d,u={};u.Util={},u.Util.log=function(t){u.logging&&e.console&&e.console.log&&e.console.log(t)},u.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),u.Util.asFloat=function(e){return parseFloat(e)},function(){var e=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,t=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;u.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var o=n.match(e),i=[],a=0;o&&o.length>a;a++){var r=o[a].match(t);i.push({color:r[0],offsetX:r[1]?r[1].replace("px",""):0,offsetY:r[2]?r[2].replace("px",""):0,blur:r[3]?r[3].replace("px",""):0})}return i}}(),u.Util.parseBackgroundImage=function(e){var t,n,o,i,a,r,s,l,c=" \r\n	",d=[],u=0,f=0,p=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&l.push(n),"-"===t.substr(0,1)&&(i=t.indexOf("-",1)+1)>0&&(o=t.substr(0,i),t=t.substr(i)),d.push({prefix:o,method:t.toLowerCase(),value:a,args:l})),l=[],t=o=n=a=""};p();for(var h=0,g=e.length;g>h;h++)if(r=e[h],!(0===u&&c.indexOf(r)>-1)){switch(r){case'"':s?s===r&&(s=null):s=r;break;case"(":if(s)break;if(0===u){u=1,a+=r;continue}f++;break;case")":if(s)break;if(1===u){if(0===f){u=0,a+=r,p();continue}f--}break;case",":if(s)break;if(0===u){p();continue}if(1===u&&0===f&&!t.match(/^url$/i)){l.push(n),n="",a+=r;continue}}a+=r,0===u?t+=r:n+=r}return p(),d},u.Util.Bounds=function(e){var t,n={};return e.getBoundingClientRect&&(t=e.getBoundingClientRect(),n.top=t.top,n.bottom=t.bottom||t.top+t.height,n.left=t.left,n.width=e.offsetWidth,n.height=e.offsetHeight),n},u.Util.OffsetBounds=function(e){var t=e.offsetParent?u.Util.OffsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},u.Util.getCSS=function(e,n,o){c!==e&&(d=t.defaultView.getComputedStyle(e,null));var r=d[n];if(/^background(Size|Position)$/.test(n))return a(r,e,n,o);if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var s=r.split(" ");return 1>=s.length&&(s[1]=s[0]),s.map(i)}return r},u.Util.resizeBounds=function(e,t,n,o,i){var a,r,s=n/o,l=e/t;return i&&"auto"!==i?l>s^"contain"===i?(r=o,a=o*l):(a=n,r=n/l):(a=n,r=o),{width:a,height:r}},u.Util.BackgroundPosition=function(e,t,n,o,i){var a=r("backgroundPosition",e,t,n,o,i);return{left:a[0],top:a[1]}},u.Util.BackgroundSize=function(e,t,n,o){var i=r("backgroundSize",e,t,n,o);return{width:i[0],height:i[1]}},u.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},u.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&function(e,t){var o=e.length,i=0;if("number"==typeof t.length)for(var a=t.length;a>i;i++)e[o++]=t[i];else for(;t[i]!==n;)e[o++]=t[i++];return e.length=o,e}(t,e),t}(e.childNodes)}catch(o){u.Util.log("html2canvas.Util.Children failed with exception: "+o.message),t=[]}return t},u.Util.isTransparent=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},u.Util.Font=function(){var e={};return function(t,o,i){if(e[t+"-"+o]!==n)return e[t+"-"+o];var a,r,s,l=i.createElement("div"),c=i.createElement("img"),d=i.createElement("span"),u="Hidden Text";return l.style.visibility="hidden",l.style.fontFamily=t,l.style.fontSize=o,l.style.margin=0,l.style.padding=0,i.body.appendChild(l),c.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",c.width=1,c.height=1,c.style.margin=0,c.style.padding=0,c.style.verticalAlign="baseline",d.style.fontFamily=t,d.style.fontSize=o,d.style.margin=0,d.style.padding=0,d.appendChild(i.createTextNode(u)),l.appendChild(d),l.appendChild(c),a=c.offsetTop-d.offsetTop+1,l.removeChild(d),l.appendChild(i.createTextNode(u)),l.style.lineHeight="normal",c.style.verticalAlign="super",r=c.offsetTop-l.offsetTop+1,s={baseline:a,lineWidth:1,middle:r},e[t+"-"+o]=s,i.body.removeChild(l),s}}(),function(){function e(e){return function(t){try{e.addColorStop(t.stop,t.color)}catch(o){n.log(["failed to add color stop: ",o,"; tried to add: ",t])}}}var n=u.Util,o={};u.Generate=o;var i=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];o.parseGradient=function(e,t){var n,o,a,r,s,l,c,d,u,f,p,h,g=i.length;for(o=0;g>o&&!(a=e.match(i[o]));o+=1);if(a)switch(a[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},s=a[2].match(/\w+/g))for(l=s.length,o=0;l>o;o+=1)switch(s[o]){case"top":n.y0=0,n.y1=t.height;break;case"right":n.x0=t.width,n.x1=0;break;case"bottom":n.y0=t.height,n.y1=0;break;case"left":n.x0=0,n.x1=t.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=t.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=t.height/2),s=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,c=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(r=parseFloat(d[2]),r/="%"===d[3]?100:t.width):r=o*c,n.colorStops.push({color:d[1],stop:r});break;case"-webkit-gradient":if(n={type:"radial"===a[2]?"circle":a[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=a[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*t.width/100,n.y0=s[2]*t.height/100,n.x1=s[3]*t.width/100,n.y1=s[4]*t.height/100),s=a[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(l=s.length,o=0;l>o;o+=1)d=s[o].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),r=parseFloat(d[2]),"from"===d[1]&&(r=0),"to"===d[1]&&(r=1),n.colorStops.push({color:d[3],stop:r});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*t.width/100,n.y0=s[2]*t.height/100,n.x1=t.width-n.x0,n.y1=t.height-n.y0),s=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(l=s.length,c=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),d[2]?(r=parseFloat(d[2]),d[3]&&(r/=100)):r=o*c,n.colorStops.push({color:d[1],stop:r});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:t.width,y1:t.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},s=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.cx=s[1]*t.width/100,n.cy=s[2]*t.height/100),s=a[3].match(/\w+/),d=a[4].match(/[a-z\-]*/),s&&d)switch(d[0]){case"farthest-corner":case"cover":case"":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),f=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(u,f,p,h);break;case"closest-corner":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),f=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(u,f,p,h);break;case"farthest-side":"circle"===s[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===s[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(s=a[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,c=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(r=parseFloat(d[2]),r/="%"===d[3]?100:t.width):r=o*c,n.colorStops.push({color:d[1],stop:r})}return n},o.Gradient=function(n,o){if(0!==o.width&&0!==o.height){var i,a,r=t.createElement("canvas"),s=r.getContext("2d");if(r.width=o.width,r.height=o.height,i=u.Generate.parseGradient(n,o))switch(i.type){case"linear":a=s.createLinearGradient(i.x0,i.y0,i.x1,i.y1),i.colorStops.forEach(e(a)),s.fillStyle=a,s.fillRect(0,0,o.width,o.height);break;case"circle":a=s.createRadialGradient(i.cx,i.cy,0,i.cx,i.cy,i.rx),i.colorStops.forEach(e(a)),s.fillStyle=a,s.fillRect(0,0,o.width,o.height);break;case"ellipse":var l=t.createElement("canvas"),c=l.getContext("2d"),d=Math.max(i.rx,i.ry),f=2*d;l.width=l.height=f,a=c.createRadialGradient(i.rx,i.ry,0,i.rx,i.ry,d),i.colorStops.forEach(e(a)),c.fillStyle=a,c.fillRect(0,0,f,f),s.fillStyle=i.colorStops[i.colorStops.length-1].color,s.fillRect(0,0,r.width,r.height),s.drawImage(l,i.cx-i.rx,i.cy-i.ry,2*i.rx,2*i.ry)}return r}},o.ListAlpha=function(e){var t,n="";do t=e%26,n=String.fromCharCode(t+64)+n,e/=26;while(26*e>26);return n},o.ListRoman=function(e){var t,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],o=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],i="",a=n.length;if(0>=e||e>=4e3)return e;for(t=0;a>t;t+=1)for(;e>=o[t];)e-=o[t],i+=n[t];return i}}(),u.Parse=function(o,i){function a(){return Math.max(Math.max(ft.body.scrollWidth,ft.documentElement.scrollWidth),Math.max(ft.body.offsetWidth,ft.documentElement.offsetWidth),Math.max(ft.body.clientWidth,ft.documentElement.clientWidth))}function r(){return Math.max(Math.max(ft.body.scrollHeight,ft.documentElement.scrollHeight),Math.max(ft.body.offsetHeight,ft.documentElement.offsetHeight),Math.max(ft.body.clientHeight,ft.documentElement.clientHeight))}function c(e,t){var n=parseInt(vt(e,t),10);return isNaN(n)?0:n}function d(e,t,n,o,i,a){"transparent"!==a&&(e.setVariable("fillStyle",a),e.fillRect(t,n,o,i),ut+=1)}function f(e,t,o){return e.length>0?t+o.toUpperCase():n}function p(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,f);case"uppercase":return e.toUpperCase();default:return e}}function h(e){return/^(normal|none|0px)$/.test(e)}function g(e,t,n,o){null!==e&&pt.trimText(e).length>0&&(o.fillText(e,t,n),ut+=1)}function m(e,t,o,i){var a=!1,r=vt(t,"fontWeight"),s=vt(t,"fontFamily"),l=vt(t,"fontSize"),c=pt.parseTextShadows(vt(t,"textShadow"));switch(parseInt(r,10)){case 401:r="bold";break;case 400:r="normal"}return e.setVariable("fillStyle",i),e.setVariable("font",[vt(t,"fontStyle"),vt(t,"fontVariant"),r,l,s].join(" ")),e.setVariable("textAlign",a?"right":"left"),c.length&&(e.setVariable("shadowColor",c[0].color),e.setVariable("shadowOffsetX",c[0].offsetX),e.setVariable("shadowOffsetY",c[0].offsetY),e.setVariable("shadowBlur",c[0].blur)),"none"!==o?pt.Font(s,l,ft):n}function v(e,t,n,o,i){switch(t){case"underline":d(e,n.left,Math.round(n.top+o.baseline+o.lineWidth),n.width,1,i);break;case"overline":d(e,n.left,Math.round(n.top),n.width,1,i);break;case"line-through":d(e,n.left,Math.ceil(n.top+o.middle+o.lineWidth),n.width,1,i)}}function y(e,t,n,o,i){var a;if(ht.rangeBounds&&!i)("none"!==n||0!==pt.trimText(t).length)&&(a=b(t,e.node,e.textOffset)),e.textOffset+=t.length;else if(e.node&&"string"==typeof e.node.nodeValue){var r=o?e.node.splitText(t.length):null;a=k(e.node,i),e.node=r}return a}function b(e,t,n){var o=ft.createRange();return o.setStart(t,n),o.setEnd(t,n+e.length),o.getBoundingClientRect()}function k(e,t){var n=e.parentNode,o=ft.createElement("wrapper"),i=e.cloneNode(!0);o.appendChild(e.cloneNode(!0)),n.replaceChild(o,e);var a=t?pt.OffsetBounds(o):pt.Bounds(o);return n.replaceChild(i,o),a}function w(e,t,n){var o,a,r=n.ctx,s=vt(e,"color"),l=vt(e,"textDecoration"),c=vt(e,"textAlign"),d={node:t,textOffset:0};pt.trimText(t.nodeValue).length>0&&(t.nodeValue=p(t.nodeValue,vt(e,"textTransform")),c=c.replace(["-webkit-auto"],["auto"]),a=!i.letterRendering&&/^(left|right|justify|auto)$/.test(c)&&h(vt(e,"letterSpacing"))?t.nodeValue.split(/(\b| )/):t.nodeValue.split(""),o=m(r,e,l,s),i.chinese&&a.forEach(function(e,t){/.*[\u4E00-\u9FA5].*$/.test(e)&&(e=e.split(""),e.unshift(t,1),a.splice.apply(a,e))}),a.forEach(function(e,t){var i=y(d,e,l,a.length-1>t,n.transform.matrix);i&&(g(e,i.left,i.bottom,r),v(r,l,i,o,s))}))}function x(e,t){var n,o,i=ft.createElement("boundelement");return i.style.display="inline",n=e.style.listStyleType,e.style.listStyleType="none",i.appendChild(ft.createTextNode(t)),e.insertBefore(i,e.firstChild),o=pt.Bounds(i),e.removeChild(i),e.style.listStyleType=n,o}function _(e){var t=-1,n=1,o=e.parentNode.childNodes;if(e.parentNode){for(;o[++t]!==e;)1===o[t].nodeType&&n++;return n}return-1}function T(e,t){var n,o=_(e);switch(t){case"decimal":n=o;break;case"decimal-leading-zero":n=1===(""+o).length?o="0"+(""+o):""+o;break;case"upper-roman":n=u.Generate.ListRoman(o);break;case"lower-roman":n=u.Generate.ListRoman(o).toLowerCase();break;case"lower-alpha":n=u.Generate.ListAlpha(o).toLowerCase();break;case"upper-alpha":n=u.Generate.ListAlpha(o)}return n+". "}function C(e,t,n){var o,i,a,r=t.ctx,s=vt(e,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(s)){if(i=T(e,s),a=x(e,i),m(r,e,"none",vt(e,"color")),"inside"!==vt(e,"listStylePosition"))return;r.setVariable("textAlign","left"),o=n.left,g(i,o,a.bottom,r)}}function S(e){var t=o[e];return t&&t.succeeded===!0?t.img:!1}function E(e,t){var n=Math.max(e.left,t.left),o=Math.max(e.top,t.top),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:o,width:i-n,height:a-o}}function N(e,t,n){var o,i="static"!==t.cssPosition,a=i?vt(e,"zIndex"):"auto",r=vt(e,"opacity"),s="none"!==vt(e,"cssFloat");t.zIndex=o=l(a),o.isPositioned=i,o.isFloated=s,o.opacity=r,o.ownStacking="auto"!==a||1>r,n&&n.zIndex.children.push(t)}function I(e,t,n,o,i){var a=c(t,"paddingLeft"),r=c(t,"paddingTop"),s=c(t,"paddingRight"),l=c(t,"paddingBottom");q(e,n,0,0,n.width,n.height,o.left+a+i[3].width,o.top+r+i[0].width,o.width-(i[1].width+i[3].width+a+s),o.height-(i[0].width+i[2].width+r+l))}function A(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:c(e,"border"+t+"Width"),color:vt(e,"border"+t+"Color")}})}function O(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return vt(e,"border"+t+"Radius")})}function R(e,t,n,o){var i=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:o,subdivide:function(a){var r=i(e,t,a),s=i(t,n,a),l=i(n,o,a),c=i(r,s,a),d=i(s,l,a),u=i(c,d,a);return[R(e,r,c,u),R(u,d,l,o)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,o.x,o.y])},curveToReversed:function(o){o.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function D(e,t,n,o,i,a,r){t[0]>0||t[1]>0?(e.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(e),o[1].curveTo(e)):e.push(["line",a,r]),(n[0]>0||n[1]>0)&&e.push(["line",i[0].start.x,i[0].start.y])}function L(e,t,n,o,i,a,r){var s=[];return t[0]>0||t[1]>0?(s.push(["line",o[1].start.x,o[1].start.y]),o[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",a[0].start.x,a[0].start.y]),a[0].curveTo(s),s.push(["line",r[0].end.x,r[0].end.y]),r[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(s.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function j(e,t,n){var o=e.left,i=e.top,a=e.width,r=e.height,s=t[0][0],l=t[0][1],c=t[1][0],d=t[1][1],u=t[2][0],f=t[2][1],p=t[3][0],h=t[3][1],g=a-c,m=r-f,v=a-u,y=r-h;return{topLeftOuter:kt(o,i,s,l).topLeft.subdivide(.5),topLeftInner:kt(o+n[3].width,i+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:kt(o+g,i,c,d).topRight.subdivide(.5),topRightInner:kt(o+Math.min(g,a+n[3].width),i+n[0].width,g>a+n[3].width?0:c-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:kt(o+v,i+m,u,f).bottomRight.subdivide(.5),bottomRightInner:kt(o+Math.min(v,a+n[3].width),i+Math.min(m,r+n[0].width),Math.max(0,u-n[1].width),Math.max(0,f-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:kt(o,i+y,p,h).bottomLeft.subdivide(.5),bottomLeftInner:kt(o+n[3].width,i+y,Math.max(0,p-n[3].width),Math.max(0,h-n[2].width)).bottomLeft.subdivide(.5)}}function H(e,t,n,o,i){var a=vt(e,"backgroundClip"),r=[];switch(a){case"content-box":case"padding-box":D(r,o[0],o[1],t.topLeftInner,t.topRightInner,i.left+n[3].width,i.top+n[0].width),D(r,o[1],o[2],t.topRightInner,t.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),D(r,o[2],o[3],t.bottomRightInner,t.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),D(r,o[3],o[0],t.bottomLeftInner,t.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:D(r,o[0],o[1],t.topLeftOuter,t.topRightOuter,i.left,i.top),D(r,o[1],o[2],t.topRightOuter,t.bottomRightOuter,i.left+i.width,i.top),D(r,o[2],o[3],t.bottomRightOuter,t.bottomLeftOuter,i.left+i.width,i.top+i.height),D(r,o[3],o[0],t.bottomLeftOuter,t.topLeftOuter,i.left,i.top+i.height)}return r}function M(e,t,n){var o,i,a,r,s,l,c=t.left,d=t.top,u=t.width,f=t.height,p=O(e),h=j(t,p,n),g={clip:H(e,h,n,p,t),borders:[]};for(o=0;4>o;o++)if(n[o].width>0){switch(i=c,a=d,r=u,s=f-n[2].width,o){case 0:s=n[0].width,l=L({c1:[i,a],c2:[i+r,a],c3:[i+r-n[1].width,a+s],c4:[i+n[3].width,a+s]},p[0],p[1],h.topLeftOuter,h.topLeftInner,h.topRightOuter,h.topRightInner);break;case 1:i=c+u-n[1].width,r=n[1].width,l=L({c1:[i+r,a],c2:[i+r,a+s+n[2].width],c3:[i,a+s],c4:[i,a+n[0].width]},p[1],p[2],h.topRightOuter,h.topRightInner,h.bottomRightOuter,h.bottomRightInner);break;case 2:a=a+f-n[2].width,s=n[2].width,l=L({c1:[i+r,a+s],c2:[i,a+s],c3:[i+n[3].width,a],c4:[i+r-n[3].width,a]},p[2],p[3],h.bottomRightOuter,h.bottomRightInner,h.bottomLeftOuter,h.bottomLeftInner);break;case 3:r=n[3].width,l=L({c1:[i,a+s+n[2].width],c2:[i,a],c3:[i+r,a+n[0].width],c4:[i+r,a+s]},p[3],p[0],h.bottomLeftOuter,h.bottomLeftInner,h.topLeftOuter,h.topLeftInner)}g.borders.push({args:l,color:n[o].color})}return g}function P(e,t){var n=e.drawShape();return t.forEach(function(e,t){n[0===t?"moveTo":e[0]+"To"].apply(null,e.slice(1))}),n}function z(e,t,n){"transparent"!==n&&(e.setVariable("fillStyle",n),P(e,t),e.fill(),ut+=1)}function F(e,t,n){var o,i,a=ft.createElement("valuewrap"),r=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];r.forEach(function(t){try{a.style[t]=vt(e,t)}catch(n){pt.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),a.style.borderColor="black",a.style.borderStyle="solid",a.style.display="block",a.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(a.style.lineHeight=vt(e,"height")),a.style.top=t.top+"px",a.style.left=t.left+"px",o="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value,o||(o=e.placeholder),i=ft.createTextNode(o),a.appendChild(i),mt.appendChild(a),w(e,i,n),mt.removeChild(a)}function q(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1)),ut+=1}function U(n,o){var i=e.getComputedStyle(n,o);if(i&&i.content&&"none"!==i.content&&"-moz-alt-content"!==i.content&&"none"!==i.display){var a=i.content+"",r=a.substr(0,1);r===a.substr(a.length-1)&&r.match(/'|"/)&&(a=a.substr(1,a.length-2));var s="url"===a.substr(0,3),l=t.createElement(s?"img":"span");return l.className=yt+"-before "+yt+"-after",Object.keys(i).filter(W).forEach(function(e){try{l.style[e]=i[e]}catch(t){pt.log(["Tried to assign readonly property ",e,"Error:",t])}}),s?l.src=pt.parseBackgroundImage(a)[0].args[0]:l.innerHTML=a,l}}function W(t){return isNaN(e.parseInt(t,10))}function $(e,t){var n=U(e,":before"),o=U(e,":after");(n||o)&&(n&&(e.className+=" "+yt+"-before",e.parentNode.insertBefore(n,e),at(n,t,!0),e.parentNode.removeChild(n),e.className=e.className.replace(yt+"-before","").trim()),o&&(e.className+=" "+yt+"-after",e.appendChild(o),at(o,t,!0),e.removeChild(o),e.className=e.className.replace(yt+"-after","").trim()))}function B(e,t,n,o){var i=Math.round(o.left+n.left),a=Math.round(o.top+n.top);e.createPattern(t),e.translate(i,a),e.fill(),e.translate(-i,-a)}function V(e,t,n,o,i,a,r,s){var l=[];l.push(["line",Math.round(i),Math.round(a)]),l.push(["line",Math.round(i+r),Math.round(a)]),l.push(["line",Math.round(i+r),Math.round(s+a)]),l.push(["line",Math.round(i),Math.round(s+a)]),P(e,l),e.save(),e.clip(),B(e,t,n,o),e.restore()}function X(e,t,n){d(e,t.left,t.top,t.width,t.height,n)}function G(e,t,n,o,i){var a=pt.BackgroundSize(e,t,o,i),r=pt.BackgroundPosition(e,t,o,i,a),s=vt(e,"backgroundRepeat").split(",").map(pt.trimText);switch(o=Y(o,a),s=s[i]||s[0]){case"repeat-x":V(n,o,r,t,t.left,t.top+r.top,99999,o.height);break;case"repeat-y":V(n,o,r,t,t.left+r.left,t.top,o.width,99999);break;case"no-repeat":V(n,o,r,t,t.left+r.left,t.top+r.top,o.width,o.height);break;default:B(n,o,r,{top:t.top,left:t.left,width:o.width,height:o.height})}}function J(e,t,n){for(var o,i=vt(e,"backgroundImage"),a=pt.parseBackgroundImage(i),r=a.length;r--;)if(i=a[r],i.args&&0!==i.args.length){var s="url"===i.method?i.args[0]:i.value;
o=S(s),o?G(e,t,n,o,r):pt.log("html2canvas: Error loading background:",i)}}function Y(e,t){if(e.width===t.width&&e.height===t.height)return e;var n,o=ft.createElement("canvas");return o.width=t.width,o.height=t.height,n=o.getContext("2d"),q(n,e,0,0,e.width,e.height,0,0,t.width,t.height),o}function Q(e,t,n){return e.setVariable("globalAlpha",vt(t,"opacity")*(n?n.opacity:1))}function K(e){return e.replace("px","")}function Z(e){var t=vt(e,"transform")||vt(e,"-webkit-transform")||vt(e,"-moz-transform")||vt(e,"-ms-transform")||vt(e,"-o-transform"),n=vt(e,"transform-origin")||vt(e,"-webkit-transform-origin")||vt(e,"-moz-transform-origin")||vt(e,"-ms-transform-origin")||vt(e,"-o-transform-origin")||"0px 0px";n=n.split(" ").map(K).map(pt.asFloat);var o;if(t&&"none"!==t){var i=t.match(wt);if(i)switch(i[1]){case"matrix":o=i[2].split(",").map(pt.trimText).map(pt.asFloat)}}return{origin:n,matrix:o}}function et(e,t,n,o){var l=s(t?n.width:a(),t?n.height:r()),c={ctx:l,opacity:Q(l,e,t),cssPosition:vt(e,"position"),borders:A(e),transform:o,clip:t&&t.clip?pt.Extend({},t.clip):null};return N(e,c,t),i.useOverflow===!0&&/(hidden|scroll|auto)/.test(vt(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(c.clip=c.clip?E(c.clip,n):n),c}function tt(e,t,n){var o={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)};return n&&(o=E(o,n)),o}function nt(e,t){var n=t.matrix?pt.OffsetBounds(e):pt.Bounds(e);return t.origin[0]+=n.left,t.origin[1]+=n.top,n}function ot(e,t,n,o){var i,a=Z(e,t),r=nt(e,a),s=et(e,t,r,a),l=s.borders,c=s.ctx,d=tt(l,r,s.clip),u=M(e,r,l),f=gt.test(e.nodeName)?"#efefef":vt(e,"backgroundColor");switch(P(c,u.clip),c.save(),c.clip(),d.height>0&&d.width>0&&!o?(X(c,r,f),J(e,d,c)):o&&(s.backgroundColor=f),c.restore(),u.borders.forEach(function(e){z(c,e.args,e.color)}),n||$(e,s),e.nodeName){case"IMG":(i=S(e.getAttribute("src")))?I(c,e,i,r,l):pt.log("html2canvas: Error loading <img>:"+e.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&(e.value||e.placeholder||"").length>0&&F(e,r,s);break;case"TEXTAREA":(e.value||e.placeholder||"").length>0&&F(e,r,s);break;case"SELECT":(e.options||e.placeholder||"").length>0&&F(e,r,s);break;case"LI":C(e,s,d);break;case"CANVAS":I(c,e,e,r,l)}return s}function it(e){return"none"!==vt(e,"display")&&"hidden"!==vt(e,"visibility")&&!e.hasAttribute("data-html2canvas-ignore")}function at(e,t,n){it(e)&&(t=ot(e,t,n,!1)||t,gt.test(e.nodeName)||rt(e,t,n))}function rt(e,t,n){pt.Children(e).forEach(function(o){o.nodeType===o.ELEMENT_NODE?at(o,t,n):o.nodeType===o.TEXT_NODE&&w(e,o,t)})}function st(){var n=vt(t.documentElement,"backgroundColor"),o=pt.isTransparent(n)&&dt===t.body,i=ot(dt,null,!1,o);return rt(dt,i),o&&(n=i.backgroundColor),e.scroll(ct,lt),mt.removeChild(bt),{backgroundColor:n,stack:i}}var lt=e.pageYOffset||t.documentElement.scrollTop,ct=e.pageXOffset||t.documentElement.scrollLeft;e.scroll(0,0);var dt=i.elements===n?t.body:i.elements[0],ut=0,ft=dt.ownerDocument,pt=u.Util,ht=pt.Support(i,ft),gt=RegExp("("+i.ignoreElements+")"),mt=ft.body,vt=pt.getCSS,yt="___html2canvas___pseudoelement",bt=ft.createElement("style");bt.innerHTML="."+yt+'-before:before { content: "" !important; display: none !important; }'+"."+yt+'-after:after { content: "" !important; display: none !important; }',mt.appendChild(bt),o=o||{};var kt=function(e){return function(t,n,o,i){var a=o*e,r=i*e,s=t+o,l=n+i;return{topLeft:R({x:t,y:l},{x:t,y:l-r},{x:s-a,y:n},{x:s,y:n}),topRight:R({x:t,y:n},{x:t+a,y:n},{x:s,y:l-r},{x:s,y:l}),bottomRight:R({x:s,y:n},{x:s,y:n+r},{x:t+a,y:l},{x:t,y:l}),bottomLeft:R({x:s,y:l},{x:s-a,y:l},{x:t,y:n+r},{x:t,y:n})}}}(4*((Math.sqrt(2)-1)/3)),wt=/(matrix)\((.+)\)/;return st()},u.Preload=function(o){function i(e){S.href=e,S.href=S.href;var t=S.protocol+S.host;return t===g}function a(){k.log("html2canvas: start: images: "+b.numLoaded+" / "+b.numTotal+" (failed: "+b.numFailed+")"),!b.firstRun&&b.numLoaded>=b.numTotal&&(k.log("Finished loading images: # "+b.numTotal+" (failed: "+b.numFailed+")"),"function"==typeof o.complete&&o.complete(b))}function r(t,i,r){var s,l,c=o.proxy;S.href=t,t=S.href,s="html2canvas_"+w++,r.callbackname=s,c+=c.indexOf("?")>-1?"&":"?",c+="url="+encodeURIComponent(t)+"&callback="+s,l=_.createElement("script"),e[s]=function(t){"error:"===t.substring(0,6)?(r.succeeded=!1,b.numLoaded++,b.numFailed++,a()):(h(i,r),i.src=t),e[s]=n;try{delete e[s]}catch(o){}l.parentNode.removeChild(l),l=null,delete r.script,delete r.callbackname},l.setAttribute("type","text/javascript"),l.setAttribute("src",c),r.script=l,e.document.body.appendChild(l)}function s(t,n){var o=e.getComputedStyle(t,n),i=o.content;"url"===i.substr(0,3)&&m.loadImage(u.Util.parseBackgroundImage(i)[0].args[0]),f(o.backgroundImage,t)}function l(e){s(e,":before"),s(e,":after")}function c(e,t){var o=u.Generate.Gradient(e,t);o!==n&&(b[e]={img:o,succeeded:!0},b.numTotal++,b.numLoaded++,a())}function d(e){return e&&e.method&&e.args&&e.args.length>0}function f(e,t){var o;u.Util.parseBackgroundImage(e).filter(d).forEach(function(e){"url"===e.method?m.loadImage(e.args[0]):e.method.match(/\-?gradient$/)&&(o===n&&(o=u.Util.Bounds(t)),c(e.value,o))})}function p(e){var t=!1;try{k.Children(e).forEach(p)}catch(o){}try{t=e.nodeType}catch(i){t=!1,k.log("html2canvas: failed to access some element's nodeType - Exception: "+i.message)}if(1===t||t===n){l(e);try{f(k.getCSS(e,"backgroundImage"),e)}catch(o){k.log("html2canvas: failed to get background-image - Exception: "+o.message)}f(e)}}function h(t,i){t.onload=function(){i.timer!==n&&e.clearTimeout(i.timer),b.numLoaded++,i.succeeded=!0,t.onerror=t.onload=null,a()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(i.timer),o.proxy)){var s=t.src;return t=new Image,i.img=t,t.src=s,r(t.src,t,i),n}b.numLoaded++,b.numFailed++,i.succeeded=!1,t.onerror=t.onload=null,a()}}var g,m,v,y,b={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},k=u.Util,w=0,x=o.elements[0]||t.body,_=x.ownerDocument,T=x.getElementsByTagName("img"),C=T.length,S=_.createElement("a"),E=function(e){return e.crossOrigin!==n}(new Image);for(S.href=e.location.href,g=S.protocol+S.host,m={loadImage:function(e){var t,a;e&&b[e]===n&&(t=new Image,e.match(/data:image\/.*;base64,/i)?(t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),a=b[e]={img:t},b.numTotal++,h(t,a)):i(e)||o.allowTaint===!0?(a=b[e]={img:t},b.numTotal++,h(t,a),t.src=e):E&&!o.allowTaint&&o.useCORS?(t.crossOrigin="anonymous",a=b[e]={img:t},b.numTotal++,h(t,a),t.src=e):o.proxy&&(a=b[e]={img:t},b.numTotal++,r(e,t,a)))},cleanupDOM:function(i){var r,s;if(!b.cleanupDone){i&&"string"==typeof i?k.log("html2canvas: Cleanup because: "+i):k.log("html2canvas: Cleanup after timeout: "+o.timeout+" ms.");for(s in b)if(b.hasOwnProperty(s)&&(r=b[s],"object"==typeof r&&r.callbackname&&r.succeeded===n)){e[r.callbackname]=n;try{delete e[r.callbackname]}catch(l){}r.script&&r.script.parentNode&&(r.script.setAttribute("src","about:blank"),r.script.parentNode.removeChild(r.script)),b.numLoaded++,b.numFailed++,k.log("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+b.numLoaded+" / "+b.numTotal)}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),b.cleanupDone=!0,i&&"string"==typeof i||a()}},renderingDone:function(){y&&e.clearTimeout(y)}},o.timeout>0&&(y=e.setTimeout(m.cleanupDOM,o.timeout)),k.log("html2canvas: Preload starts: finding background-images"),b.firstRun=!0,p(x),k.log("html2canvas: Preload: Finding images"),v=0;C>v;v+=1)m.loadImage(T[v].getAttribute("src"));return b.firstRun=!1,k.log("html2canvas: Preload: Done."),b.numTotal===b.numLoaded&&a(),m},u.Renderer=function(e,o){function i(e){function t(e){Object.keys(e).sort().forEach(function(n){var o=[],a=[],r=[],s=[];e[n].forEach(function(e){e.node.zIndex.isPositioned||1>e.node.zIndex.opacity?r.push(e):e.node.zIndex.isFloated?a.push(e):o.push(e)}),function l(e){e.forEach(function(e){s.push(e),e.children&&l(e.children)})}(o.concat(a,r)),s.forEach(function(e){e.context?t(e.context):i.push(e.node)})})}var o,i=[];return o=function(e){function t(e,o,i){var a="auto"===o.zIndex.zindex?0:Number(o.zIndex.zindex),r=e,s=o.zIndex.isPositioned,l=o.zIndex.isFloated,c={node:o},d=i;o.zIndex.ownStacking?(r=c.context={"!":[{node:o,children:[]}]},d=n):(s||l)&&(d=c.children=[]),0===a&&i?i.push(c):(e[a]||(e[a]=[]),e[a].push(c)),o.zIndex.children.forEach(function(e){t(r,e,d)})}var o={};return t(o,e),o}(e),t(o),i}function a(e){var t;if("string"==typeof o.renderer&&u.Renderer[e]!==n)t=u.Renderer[e](o);else{if("function"!=typeof e)throw Error("Unknown renderer");t=e(o)}if("function"!=typeof t)throw Error("Invalid renderer defined");return t}return a(o.renderer)(e,o,t,i(e.stack),u)},u.Util.Support=function(e,t){function o(){var e=new Image,o=t.createElement("canvas"),i=o.getContext===n?!1:o.getContext("2d");if(i===!1)return!1;o.width=o.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{i.drawImage(e,0,0),o.toDataURL()}catch(a){return!1}return u.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function i(){var e,n,o,i,a=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),o=e.getBoundingClientRect(),i=o.height,123===i&&(a=!0),t.body.removeChild(n))),a}return{rangeBounds:i(),svgRendering:e.svgRendering&&o()}},e.html2canvas=function(t,n){t=t.length?t:[t];var o,i,a={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return a=u.Util.Extend(n,a),u.logging=a.logging,a.complete=function(e){("function"!=typeof a.onpreloaded||a.onpreloaded(e)!==!1)&&(o=u.Parse(e,a),("function"!=typeof a.onparsed||a.onparsed(o)!==!1)&&(i=u.Renderer(o,a),"function"==typeof a.onrendered&&a.onrendered(i)))},e.setTimeout(function(){u.Preload(a)},0),{render:function(e,t){return u.Renderer(e,u.Util.Extend(t,a))},parse:function(e,t){return u.Parse(e,u.Util.Extend(t,a))},preload:function(e){return u.Preload(u.Util.Extend(e,a))},log:u.Util.log}},e.html2canvas.log=u.Util.log,e.html2canvas.Renderer={Canvas:n},u.Renderer.Canvas=function(e){function o(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}function i(e){if(-1===s.indexOf(e.arguments[0].src)){c.drawImage(e.arguments[0],0,0);try{c.getImageData(0,0,1,1)}catch(t){return l=r.createElement("canvas"),c=l.getContext("2d"),!1}s.push(e.arguments[0].src)}return!0}function a(t,n){switch(n.type){case"variable":t[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{t.fillStyle=t.createPattern(n.arguments[0],"repeat")}catch(a){d.log("html2canvas: Renderer: Error creating pattern",a.message)}break;case"drawShape":o(t,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!e.taintTest||e.taintTest&&i(n))&&t.drawImage.apply(t,n.arguments);break;default:t[n.name].apply(t,n.arguments)}}}e=e||{};var r=t,s=[],l=t.createElement("canvas"),c=l.getContext("2d"),d=u.Util,f=e.canvas||r.createElement("canvas");return function(e,t,o,i,r){var s,l,c,u=f.getContext("2d"),p=e.stack;return f.width=f.style.width=t.width||p.ctx.width,f.height=f.style.height=t.height||p.ctx.height,c=u.fillStyle,u.fillStyle=d.isTransparent(p.backgroundColor)&&t.background!==n?t.background:e.backgroundColor,u.fillRect(0,0,f.width,f.height),u.fillStyle=c,i.forEach(function(e){u.textBaseline="bottom",u.save(),e.transform.matrix&&(u.translate(e.transform.origin[0],e.transform.origin[1]),u.transform.apply(u,e.transform.matrix),u.translate(-e.transform.origin[0],-e.transform.origin[1])),e.clip&&(u.beginPath(),u.rect(e.clip.left,e.clip.top,e.clip.width,e.clip.height),u.clip()),e.ctx.storage&&e.ctx.storage.forEach(function(e){a(u,e)}),u.restore()}),d.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===t.elements.length&&"object"==typeof t.elements[0]&&"BODY"!==t.elements[0].nodeName?(l=r.Util.Bounds(t.elements[0]),s=o.createElement("canvas"),s.width=Math.ceil(l.width),s.height=Math.ceil(l.height),u=s.getContext("2d"),u.drawImage(f,l.left,l.top,l.width,l.height,0,0,l.width,l.height),f=null,s):f}}}(window,document),function(e){var t=function(){var e=function e(e){var t={data:[],heatmap:e};this.max=1,this.get=function(e){return t[e]},this.set=function(e,n){t[e]=n}};e.prototype={addDataPoint:function(e,t){if(!(0>e||0>t)){var n=this,o=n.get("heatmap"),i=n.get("data");return i[e]||(i[e]=[]),i[e][t]||(i[e][t]=0),i[e][t]+=3>arguments.length?1:arguments[2],n.set("data",i),n.max<i[e][t]?(o.get("actx").clearRect(0,0,o.get("width"),o.get("height")),n.setDataSet({max:i[e][t],data:i},!0),void 0):(o.drawAlpha(e,t,i[e][t],!0),void 0)}},setDataSet:function(e,t){var n=this,o=n.get("heatmap"),i=[],a=e.data,r=a.length;if(o.clear(),this.max=e.max,o.get("legend")&&o.get("legend").update(e.max),null!=t&&t){for(var s in a)if(void 0!==s)for(var l in a[s])void 0!==l&&o.drawAlpha(s,l,a[s][l],!1)}else for(;r--;){var c=a[r];o.drawAlpha(c.x,c.y,c.count,!1),i[c.x]||(i[c.x]=[]),i[c.x][c.y]||(i[c.x][c.y]=0),i[c.x][c.y]=c.count}o.colorize(),this.set("data",a)},exportDataSet:function(){var e=this,t=e.get("data"),n=[];for(var o in t)if(void 0!==o)for(var i in t[o])void 0!==i&&n.push({x:parseInt(o,10),y:parseInt(i,10),count:t[o][i]});return{max:e.max,data:n}},generateRandomDataSet:function(e){var t=this.get("heatmap"),n=t.get("width"),o=t.get("height"),i={},a=Math.floor(1e3*Math.random()+1);i.max=a;for(var r=[];e--;)r.push({x:Math.floor(Math.random()*n+1),y:Math.floor(Math.random()*o+1),count:Math.floor(Math.random()*a+1)});i.data=r,this.setDataSet(i)}};var t=function t(e){this.config=e;var t={element:null,labelsEl:null,gradientCfg:null,ctx:null};this.get=function(e){return t[e]},this.set=function(e,n){t[e]=n},this.init()};t.prototype={init:function(){var e,t,n=this,o=n.config,i=o.title||"Legend",a=o.position,r=o.offset||10,s=(o.gradient,document.createElement("ul")),l="";n.processGradientObject(),l+=a.indexOf("t")>-1?"top:"+r+"px;":"bottom:"+r+"px;",l+=a.indexOf("l")>-1?"left:"+r+"px;":"right:"+r+"px;",e=document.createElement("div"),e.style.cssText="border-radius:5px;position:absolute;"+l+"font-family:Helvetica; width:256px;z-index:10000000000; background:rgba(255,255,255,1);padding:10px;border:1px solid black;margin:0;",e.innerHTML="<h3 style='padding:0;margin:0;text-align:center;font-size:16px;'>"+i+"</h3>",s.style.cssText="position:relative;font-size:12px;display:block;list-style:none;list-style-type:none;margin:0;height:15px;",t=document.createElement("div"),t.style.cssText=["position:relative;display:block;width:256px;height:15px;border-bottom:1px solid black; background-image:url(",n.createGradientImage(),");"].join(""),e.appendChild(s),e.appendChild(t),n.set("element",e),n.set("labelsEl",s),n.update(1)},processGradientObject:function(){var e=this,t=this.config.gradient,n=[];for(var o in t)t.hasOwnProperty(o)&&n.push({stop:o,value:t[o]});n.sort(function(e,t){return e.stop-t.stop}),n.unshift({stop:0,value:"rgba(0,0,0,0)"}),e.set("gradientArr",n)},createGradientImage:function(){var e,t=this,n=t.get("gradientArr"),o=n.length,i=document.createElement("canvas"),a=i.getContext("2d");i.width="256",i.height="15",e=a.createLinearGradient(0,5,256,10);for(var r=0;o>r;r++)e.addColorStop(1/(o-1)*r,n[r].value);a.fillStyle=e,a.fillRect(0,5,256,10),a.strokeStyle="black",a.beginPath();for(var r=0;o>r;r++)a.moveTo((256*1/(o-1)*r>>0)+.5,0),a.lineTo((256*1/(o-1)*r>>0)+.5,0==r?15:5);return a.moveTo(255.5,0),a.lineTo(255.5,15),a.moveTo(255.5,4.5),a.lineTo(0,4.5),a.stroke(),t.set("ctx",a),i.toDataURL()},getElement:function(){return this.get("element")},update:function(e){for(var t,n,o=this,i=o.get("gradientArr"),a=o.get("ctx"),r=o.get("labelsEl"),s="",l=0;i.length>l;l++)t=e*i[l].stop>>0,n=a.measureText(t).width/2>>0,0==l&&(n=0),l==i.length-1&&(n*=2),s+='<li style="position:absolute;left:'+(((256*1/(i.length-1)*l||0)>>0)-n+.5)+'px">'+t+"</li>";r.innerHTML=s}};var n=function n(t){var n={radius:40,element:{},canvas:{},acanvas:{},ctx:{},actx:{},legend:null,visible:!0,width:0,height:0,max:!1,gradient:!1,opacity:180,premultiplyAlpha:!1,bounds:{l:1e3,r:0,t:1e3,b:0},debug:!1};this.store=new e(this),this.get=function(e){return n[e]},this.set=function(e,t){n[e]=t},this.configure(t),this.init()};return n.prototype={configure:function(e){var n=this;if(n.set("radius",e.radius||40),n.set("element",e.element instanceof Object?e.element:document.getElementById(e.element)),n.set("visible",null!=e.visible?e.visible:!0),n.set("max",e.max||!1),n.set("gradient",e.gradient||{.45:"rgb(0,0,255)",.55:"rgb(0,255,255)",.65:"rgb(0,255,0)",.95:"yellow",1:"rgb(255,0,0)"}),n.set("opacity",parseInt(255/(100/e.opacity),10)||180),n.set("width",e.width||0),n.set("height",e.height||0),n.set("debug",e.debug),e.legend){var o=e.legend;o.gradient=n.get("gradient"),n.set("legend",new t(o))}},resize:function(){var e=this,t=e.get("element"),n=e.get("canvas"),o=e.get("acanvas");n.width=o.width=e.get("width")||t.style.width.replace(/px/,"")||e.getWidth(t),this.set("width",n.width),n.height=o.height=e.get("height")||t.style.height.replace(/px/,"")||e.getHeight(t),this.set("height",n.height)},init:function(){var e=this,t=document.createElement("canvas"),n=document.createElement("canvas"),o=t.getContext("2d"),i=n.getContext("2d"),a=e.get("element");e.initColorPalette(),e.set("canvas",t),e.set("ctx",o),e.set("acanvas",n),e.set("actx",i),e.resize(),t.style.cssText=n.style.cssText="position:absolute;top:0;left:0;z-index:10000000;",e.get("visible")||(t.style.display="none"),a.appendChild(t),e.get("legend")&&a.appendChild(e.get("legend").getElement()),e.get("debug")&&document.body.appendChild(n),i.shadowOffsetX=15e3,i.shadowOffsetY=15e3,i.shadowBlur=15},initColorPalette:function(){var e,t,n,o=this,i=document.createElement("canvas"),a=o.get("gradient");i.width="1",i.height="256",e=i.getContext("2d"),t=e.createLinearGradient(0,0,1,256),n=e.getImageData(0,0,1,1),n.data[0]=n.data[3]=64,n.data[1]=n.data[2]=0,e.putImageData(n,0,0),n=e.getImageData(0,0,1,1),o.set("premultiplyAlpha",60>n.data[0]||n.data[0]>70);for(var r in a)t.addColorStop(r,a[r]);e.fillStyle=t,e.fillRect(0,0,1,256),o.set("gradient",e.getImageData(0,0,1,256).data)},getWidth:function(e){var t=e.offsetWidth;return e.style.paddingLeft&&(t+=e.style.paddingLeft),e.style.paddingRight&&(t+=e.style.paddingRight),t},getHeight:function(e){var t=e.offsetHeight;return e.style.paddingTop&&(t+=e.style.paddingTop),e.style.paddingBottom&&(t+=e.style.paddingBottom),t},colorize:function(e,t){var n,o,i,a,r,s,l,c,d,u,f=this,p=f.get("width"),h=f.get("radius"),g=f.get("height"),m=f.get("actx"),v=f.get("ctx"),y=3*h,b=f.get("premultiplyAlpha"),k=f.get("gradient"),w=f.get("opacity"),x=f.get("bounds");null!=e&&null!=t?(e+y>p&&(e=p-y),0>e&&(e=0),0>t&&(t=0),t+y>g&&(t=g-y),n=e,o=t,a=e+y,i=t+y):(n=0>x.l?0:x.l,a=x.r>p?p:x.r,o=0>x.t?0:x.t,i=x.b>g?g:x.b),r=m.getImageData(n,o,a-n,i-o),s=r.data,l=s.length;for(var _=3;l>_;_+=4)c=s[_],d=4*c,d&&(u=w>c?c:w,s[_-3]=k[d],s[_-2]=k[d+1],s[_-1]=k[d+2],b&&(s[_-3]/=255/u,s[_-2]/=255/u,s[_-1]/=255/u),s[_]=u);r.data=s,v.putImageData(r,n,o)},drawAlpha:function(e,t,n,o){var i=this,a=i.get("radius"),r=i.get("actx"),s=(i.get("max"),i.get("bounds")),l=e-1.5*a>>0,c=t-1.5*a>>0,d=e+1.5*a>>0,u=t+1.5*a>>0;r.shadowColor="rgba(0,0,0,"+(n?n/i.store.max:"0.1")+")",r.shadowOffsetX=15e3,r.shadowOffsetY=15e3,r.shadowBlur=15,r.beginPath(),r.arc(e-15e3,t-15e3,a,0,2*Math.PI,!0),r.closePath(),r.fill(),o?i.colorize(l,c):(s.l>l&&(s.l=l),s.t>c&&(s.t=c),d>s.r&&(s.r=d),u>s.b&&(s.b=u))},showMap:function(){var e=this,t=(e.get("visible"),e.get("canvas"));t.style.display="block",e.set("visible",!0)},hideMap:function(){var e=this,t=(e.get("visible"),e.get("canvas"));t.style.display="none",e.set("visible",!1)},toggleDisplay:function(){var e=this,t=e.get("visible"),n=e.get("canvas");n.style.display=t?"none":"block",e.set("visible",!t)},getImageData:function(){return this.get("canvas").toDataURL()},clear:function(){var e=this,t=e.get("width"),n=e.get("height");e.store.set("data",[]),e.store.max=1,e.get("ctx").clearRect(0,0,t,n),e.get("actx").clearRect(0,0,t,n)},cleanup:function(){var e=this;e.get("element").removeChild(e.get("canvas"))}},{create:function(e){return new n(e)},util:{mousePosition:function(e){var t,n;return e.layerX?(t=e.layerX,n=e.layerY):e.offsetX&&(t=e.offsetX,n=e.offsetY),void 0!==t?[t,n]:void 0}}}}();e.fkHeatmapFactory=t}(window);
